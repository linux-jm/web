
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML><HEAD><TITLE>Man page of SMRSH</TITLE>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=UTF-8">
<LINK REL="stylesheet" TYPE="text/css" HREF="../../../contrib.css">
</HEAD>
<BODY>
<DIV ALIGN="right">
本ページは <A HREF="http://www.jp.freebsd.org/man-jp/">FreeBSD jpman project</A>
(man-jp@jp.FreeBSD.org) より寄贈いただきました。
</DIV>


<H1>SMRSH</H1>
Section: Maintenance Commands (8)<BR>Updated: %Date: 2000/12/15 19:50:46 %<BR><A HREF="#index">Index</A>
<A HREF="../../../index.html">JM Home Page</A>
<A HREF="../../../manual/sendmail/contrib/man8/smrsh.8">roff page</A><HR>

<A NAME="lbAB">&nbsp;</A>
<H2>名称</H2>

smrsh - sendmail用に制限されたシェル
<A NAME="lbAC">&nbsp;</A>
<H2>書式</H2>

<B>smrsh</B>

<B>-c</B>

command
<A NAME="lbAD">&nbsp;</A>
<H2>解説</H2>

<I>smrsh</I>

は、
<I><A HREF="../man8/sendmail.8.html">sendmail</A></I>(8)

の設定ファイルで、
<I>sh</I>

の代わりに ``prog'' メーラとして使用する事を目的としています。
<I>smrsh</I>

は、システムの全体的なセキュリティを改善するために、
<I>sendmail</I>

の ``|program'' 書式により起動する事ができるコマンドを制限します。
つまり、もし ``悪者'' が alias ファイルや forward ファイルを経由せずに
sendmail からプログラムを実行する事ができたとしても、
<I>smrsh</I>

を使えば、彼(あるいは彼女)が実行できるプログラムを制限する事ができるのです。
<P>

簡単に言うと、
<I>smrsh</I>

は、実行可能なプログラムを単一のディレクトリに存在するものと、
シェル組み込みコマンドの ``exec'', ``exit'', ``echo''
だけに限定します。
このディレクトリは、デフォルトでは、/usr/libexec/sm.bin です。
これにより、システム管理者は利用可能なコマンドを選択する
事ができます。
更に、
<I>smrsh</I>

は、``end run'' 攻撃を防ぐために、コマンド行に
``', `&lt;', `&gt;', `;', `$', `(', `)', `\r' (復改文字),
`\n' (改行文字)
の文字を含むコマンドは実行しません。
``||'' と ``&amp;&amp;'' は、許可されており、次のようなコマンドを使用可能です:
``&quot;|exec /usr/local/bin/procmail -f- /etc/procmailrcs/user || exit 75&quot;''
<P>

プログラム名の前にあるパス名は全て取り除かれるため、
``/usr/bin/vacation'', ``/home/server/mydir/bin/vacation'', ``vacation''
などは全て ``/usr/libexec/sm.bin/vacation'' と解釈されます。
<P>

システム管理者は、
sm.bin ディレクトリに置くプログラムを選ぶ際には慎重な
判断をすべきです。適切な物としては、
<I><A HREF="../man1/vacation.1.html">vacation</A></I>(1)

や
<I><A HREF="../../procmail/man1/procmail.1.html">procmail</A></I>(1)

などがあげられるでしょう。いかなる要望があっても、シェルや、
<I>perl</I>(1)

などのシェルに似たプログラムを
sm.bin
に入れてはいけません。
これは、単に任意のプログラムを実行する事を制限するだけで、
``#!''書式を用いた、シェルスクリプトや perl スクリプトを
sm.bin
ディレクトリに入れる事を制限する訳ではありません。
<A NAME="lbAE">&nbsp;</A>
<H2>コンパイル</H2>

コンパイルはほとんどのシステムでつまらないものです。
デフォルトのサーチパス
(デフォルトでは``/bin:/usr/bin'')
を変更するためには、-DPATH=\&quot;<I>path</I>\&quot; を
使用する必要があり、また、
デフォルトのプログラムディレクトリ
(デフォルトでは ``/usr/libexec/sm.bin'')
を変更するためには、-DCMDBIN=\&quot;<I>dir</I>\&quot; を
使用する必要があります。
<A NAME="lbAF">&nbsp;</A>
<H2>関連ファイル</H2>

/usr/libexec/sm.bin - 制限されたプログラム用のディレクトリ
<A NAME="lbAG">&nbsp;</A>
<H2>関連項目</H2>

<A HREF="../man8/sendmail.8.html">sendmail</A>(8)
<P>

<HR>
<A NAME="index">&nbsp;</A><H2>Index</H2>
<DL>
<DT><A HREF="#lbAB">名称</A><DD>
<DT><A HREF="#lbAC">書式</A><DD>
<DT><A HREF="#lbAD">解説</A><DD>
<DT><A HREF="#lbAE">コンパイル</A><DD>
<DT><A HREF="#lbAF">関連ファイル</A><DD>
<DT><A HREF="#lbAG">関連項目</A><DD>
</DL>
<HR>
This document was created by
<A HREF="../../man/man1/man2html.1.html">man2html</A>,
using the manual pages.<BR>
Time: 03:33:45 GMT, December 05, 2022
</BODY>
</HTML>
