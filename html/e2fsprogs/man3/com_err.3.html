
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML><HEAD><TITLE>Man page of COM_ERR</TITLE>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=UTF-8">
<LINK REL="stylesheet" TYPE="text/css" HREF="../../../jm.css">
</HEAD>
<BODY>

<H1>COM_ERR</H1>
Section: C Library Functions (3)<BR>Updated: 22 Nov 1988<BR><A HREF="#index">Index</A>
<A HREF="../../../index.html">JM Home Page</A>
<A HREF="../../../manual/e2fsprogs/release/man3/com_err.3">roff page</A><HR>

<A NAME="lbAB">&nbsp;</A>
<H2>名前</H2>

com_err - 汎用のエラー表示ルーチン
<A NAME="lbAC">&nbsp;</A>
<H2>書式</H2>

<PRE>
 #include &lt;<A HREF="file:///usr/include/et/com_err.h">et/com_err.h</A>&gt;
void (*<I>proc</I>) (const char *, long, const char *, va_list);

void com_err (const char *whoami, long code, const char *format, ...);

proc = set_com_err_hook (proc);

proc = reset_com_err_hook ();

void initialize_XXXX_error_table ();
</PRE>

<A NAME="lbAD">&nbsp;</A>
<H2>説明</H2>

<I>com_err</I>

はエラーメッセージを標準エラーストリーム
<I>stderr</I>

(<I><A HREF="../../LDP_man-pages/man3/stdio.3.html">stdio</A></I>(3S)

を見よ)
に表示する。エラーメッセージは、
<I>whoami</I>

文字列 (プログラムの名前やプログラムのある部分を示す)・
値
<I>code</I>

(<I><A HREF="../man1/compile_et.1.html">compile_et</A></I>(1)

から引かれる)・
<B><A HREF="../../LDP_man-pages/man3/fprintf.3.html">fprintf</A></B>(3)

スタイルの
<I>format</I>

文字列を使って、残りの引数から
生成した文字列、の 3 つの部分からなる。
<P>
<I>com_err</I>

の動作は
<I>set_com_err_hook</I>

を用いて変更できる。
これは
<I>com_err</I>

に渡される引数を用いて呼び出される関数を定義する。
デフォルトでは内部の関数が用いられ、これは整形したテキストをエラー出力に送る。
つまり、プログラムからのエラーメッセージを、例えば
<B><A HREF="../../LDP_man-pages/man3/syslog.3.html">syslog</A></B>(3)

のような診断ログに振り向けることが容易にできるわけである。
<I>reset_com_err_hook</I>

を用いると、
<I>com_err</I>

の動作をデフォルトの形式に戻すことができる。
この両関数は、実行前の ``hook'' の値を返す。
これらの ``hook'' 関数は、書式の部分で示した
<I>proc</I>

のように宣言しなければならない。
<P>
<I>initialize_XXXX_error_table</I>

ルーチンは、名前とそれに対応する文字列とからなるソースファイルから
<I><A HREF="../man1/compile_et.1.html">compile_et</A></I>(1)

によって自動的に生成される。
それぞれの表は 4 文字までの名前を持ち、ルーチンの名前の
<B>XXXX</B>

の部分になる。これらのルーチンは、
各エラーコードを用いる前に呼び出しておき、
<I>com_err</I>

ライブラリが
エラーコードをこれらの表から認識できるようにしておかなければならない。
<P>
<I>com_err</I>

ライブラリのルーチンを用いる全てのソースファイルは、
<B>com_err.h</B>

ヘッダーファイルをインクルードしなければならない。
実行ファイルをリンクするときには、
<I>``-lcom_err''</I>

を用いて
<I>com_err</I>

ライブラリが含まれるようにしなければならない。


<A NAME="lbAE">&nbsp;</A>
<H2>関連項目</H2>

<B><A HREF="../man1/compile_et.1.html">compile_et</A></B>(1),

<B><A HREF="../../LDP_man-pages/man3/syslog.3.html">syslog</A></B>(3)

<P>
Ken Raeburn, &quot;A Common Error Description Library for UNIX&quot;.
<P>
<P>
<P>

<HR>
<A NAME="index">&nbsp;</A><H2>Index</H2>
<DL>
<DT><A HREF="#lbAB">名前</A><DD>
<DT><A HREF="#lbAC">書式</A><DD>
<DT><A HREF="#lbAD">説明</A><DD>
<DT><A HREF="#lbAE">関連項目</A><DD>
</DL>
<HR>
This document was created by
<A HREF="../../man/man1/man2html.1.html">man2html</A>,
using the manual pages.<BR>
Time: 03:33:37 GMT, December 05, 2022
</BODY>
</HTML>
