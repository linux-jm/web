
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML><HEAD><TITLE>Man page of LILO.CONF</TITLE>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=UTF-8">
<LINK REL="stylesheet" TYPE="text/css" HREF="../../../jm.css">
</HEAD>
<BODY>

<H1>LILO.CONF</H1>
Section: File Formats (5)<BR>Updated: 31 Oct 2001<BR><A HREF="#index">Index</A>
<A HREF="../../../index.html">JM Home Page</A>
<A HREF="../../../manual/lilo/release/man5/lilo.conf.5">roff page</A><HR>

<A NAME="lbAB">&nbsp;</A>
<H2>名前</H2>

lilo.conf - lilo の設定ファイル
<A NAME="lbAC">&nbsp;</A>
<H2>説明</H2>

<P>

このファイル (デフォルトでは
<I>/etc/lilo.conf</I>)

は、ブートローダのインストーラである 'lilo' が読み込む
(<B><A HREF="../man8/lilo.8.html">lilo</A></B>(8)

を参照)。
<P>

内容は例えば以下のようになっている:
<DL COMPACT>
<DT><DD>
<PRE>
# lilo.conf
#
#  global options:
boot=/dev/hda
prompt
timeout=150
lba32
compact
vga=normal
root=/dev/hda1
read-only
menu-title=&quot; John's Computer &quot;
#
#  bootable kernel images:
image=/boot/zImage-1.5.99
     label=try
image=/boot/zImage-1.0.9
     label=1.0.9
image=/tamu/vmlinuz
     label=tamu
     root=/dev/hdb2
     vga=ask
#
#  other operating systems:
other=/dev/hda3
     label=dos
other=/dev/hdb5
     label=os2
     loader=/boot/os2_d.b
     table=E:
</PRE>

</DL>
<P>

この設定ファイルでは、
lilo が /dev/hda の Master Boot Record を 
用いるように記述してある。
(色々な lilo の使い方や、他のオペレーティングシステムとの関係
に関する詳細は、 lilo のドキュメントにある user.tex を
読むこと。)
<P>

ブートローダはブート時に、
<I>boot:</I>

というプロンプトを出して、ユーザーが希望するカーネルのラベル
(とオプション) が入力されるのを待つ。
[Tab] を入力すれば、いつでもカーネルとラベルの一覧を見ることができる。
<B>boot-menu.b</B> ブートローダがインストールされている場合、
選んだカーネルのブートオプションのメニューが表示される。
何も入力しない場合、15 秒 (15 × 1/10 秒) のタイムアウトの後、
初めに記述されているデフォルトのカーネルイメージ
(/boot/zImage-1.5.99) がブートされる。
lilo.conf には最大 16 個のイメージを記述することができる。
<P>

上記のように、設定ファイルはいくつかのグローバルオプション
(例では最初の 9 行) で始まり、種々の image セクションがそれに続く。
image セクションに書かれているオプションは、
グローバルオプションを上書きする。
<P>

コメント行はどこに書いても構わず、&quot;#&quot; 文字で始まる。
<P>
<A NAME="lbAD">&nbsp;</A>
<H2>グローバルオプション</H2>

多くのキーワードがある。以下の説明はほとんど
user.tex と同じである (ちょっとだけ短い)。
<DL COMPACT>
<DT><B>backup=</B><I>&lt;backup-file&gt;</I>

<DD>
元の ブートセクタを
<I>/boot/boot.NNNN</I>

ではなく、
<I>backup-file</I>

にコピーする
(<I>/dev/null</I>

などのデバイスファイルを指定することも可能である)。
<DT><B>bitmap=</B><I>&lt;bitmap-file&gt;</I>

<DD>
ブートメニューを表示するときの背景に使う
640x480x16 のビットマップファイルを指定する。
'message=' が指定されている場合には使ってはならない。
ビットマップを表示できるブートローダ (例えば
<I>boot-bmp.b</I>)

を 'install=' を使って指定する必要がある。
<DT><B>bmp-colors=</B><I>&lt;fg&gt;,&lt;bg&gt;,&lt;sh&gt;,&lt;hfg&gt;,&lt;hbg&gt;,&lt;hsh&gt;</I>

<DD>
'bitmap=' で指定した背景上でメニューを表示する際に使われる色を
10 進数で指定する。
このリストは 6 つのエントリから構成され、
始めの 3 つは標準時の文字色であり、
その後の 3 つはハイライト時の文字色である。
3 色組は前景色・背景色・陰影色という順番になっている。
背景色が指定されていない場合は、「透明 (transparent)」であると仮定する。
陰影色が指定されていない場合は、「なし (none)」であると仮定する。
リストのエントリは、スペースを入れずにコンマで区切られる。
<DT><B>bmp-table=</B><I>&lt;x&gt;,&lt;y&gt;,&lt;ncol&gt;,&lt;nrow&gt;,&lt;xsep&gt;</I>

<DD>
メニューテーブルの位置と配置を指定する。
&lt;x&gt;,&lt;y&gt; は、文字座標おけるテーブルの左上の x 座標と y 座標を指定し、
x は [1..80], y は [1..25] の範囲である。
&lt;ncol&gt; はメニューの列数で (1..3) の範囲である。
&lt;nrow&gt; は各列の行数である。
列数を 2 以上に指定した場合、
&lt;xsep&gt; は各列の左端の文字の間の文字数を指定し、(18..40) の範囲である。
文字数ではなくピクセル値で位置を指定する場合は、
10 進数の値の後ろに 'p' を付けて &lt;x&gt;, &lt;y&gt;, &lt;xsep&gt; を指定する。
<DT><B>bmp-timer=</B><I>&lt;x&gt;,&lt;y&gt;,&lt;fg&gt;,&lt;bg&gt;,&lt;sh&gt;</I>

<DD>
カウントダウンタイマー 'timeout=' のオプション指定。
&lt;x&gt;,&lt;y&gt; は、前述の 'bmp-table=' と同様に、
タイマーの位置を文字列 (またはピクセル) 座標で指定する。
また 3 色の組は、前述の 'bmp-colors=' と同様に、文字の色属性を指定する。
ただし、背景色を指定しなければ<I>ならない</I>。
<DT><B>boot=</B><I>&lt;boot-device&gt;</I>

<DD>
ブートセクターを含むデバイス (例えばハードディスクのパーティション) の
デバイスファイル名を設定する。このキーワードが省略された場合、
ブートセクターは現在ルートとしてマウントされているデバイスから
読み込み (およびおそらく書き出し) を行う。
raid 装置は、たとえば &quot;boot=/dev/md0&quot; というように、
RAID1 デバイスをブートデバイスに指定して初期化される。
LILO のバージョン 22.0 以降では、
ブートレコードの実際の位置が以前のものと異なる。
<DT><B>change-rules</B>

<DD>
パーティションのタイプ番号のブート時変更 (パーティションを隠すかどうか)
を定義する。
<DT><DD>
<PRE>
change-rules
   reset
   type=DOS12
      normal=1
      hidden=0x11
   type=DOS16_small
      normal=4
      hidden=0x14
   type=DOS16_big
      normal=0x06
      hidden=0x16
</PRE>

<DT><DD>
上に示した設定ファイルからの抜粋では、
全てのデフォルト
<I>change-rules</I>

が (&quot;reset&quot; で) 削除されてから、
3 つのパーティションタイプについての change-rules が指定されている。
<I>reset</I> を指定しないと、指定された 3 つのタイプが
既存のデフォルト change-rules に追加される。
通常は、デフォルトのルールで充分である。
パーティションタイプを定義する文字列は、
サフィックス &quot;_normal&quot; または &quot;_hidden&quot; を後ろにつけて
<I>change</I>

セクションで使われる (下記参照)。
詳細は user.tex の中の &quot;Partition type change rules&quot; セクションを参照すること。
<DT><B>compact</B>

<DD>
ブートセクター付近への readリクエストを、1 回にまとめられるか試行する。
マップを小さく保ったままで、ロード時間を非常に短縮できる。
特にフロッピィディスクからのブートを行う場合は `compact' を使うことを
薦める。
<DT><B>default=</B><I>&lt;name&gt;</I>

<DD>
指定されたカーネルイメージをデフォルトのブートイメージとする。
`default' が省略された場合、設定ファイルの最初に
記述が現れたカーネルイメージがデフォルトとなる。
<DT><B>delay=</B><I>&lt;tsecs&gt;</I>

<DD>
ブートローダが自動的にブートするまでの待ち時間を 0.1 秒単位で指定する。
現在ロックされているコマンドライン、
または &quot;lilo -R&quot; で前もって設定されたコマンドライン、
またはデフォルトの `image=' や `other=' で指定された
コマンドラインを使ってブートされる。
`delay' が 0 でない場合、ブートローダは指定された秒数の間だけ
割り込みが行われるのを待つ。
割り込みを受け取った場合、または割り込みを待っている間は、
プロンプト <B>boot:</B> を表示して、自動ブートを行わない。
CAPS LOCK や SCROLL LOCK が ON になっている場合、
または ALT, CTRL, SHIFT のどれかが押された場合、
割り込みとして解釈される。
<P>
この動作は `prompt' を指定することで変更できる (下記参照)。
<DT><B>disk=</B><I>&lt;device-name&gt;</I>

<DD>
指定されたディスク対する非標準的なパラメータを定義する。
詳細は user.tex の中の &quot;Disk geometry&quot; セクションを参照すること。
特に `bios=' パラメータは便利である。
BIOS はディスクを 0x80, 0x81 という風に番号づけするため、Linux カーネルでの
ディスクの認識と BIOS でのディスクの認識の間で不整合が生ずる場合がある
(これは BIOS の種類と設定に依存する)。
よって、もし Linux カーネルと BIOS でのディスクの認識を通常と
異なる設定にしたい場合は、このパラメータによって対応を記述する必要がある。
次に例を挙げる。
<P>
<PRE>
       disk=/dev/sda
            bios=0x80
       disk=/dev/hda
            bios=0x81
</PRE>

<P>
上の記述では、SCSI ディスクを BIOS が認識する 1 番目のディスクとし、
(プライマリマスタにつながっている) IDE のディスクを BIOS が認識する
2 番目のディスクとする。
<DT><B>disktab=</B><I>&lt;disktab-file&gt;</I>

<DD>
ディスクのパラメータテーブル名を指定する。
`disktab' が省略されていた場合、マップインストーラは
<I>/etc/disktab</I>

を参照する。
`disktab' を使用することはあまりお薦めできない。
<DT><B>fix-table</B>

<DD>
lilo にパーティションテーブルの 3D (sector/head/cylinder) アドレスの
調節を許可する。それぞれのパーティションエントリには、
最初と最後のセクタのリニアアドレスと 3D アドレスが入っている。
同じディスクを他の OS (例えば、MS/PC-DOS や OS/2) が使っている場合や
パーティションがトラックに切られていない場合には、
3D アドレスが変わるかもしれない。
lilo は両者のアドレスタイプが一致した
パーティションにだけブートセクタを保存できる。
`fix-table' をセットすると、lilo は間違った
3D スタートアドレスを修正する。
<P>
警告： 他のOS が後でアドレスを上書きする可能性がある。
また、これは思わぬ副作用を引き起こすかもしれない。
正しい修正であっても、パーティションを
トラックに合わせようとするようなプログラムでは、
これによって再パーティションがされてしまうかも知れない。
またある種のディスク (例えばアドレス変換の可能ないくつかの Large EIDE) では、
パーティションテーブルの内容がコンフリクトし、
修正できなくなる場合がありうる。
<DT><B>force-backup=</B><I>&lt;backup-file&gt;</I>

<DD>
`backup' と同様だが、バックアップが存在しても上書きする。
<DT><B>geometric</B>

<DD>
以前のバージョンの LILO と互換性のあるディスクアドレスを使わせる。
ジオメトリアドレスには sector/head/cylinder という形式が使われ、
ディスクシリンダ数が 1023 に制限されている。
アクセスできないシリンダが参照されている場合、
ブート時ではなく、ブートローダのインストール時に診断メッセージが出される。
最近の BIOS の場合は、'lba32' の使用を推奨する。
<DT><B>ignore-table</B>

<DD>
おかしくなったパーティションテーブルを無視するよう lilo に指示する。
<DT><B>install=</B><I>&lt;boot-loader&gt;</I>

<DD>
指定されたファイルを新しいブートローダとしてインストールする。
バージョン 21.5 からは、
<I>boot-text.b</I>

と <I>boot-menu.b</I> の 2 つのブートローダが使用可能になった。
<I>boot.b</I>

は後者へのシンボリックリンクである。
両方のブートローダで、全く同じ形式の
カーネルコマンドラインオプションのエントリを使うことができる。
さらに両方ともシリアルライン (下記の <B>serial=</B> を参照) が
完全にサポートされているが、シリアル端末にはメニュー機能がない。
前者は以前の LILO との厳密な互換性を持たせるために使用可能である。
`install' が省略されると、
<I>/boot/boot.b</I>

がデフォルトで使われる。
<DT><B>lba32</B>

<DD>
sector/head/cylinder 形式のアドレスではなく、
32 ビットの論理ブロックアドレス (LBA) を生成する。
BIOS がパケットアドレッシングに対応している場合、
ディスクにアクセスするときにパケットコールを用いる。
これにより、1024 シリンダ以上あるディスクの
どのパーティションからでもブートできるようになる。
BIOS がパケットアドレスに対応していない場合、
'lba32' アドレスは「リニアアドレス」として
sector/head/cylinder 形式 (ジオメトリアドレス) に変換される。
フロッピーディスクへの参照は、C:H:S 形式のままである。
1998 年以降の全てのシステムに対して、'lba32' の使用を推奨する。
LILO のバージョン 22 からは、'lba32' がディスクアドレス指定の
デフォルトの方式となった。
<DT><B>linear</B>

<DD>
sector/head/cylinder という形式の (ジオメトリ) アドレスを指定する代わりに、
セクタの 24 ビットのリニアアドレスを使用する。
リニアアドレスは実行時にジオメトリアドレスに変換される。
リニアアドレスは cylinder の値が 1023 以下に制限されている。
`linear' オプションを容量の大きいディスクで使うと
<I>/sbin/lilo</I>

はアクセスできないディスクシリンダへの参照をつくるかもしれない。
`lba32' オプションを指定すれば、
これらの多くの落し穴をパケットアドレッシングを使って回避できるが、
最近の BIOS が必要である。
<DT><B>lock</B>

<DD>
このオプション以降のブートコマンドラインを以後のデフォルトとして
自動的に記録する。
lilo はこの記録を、手動で解除されるまで &quot;lock&quot; する。
<DT><B>mandatory</B>

<DD>
イメージのブートにパスワードを付けるオプション `mandatory' (下記参照) を
全てのイメージに適用する。
<DT><B>map=</B><I>&lt;map-file&gt;</I>

<DD>
マップファイルの場所を指定する。`map' が省略された場合、
<I>/boot/map</I>

が使われる。
<DT><B>menu-title=</B><I>&lt;title-string&gt;</I>

<DD>
ブートメニューに (37 文字までの) タイトル行を指定する。
このタイトルはデフォルトのタイトル文字列 &quot;LILO Boot Menu&quot; を置き換える。
<I>boot-menu.b</I>

がブートローダとしてインストールされていない場合
(<I>install=</I>

オプション参照)、この行は何も影響を及ぼさない。
<DT><B>menu-scheme=</B><I>&lt;color-scheme&gt;</I>

<DD>
VGA ディスプレイにおけるデフォルトのブートメニューの色スキームを、
このオプションを使って上書きできる
(MDA ディスプレイの色スキームは固定である)。
一般的な
<I>color-scheme</I>

文字列は以下のような形となる:
<P>
<PRE>
     &lt;text&gt;:&lt;highlight&gt;:&lt;border&gt;:&lt;title&gt;
</PRE>

<P>
各エントリには、前景色と背景色を指定する 2 つの文字が入る。
最初のエントリのみが必須である。
デフォルトのハイライト色は、
文字色の前景色と背景色を入れ換えたものである。
デフォルトの枠色とタイトル色は、文字色と同じである。
文字 <B>kbgcrmyw</B> を使って色を指定する。
それぞれ blac<B>K</B> (黒),
<B>B</B>lue (青), <B>G</B>reen (緑), <B>C</B>yan (シアン), <B>R</B>ed (赤),
<B>M</B>agenta (マゼンタ), <B>Y</B>ellow (黄色), <B>W</B>hite (白) を表す。
大文字の場合は明るい色 (前景色のみ)、小文字の場合は暗い色になる。
有効な色スキーム文字列は以下のようなものである。
<P>
<PRE>
    menu-scheme=Wm     前景を明るい白、背景をマゼンタにする。
    menu-scheme=wr:bw:wr:Yr    LILO のデフォルト。
    menu-scheme=Yk:kw    前景を明るい黄色、背景を黒にする。
</PRE>

<P>
<I>boot-menu.b</I>

がブートローダとしてインストールされていない場合、
この行は何も影響を及ぼさない。
<DT><B>message=</B><I>&lt;message-file&gt;</I>

<DD>
ブートプロンプトを出す前に出力したいメッセージが書かれたファイルを指定する。
&quot;LILO&quot;と出力された後、Shiftキーが押されるまでは、
メッセージはなにも出力されない。
メッセージに制御文字 FF([Ctrl L]) があると、コンソール画面をクリアする。
<I>boot-menu.b</I> ブートローダがインストールされている場合に、
制御文字 FF を使うのは良くない。
メッセージファイルの大きさは最大 65535 バイトに制限されている。
メッセージファイルを修正・移動した場合は、
マップファイルを再作成しなければならない。
&quot;message=&quot; と &quot;bitmap=&quot; を一緒に指定することはできない。
<DT><B>nowarn</B>

<DD>
将来起こりうる不具合に関する警告メッセージを出力しないようにする。
<DT><B>optional</B>

<DD>
カーネルイメージごとのオプションである `optional' (詳細は後述) を、
全てのカーネルに適用することを示す。
<DT><B>password=</B><I>&lt;password&gt;</I>

<DD>
カーネルイメージごとのオプションである `password=...' (詳細は後述) を、
全てのカーネルに適用することを示す。
このオプションを指定すると、パスワード照合を通らない限りブートをしない。
デフォルトレベル `mandatory' では、
デフォルトのイメージは `password=' で保護されている。
`mandatory' は `restricted' より 1 段レベルが高い。
<DT><B>prompt</B>

<DD>
ロックされたコマンドライン、
またはあらかじめ (&quot;lilo -R&quot; で) 設定されたコマンドラインがない限り、
自動ブート (上記の `delay' を参照) を行わない。
そのかわりに、ブートローダはプロンプト
<I>boot:</I>

を表示して、先に進む前にユーザー入力を待つ (下記の
<I>timeout</I>

を参照)。
`prompt' が設定されていて `timeout' が設定されていない場合、
またはデフォルトイメージが `restricted' より高いレベルで
パスワードで保護されている場合、
パスワードを照合しないデフォルトイメージのブートは不可能である。
<DT><B>raid-extra-boot=</B><I>&lt;option&gt;</I>

<DD>
このオプションは RAID1 が導入されている場合にのみ意味がある。
&lt;option&gt; には <I>none</I>, <I>auto</I>, <I>mbr-only</I>, 
またはコンマで区切ったデバイスのリスト
(例えば &quot;/dev/hda,/dev/hdc6&quot;) を指定できる。
LILO バージョン 22.0 からは、通常、
ブートレコードは RAID1 デバイスの最初のセクタに書き込まれる。
PARALLEL raid セットの場合、これ以外のブートレコードは必要ない。
デフォルトの動作は <I>auto</I> であり、
SKEWED raid セットに必要な補助ブートレコードが自動的に作成される。
<I>none</I> を指定すると、予備ブートレコードを全く作成しない。
<I>mbr-only</I> を指定すると、
raid デバイス上には予備ブートレコードを作成せず、
raid セットの全てのディスクのマスターブートレコード (MBR) に
ブートレコードを書き込むことで、
バージョン 22.0 以前の LILO との互換性を持たせる。
明示的なデバイスのリスト指定すると、
RAID1 デバイスのブートレコードに加えて、
リストに列挙されたデバイスにのみ予備ブートレコードが書き込まれる。
バージョン 22 からは RAID1 コードが
デバイス 0x80 の MBR にブートレコードを自動的に書き込まないので、
このようなブートレコードが必要ならば、
このオプションを使って書き込むことができる。
<DT><B>restricted</B>

<DD>
カーネルイメージごとのパスワードオプションである `restricted' (詳細は後述)を、
全てのカーネルに適用することを示す。
<DT><B>serial=</B><I>&lt;parameters&gt;</I>

<DD>
シリアルラインからの制御を可能にする。
指定したシリアルポートを初期化して、そこからの入力も受付ける。
通常通りキーボードからの入力も可能である。
コンソールでシフトキーを押す動作は、シリアルポートでは
break を送ることに対応する。これによってブートローダの
注意を引くことができる。
モデムがつながっているなど、コンソールよりセキュリティが低い場合、
すべてのブートイメージをパスワードで保護した方が良い。
パラメーターの書式は以下の通りである:
<P>
<PRE>
    &lt;port&gt;[,&lt;bps&gt;[&lt;parity&gt;[&lt;bits&gt;]]]
</PRE>

<P>
&lt;port&gt;: シリアルポートの番号を指定する。0 から始まる。
例えば 0 は COM1 (別名 /dev/ttyS0) に対応する。
シリアルポートは 0 から 4 まですべて使用できる (存在していれば)。
<P>
&lt;bps&gt;: シリアルポートの速度を指定する。
110, 150, 300, 600, 1200, 
2400 (デフォルト), 4800, 9600 bps が指定可能である。
さらに速い速度として 19200, 38400, 57600 (56000) も指定できる。
115200 も指定可能であるが、
全ての COMx ポートのハードウェアで動作するとは限らない。
<P>
ブートローダは入力パリティを無視して 8 ビット目を strip する。
次のどれかの文字 (大文字小文字どちらでも良い) を
パリティの記述に用いることができる。
n: パリティを使用しない
e: 奇数 (odd) パリティを使用する
o: 偶数 (even) パリティを使用する
<P>
&lt;bits&gt;: 文字のビット数を指定する。7 と 8 が指定できる。
パリティを使わない場合のデフォルトは 8 で、使う場合は 7。
<P>
`serial' をセットすると、`delay' は自動的に 20 になる。
<P>
例： &quot;serial=0,2400n8&quot;  は COM1 をデフォルトのパラメータで
初期化することを意味する。
<DT><B>single-key</B>

<DD>
このオプションは、1 回のキー入力で選択してブートする
ブートイメージや other エントリを指定する。
選択は名前の最初の文字に基づいて行われる。
名前の最初の文字は、他のものとは区別できるものでなければならない。
このオプションは、メニューや
ビットマップユーザーインターフェース (&quot;install=&quot;) とともに
使うことはできない。
<DT><B>timeout=</B><I>&lt;tsecs&gt;</I>

<DD>
<I>boot:</I>

プロンプトでのキーボード入力待ちのタイムアウト時間 (0.1秒単位) を指定する。
&quot;timeout&quot; は &quot;prompt&quot; が指定されている場合にのみ意味を持つ。
この時間内に入力がない場合は、自動的に最初のカーネルイメージでブートする。
パスワード入力待ちで入力がない場合も同様である。
デフォルトのタイムアウト時間は無限である。
<DT><B>verbose=</B><I>&lt;number&gt;</I>

<DD>
進行状況報告の詳細 (verbose) レベルを変更する。
大きな数を指定すると、より詳細な報告を出力する。
lilo のコマンドラインで更に -v が指定されていた場合、
詳細レベルはそれに応じて上がる。
最大の詳細レベルは 5。
<P>
</DL>
<P>

以上に加え、カーネルに対する設定パラメータとして
<B>append</B>, <B>ramdisk</B>, <B>read-only</B>, <B>read-write</B>, <B>root</B>, <B>vga</B>

をグローバルオプションに設定できる。
各々のカーネルイメージごとの設定として指定されなければ、
これらがデフォルトとして使用される。
<P>
<A NAME="lbAE">&nbsp;</A>
<H2>カーネルイメージごとのセクション</H2>

カーネルイメージごとのセクションの始まりは、
Linux カーネルのブートイメージを含むデバイス/ファイルを指定する
<P>
<PRE>
    <B>image=</B><I>&lt;pathname&gt;</I>
</PRE>

<P>
の行か、ブートしたい任意のシステムを指定する
<P>
<PRE>
    <B>other=</B><I>&lt;device&gt;</I>
</PRE>

<P>
という行である。
<P>

<P>
前者の書式で、<B>image</B> 行がデバイスからのブートが指定している場合は、
<P>
<PRE>
    <B>range=</B><I>&lt;start&gt;-&lt;end&gt;</I>
    <B>range=</B><I>&lt;start&gt;+&lt;nsec&gt;</I>
    <B>range=</B><I>&lt;sector&gt;</I>
</PRE>

<P>
のいずれかによりマップされるセクタの範囲を示さなければならない。
<P>

3 番目の場合、&quot;nsec=1&quot; が仮定される。
<P>
<A NAME="lbAF">&nbsp;</A>
<H2>カーネルオプション (image=)</H2>

ブートイメージが Linux カーネルならば、カーネルに対し
コマンドラインパラメータを与えることができる。
<DL COMPACT>
<DT><B>append=</B><I>&lt;string&gt;</I>

<DD>
カーネルに渡すパラメータラインに指定するパラメータを追加する。
典型的な利用法としては、自動的には検出されなかったり、
自動検知が危険なハードウェアに対するパラメータを指定する場合などがある。
例を挙げる:
<P>
<PRE>
     append=&quot;hd=576,64,32&quot;
</PRE>

<P>
<DT><B>initrd=</B><I>&lt;name&gt;</I>

<DD>
カーネルと共に読み込む初期 RAM ディスクイメージを指定する。
このイメージは、ネットワークドライバや SCSI ドライバといった
ブート時に必要なモジュールを含んでいる。
<I>mkinitrd(8)</I> の man ページを参照すること。
<DT><B>literal=</B><I>&lt;string&gt;</I>

<DD>
`append' と似ているが、ここに与えた以外のオプション
(ルートデバイスの設定など) をすべて無効にする。
重要なオプションが `literal' により意図せず無効にされる可能性があるため、
これはグローバルオプションには指定できない。
<DT><B>ramdisk=</B><I>&lt;size&gt;</I>

<DD>
RAM ディスクのサイズを指定する (例えば &quot;4096k&quot;)。
0 の場合は RAM ディスクを作成しない。
これを省略した場合、 RAM ディスクのサイズは
ブートイメージに設定されている大きさになる。
<DT><B>read-only</B>

<DD>
ルートファイルシステムをリードオンリーでマウントする。
グローバルオプションとして指定することもできる。
通常システムのブートアップ手続きでは、(fsck などを実行した) 後から
ルートファイルシステムを読み書きモードで再マウントする。
<DT><B>read-write</B>

<DD>
ルートファイルシステムを読み書きモードでマウントする。
グローバルオプションとして指定することもできる。
<DT><B>root=</B><I>&lt;root-device&gt;</I>

<DD>
ルートとしてマウントするデバイスを指定する。
グローバルオプションとして指定することもできる。
現在ルートとなっているデバイスを指定するには
<I>current</I>

という特別な名前を使用する。
-r オプションによりルートが変更されている場合、
その変更後のデバイスが用いられる。このオプションが
省略されると、ルートデバイスには現在のカーネルイメージが
入っているデバイスが使用される。(また、これはカーネルの
Makefile の ROOT_DEV に指定してコンパイルすれば変更される。
rdev(8) により後で変更することも可能である。)
<DT><B>vga=</B><I>&lt;mode&gt;</I>

<DD>
ブート時に選択された VGA の text モードを指定する。
グローバルオプションとして指定することもできる。
以下の値が指定できる (大文字、小文字を区別しない):
<P>
<B>normal</B>:

通常の 80x25 テキストモードを指定する。
<P>
<B>extended</B> (または <B>ext</B>):

80x50 テキストモードを指定する。
<P>
<B>ask</B>:

ブート時に動作を停止し、入力を要求する。
<P>
&lt;number&gt;: 対応するテキストモードを使用する。
<I>vga=ask</I>

を指定しておいて、ブート時に
[Enter] を押せば、
使用できるモードのリストが表示される。
<P>
このオプションが省略されると、VGA モードは現在使用している
カーネルイメージの設定になる。
(また、カーネルの Makefile の SVGA_MODE に指定して
コンパイルすれば変更可能である。
rdev(8) により後で変更することも可能である)。
<P>
</DL>
<A NAME="lbAG">&nbsp;</A>
<H2>他のシステム (other=)</H2>

<P>

Linux 以外のシステムをロードするのに使われる。
`other = &lt;device&gt;' という形式で、他のシステムのブートセクタがある
デバイスやディスクパーティションを指定する。
例えば、DOS の場合は `/dev/hda2'、フロッピーの場合は `/dev/fd0' などである。
他のシステムをブートするときには、以下のオプションが使用できる:
<DL COMPACT>
<DT><B>loader=</B><I>&lt;chain-loader&gt;</I>

<DD>
使用するチェーンローダを指定する。
このオプションはグローバルセクションに指定することもできる。
デフォルトでは、
<I>/boot/chain.b</I>

を使用する。
このチェーンローダは読み込んだブートセクタの
パーティションとドライブの情報を渡す。
情報を読み込めるファイルシステムは、
DOS の FAT12 と FAT16, Windows の FAT16 と FAT32,
OS/2 の FAT16 と HPFS のみである。
代替品のチェーンローダである
<I>/boot/os2_d.b</I>

はパーティションとドライブの情報を OS/2 と DOS に適した形で渡す。
(下記の
<I>table=&lt;letter&gt;</I>

を参照)
<DT><B>table=</B><I>&lt;device&gt;</I>

<DD>
パーティションテーブルを持っているデバイスを指定する。
これを省略した場合、ブートローダはブートする OS に
デフォルトパーティションの情報を渡す。
(OS によっては、
自分がどのパーティションからブートされたかを決める方法を別に持っている。
例えば MS-DOS は通常ブートディスク/パーティションのジオメトリ情報を
ブートセクタに保存する。)
'table' で参照されているパーティションテーブルが変更された場合は、
<I>/sbin/lilo</I>

を再実行する必要があることに注意。
<DT><B>table=</B><I>&lt;drive-letter&gt;</I>

<DD>
このオプションは
<I>os2_d.b</I>

チェーンローダの場合にのみ有効である。
これはブートするパーティションの DOS ドライブ文字を指定する。
これは OS/2 を拡張パーティションにインストールした場合は
<I>必須</I>である。
ドライブ文字は後ろにコロンをつけてもつけなくても良い。
<DT><B>change</B>

<DD>
このキーワードは、どのようにプライマリパーティションの ID を変更するか、
そしてどのようにしてプライマリパーティションを有効/無効にするかを
記述するセクションを開始する。
<B>change</B>

がなかった場合、
変更ルールは
<I>automatic</I>

キーワードが指定されたものとして生成される。
キーワード
<B>change</B>

だけがあって、その後に変更ルールがない場合、
automatic 変更ルールが無効になる。
例えば、
<DT><DD>
<PRE>
   other=/dev/hda2
      label=dos
      table=/dev/hda
      change
        automatic
        partition=/dev/hda1
           set=DOS12_hidden
           deactivate
        partition=/dev/hda2
           set=DOS16_big_normal
           activate
</PRE>

<DT><DD>
この指定では、プライマリパーティション /dev/hda2 からブートされた場合、
自動的に生成される変更ルールが有効となる。
さらに、DOS12 パーティションであるパーティション 1 は隠され、無効にされる。
また、パーティション 2 は普通に設定され、有効にされる。
有効化はパーティションテーブルのブートフラグを設定する。
<I>automatic</I>

キーワードはデフォルトの変更ルールと競合するため、上記の
<I>set=</I>

行は冗長である。
<DT><B>map-drive=</B><I>&lt;num&gt;</I>

<DD>
指定されたドライブの BIOS コールを、
次の行で <B>to=</B>&lt;num&gt; の形で指定されたデバイスコードにマッピングする。
このマッピングは DOS のような OS を 2 番目のハードディスクから
ブートするときに便利である。
以下の例では、C: ドライブと D: ドライブを入れ替える。
<P>
<PRE>
   map-drive=0x80
      to=0x81
   map-drive=0x81
      to=0x80
</PRE>

<DT><B>unsafe</B>

<DD>
マップの作成時にブートセクタにアクセスしない。
これにより、パーティションテーブルチェックなどの正当性の検査は
できなくなる。
ブートセクタが固定フォーマットのフロッピー上にある場合に
UNSAFE を用いると、マップインストーラの実行時に
ドライブに読み取り可能なディスクを挿入しなくてすむ。
`unsafe' と `table' は同時に指定できない。
<P>
</DL>
<A NAME="lbAH">&nbsp;</A>
<H2>コマンドオプション (image= &amp; other=)</H2>

<P>

<B>image=</B> と <B>other=</B>

の両方の場合に、以下のオプションが使用できる。
<DL COMPACT>
<DT><B>label=</B><I>&lt;name&gt;</I>

<DD>
ブートローダは指定するブートイメージの識別に、
(パス名を除いた) ファイル名を使う。
違った識別名を使うこともでき、変数 `label' に設定すればよい。
<DT><B>alias=</B><I>&lt;name&gt;</I>

<DD>
同じブートイメージの 2 番目の識別名として、
ここで指定される別名を使うこともできる。
<DT><B>lock</B>

<DD>
(上記を参照。)
<DT><B>optional</B>

<DD>
マップ作成時に利用でなければ、このブートイメージを省略する。
常に存在するとは限らないテスト用カーネルを
ブートイメージに指定する際に便利である。
<DT><B>password=</B><I>&lt;password&gt;</I>

<DD>
`image=' または `other=' をパスワード (パスフレーズ) で保護する。
グローバルセクションとして指定することもできる。
`password=' 設定の解釈は、
(下記の) `mandatory', `restricted', `bypass' によって変わる。
<BR>

パスワードは、(セキュリティ上の問題があるが) 設定ファイルで指定することも、
ブートローダのインストール時に入力することもできる。
対話的にパスワードを入力するリクエストをさせるためには、
<B>password=&quot;&quot;</B> を指定する必要がある。
ブートインストーラを再実行する際に、
対話的にパスワードを入力する指定をもう一度行う必要はない。
この指定は、設定ファイルの参考ファイル (デフォルトの名前は
<B>/etc/lilo.conf.crc</B>) にハッシュ形式でキャッシュされている。
設定ファイルが更新された場合、
パスワードキャッシュファイルを再作成するために
<I>lilo -p</I> を再実行せよ、という警告メッセージが出される。
<DT><B>mandatory</B>

<DD>
このオプションが指定されているイメージをブートするためには、
パスワードが必要である。
これがデフォルトである。
このオプションは、別のグローバル設定を上書きするために、
`image=' または `other=' のセクションで指定される。
<DT><B>restricted</B>

<DD>
コマンドラインからカーネルパラメータ
(例えば 'single') が指定されたときにだけ、
イメージをブートする際のパスワード入力を要求するようにする。
このオプションは、別のグローバル設定を上書きするために、
`image=' または `other=' のセクションで指定される。
<DT><B>bypass</B>

<DD>
イメージをブートする際にパスワードを必要としない。
`image=' または `other=' で指定されているイメージのブートに
グローバルパスワードを適用しないことを示すのに使われる。
</DL>
<P>

<P>
<A NAME="lbAI">&nbsp;</A>
<H2>関連項目</H2>

<A HREF="../man8/lilo.8.html">lilo</A>(8), mkinitrd(8), <A HREF="../man8/mkrescue.8.html">mkrescue</A>(8), rdev(8).
<BR>

<P>
lilo のディストリビューションには、ここで要約した内容の
詳細なドキュメントが含まれている。
(lilo 22.1)
<P>

<HR>
<A NAME="index">&nbsp;</A><H2>Index</H2>
<DL>
<DT><A HREF="#lbAB">名前</A><DD>
<DT><A HREF="#lbAC">説明</A><DD>
<DT><A HREF="#lbAD">グローバルオプション</A><DD>
<DT><A HREF="#lbAE">カーネルイメージごとのセクション</A><DD>
<DT><A HREF="#lbAF">カーネルオプション (image=)</A><DD>
<DT><A HREF="#lbAG">他のシステム (other=)</A><DD>
<DT><A HREF="#lbAH">コマンドオプション (image= &amp; other=)</A><DD>
<DT><A HREF="#lbAI">関連項目</A><DD>
</DL>
<HR>
This document was created by
<A HREF="../../man/man1/man2html.1.html">man2html</A>,
using the manual pages.<BR>
Time: 03:33:39 GMT, December 05, 2022
</BODY>
</HTML>
