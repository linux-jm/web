
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML><HEAD><TITLE>Man page of SORT</TITLE>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=UTF-8">
<LINK REL="stylesheet" TYPE="text/css" HREF="../../../jm.css">
</HEAD>
<BODY>

<H1>SORT</H1>
Section: User Commands  (1)<BR>Updated: GNU Text Utilities<BR><A HREF="#index">Index</A>
<A HREF="../../../index.html">JM Home Page</A>
<A HREF="../../../manual/GNU_textutils/release/man1/sort.1">roff page</A><HR>

<A NAME="lbAB">&nbsp;</A>
<H2>名前</H2>

sort - テキストファイルの行をソートする
<A NAME="lbAC">&nbsp;</A>
<H2>書式</H2>

<B>sort</B>

[-cmus] [-t separator] [-o output-file] [-T tempdir] [-bdfiMnr]
[+POS1 [-POS2]] [-k POS1[,POS2]] [file...]
<BR>

<B>sort</B>

{--help,--version}
<A NAME="lbAD">&nbsp;</A>
<H2>説明</H2>

この文書はもうメンテナンスされていないので、不正確・不完全
な可能性がある。現在は texinfo 文書が正式な情報となっている。
<P>

このマニュアルページは GNU 版
<B>sort</B>

について記述したものである。
<B>sort</B>

は指定されたファイルの行をソート、マージ、比較する。ファイル名が与えら
れなかった場合は標準入力を読み込む。ファイル名 `-' は標準入力を意味す
る。デフォルトでは
<B>sort</B>

は結果を標準出力に書き出す。
<P>

<B>sort</B>

には 3 種類の動作モードがある。ソート (デフォルトの動作)、マージ、ソー
トされているかのチェックである。以下のオプションで動作モードを変更する。
<DL COMPACT>
<DT><I>-c</I>

<DD>
与えられたファイルがすでにソートされているかどうかをチェックする。ソー
トされていないものがあった場合は、エラーメッセージを表示して戻り値に 1 
を返す。
<DT><I>-m</I>

<DD>
与えられたファイル群をまとめてソートしてマージする。入力ファイルは事前
にそれぞれソートされていなければならない。マージ動作ではなく、ソート動
作を複数ファイルにまとめて行うことも可能である。マージ動作が提供されて
いるのは、こちらの方が高速だからである。
</DL>
<P>

行のペアは以下のように比較される。キーフィールドが指定されている場合は、
<B>sort</B>

は順序オプション (ordering option) によってコマンドラインから指定され
た順に、それぞれの行からのフィールドを比較する。比較動作は違いを発見す
るか全てのフィールドを尽くすまで継続される。
<P>

グローバルオプション
<I>Mbdfinr</I>

のうちのどれかが与えられていて、キーフィールドが指定されなかった場合は、
<B>sort</B>

はグローバルオプションの指定の下に、行全体を比較する。
<P>

もし全てのキーが等しければ (または順序オプションの指定が全くなければ)、
<B>sort</B>

は最終ソート (last-resort) として、マシンで定義されている順序で行を 1 
バイトずつ比較する。

最終ソートによる比較はグローバルオプション
<I>-r</I>

にはそのまま適用される。

<I>-s</I>

(stable) オプションはこの最終ソートの比較を行わない。したがって全ての
フィールドが等しかった行の間では、入力ファイルの順序が保存される。フィー
ルドやグローバルオプションが指定されなかった場合は
<I>-s</I>

は効果を持たない。
<P>

GNU
<B>sort</B>

には入力ファイルの大きさや行の長さに関する制限はない。さらに入力ファイ
ルの最終バイトが改行 (newline) である必要もない。 GNU
<B>sort</B>

は黙って newline を追加する。
<P>

環境変数
<B>TMPDIR</B>

が設定されている場合、
<B>sort</B>

は一時ファイルの置き場所として、デフォルトの /tmp の代わりにそのディレ
クトリを用いる。オプション
<I>-T tempdir</I>

でも一時ファイルを置くディレクトリを指定できる。オプションは環境変数
より優先される。
<P>

以下のオプションは出力行の順序に影響する。これらはグローバルにも、また
特定のキーフィールドのみに対しても指定できる。キーフィールドが指定され
ていない場合は、グローバルオプションは行全体の比較に対して適用される。
指定されている場合は、グローバルオプションは、特にオプション指定のない
キーフィールドに継承される。

<DL COMPACT>
<DT><I>-b</I>

<DD>
各行の比較の際に、行頭の空白を無視する。
<DT><I>-d</I>

<DD>
「電話帳」順でソートする。アルファベット、数字、空白以外のキャラクタを
すべて無視する。
<DT><I>-f</I>

<DD>
ソートの際に、小文字を対応する大文字と同じに扱う。例えば `b' は `B' と
同じにソートされる。
<DT><I>-i</I>

<DD>
ASCII コードの範囲である 040 以上 0176 以下 (8 進数) に含まれない文字
を無視する。
<DT><I>-M</I>

<DD>
行頭の空白文字をすべて無視して、最初に現われた 3 文字を、月の名称の省
略形とみなして、 `JAN' &lt; `FEB' &lt; ... &lt; `DEC' の順でソートする。小文字
は大文字と同じに扱われる。月の名称にない文字列は、より低位であるとみな
される。
<DT><I>-n</I>

<DD>
先頭の文字列 (空白が前置されていても良い) を数値文字列として比較す
る。数値文字列は、先頭の - 符号 (なくても良い)、 0 桁以上の数字、
そして小数点と 0 桁以上の数字 (なくても良い) からなる。
<DT><I>-r</I>

<DD>
比較の結果を逆順にする。より大きなキー値を持つ行が、より早く現われるよ
うになる。
</DL>
<P>

他のオプションは以下の通り:
<DL COMPACT>
<DT><I>-o output-file</I>

<DD>
出力先を標準出力から
<I>output-file</I>

に変更する。
<I>output-file</I>

が入力ファイルのどれかひとつだった場合、
<B>sort</B>

はその入力ファイルを一時ファイルにコピーしてからソートと
<I>output-file</I>

への出力を行う。
<DT><I>-t separator</I>

<DD>
各行からソートキーを検索する際、文字
<I>separator</I>

をフィールドのセパレーターにする。デフォルトでは、フィールドは空白以外
の文字と空白文字の間の空文字列 (empty string) によって分離される。例え
ば入力行として ` foo bar' が与えられた場合、
<B>sort</B>

はこの行をフィールド ` foo' と ` bar' に分離する。フィールドセパレーター
は、その前後のフィールドには含まれないものとされる。
<DT><I>-u</I>

<DD>
デフォルトの動作、または
<I>-m</I>

オプションの動作では、等しいとされた行のうちの最初のものだけを表示する。
<I>-c</I>

オプションの動作では、連続した行で等しいものがないかどうかをチェックす
る。

<DT><I>+POS1 [-POS2]</I>

<DD>
各行でソートキーとして用いるフィールドを指定する。 POS1 から 
POS2 の直前の部分 (POS2 が与えられなかった場合は行末まで) がフィールド
となる。フィールドと文字位置は 0 から始まる。
<DT><I>-k POS1[,POS2]</I>

<DD>
ソートキーを指定する別法。フィールドと文字位置は 1 から始まる。
</DL>
<P>

位置の指定は <I>f</I>.<I>c</I> という書式で行う。 <I>f</I> は用いるフィー
ルドの番号、 <I>c</I> は先頭文字の番号で、 <I>+pos</I> の場合はフィール
ドの先頭から、<I>-pos</I> の場合は直前のフィールドの最後から数える。 .<I>c</I>
の部分は省略でき、その場合はフィールドの先頭の文字となる。
<I>-b</I>

オプションが指定された場合の .<I>c</I> の起点は、 <I>+pos</I> ならフィー
ルドに最初に現われた空白以外の文字となり、 <I>-pos</I> なら直前のフィー
ルド以降に最初に現われた空白以外の文字となる。
<P>

<I>+pos</I> や <I>-pos</I> 引き数にはオプション文字
<I>Mbdfinr</I>

を付加することができる。この場合、そのフィールドにはグローバルな順序オ
プションは適用されなくなる。
<I>-b</I>

オプションは <I>+pos</I> 及び <I>-pos</I> の片方にも両方にも指定でき、
グローバルオプションから継承された場合は両方に適用される。
<I>-n</I>

または
<I>-M</I>

オプションが指定された場合には、
<I>-b</I>

が暗黙に指定されたとみなされ、
<I>-b</I>

がキー指定の <I>+pos</I> と <I>-pos</I> の両方に適用される。キーは複数
のフィールドにまたがっていても構わない。
<P>

以上に加えて、 GNU 
<B>sort</B>

が引き数ひとつで起動された場合には、以下のオプションも認識される:
<DL COMPACT>
<DT><I>--help</I>

<DD>
使い方に関するメッセージを標準出力に表示し、実行成功を返して終了する。
<DT><I>--version</I>

<DD>
バージョン情報を標準出力に表示して終了する。
</DL>
<A NAME="lbAE">&nbsp;</A>
<H2>移植性</H2>

<P>

<B>sort</B>

の歴史的な (BSD や System V の) 実装では、いくつかのオプションの解釈に
差異があった。典型的なものとしては
<I>-b</I>,

<I>-f</I>,

<I>-n</I>

などを挙げることができる。
GNU sort は POSIX で指定されているように動作する。これはだいたい
System V  (すべてではない!) での動作に似ている。 POSIX によれば、
今後は
<I>-n</I>

は
<I>-b</I>

を伴わない。
一貫させるため、
<I>-M</I>

も同様に変更されている。これはフィールド指定が明確でない場合には、文字
位置の解釈に影響してしまうかもしれない。これが問題になる場合は、明示的
に
<I>-b</I>

を加えれば良い。
<A NAME="lbAF">&nbsp;</A>
<H2>バグ</H2>

<I>-k</I>

が使われるかどうかによってフィールド番号の意味が異なってしまうのは混乱
のもとである。これは POSIX が悪いんだよ!
<P>
<P>

<HR>
<A NAME="index">&nbsp;</A><H2>Index</H2>
<DL>
<DT><A HREF="#lbAB">名前</A><DD>
<DT><A HREF="#lbAC">書式</A><DD>
<DT><A HREF="#lbAD">説明</A><DD>
<DT><A HREF="#lbAE">移植性</A><DD>
<DT><A HREF="#lbAF">バグ</A><DD>
</DL>
<HR>
This document was created by
<A HREF="../../man/man1/man2html.1.html">man2html</A>,
using the manual pages.<BR>
Time: 03:33:25 GMT, December 05, 2022
</BODY>
</HTML>
