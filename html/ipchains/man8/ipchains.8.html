
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML><HEAD><TITLE>Man page of IPCHAINS</TITLE>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=UTF-8">
<LINK REL="stylesheet" TYPE="text/css" HREF="../../../jm.css">
</HEAD>
<BODY>

<H1>IPCHAINS</H1>
Section:  (8)<BR>Updated: February 8, 1998<BR><A HREF="#index">Index</A>
<A HREF="../../../index.html">JM Home Page</A>
<A HREF="../../../manual/ipchains/release/man8/ipchains.8">roff page</A><HR>

<A NAME="lbAB">&nbsp;</A>
<H2>名前</H2>

ipchains - IP ファイアウォール管理
<A NAME="lbAC">&nbsp;</A>
<H2>書式</H2>

<B>ipchains -[ADC] </B>チェイン ルールの詳細 [オプション]

<BR>

<B>ipchains -[RI] </B>チェイン ルール番号 ルールの詳細 [オプション]

<BR>

<B>ipchains -D </B>チェイン ルール番号 [オプション]

<BR>

<B>ipchains -[LFZNX] </B>[チェイン] [オプション]

<BR>

<B>ipchains -P </B>チェイン ターゲット [オプション]

<BR>

<B>ipchains -M </B>[ -L | -S ] [オプション]

<A NAME="lbAD">&nbsp;</A>
<H2>説明</H2>

<B>ipchains</B>

は Linux カーネル中の IP ファイアウォールのルールを設定し、保守し、
検査するためのものである。
これらのルールは、4 つのカテゴリに分類できる - 
IP input (入力) チェイン、IP output (出力) チェイン、
IP forward (転送) チェイン、そしてユーザ定義チェインである。
<P>
これら各々のカテゴリ毎に、ルールの一覧表【訳注: table/テーブル】が
用意される。
これらルールはユーザ定義チェインのどれか一つを参照することもある。
詳細については
<I>ipfw</I>(4)

を参照のこと。
<A NAME="lbAE">&nbsp;</A>
<H2>ターゲット</H2>

ファイアウォールルールでは、パケットの判定基準とターゲットを指定する。
対象パケットがマッチしないと、チェイン中の次のルールが検査される。
ルールに一致する場合、次のルールはターゲットの値によって指定される。
ターゲットの値はユーザ定義チェインの名前か、または特別な値である
<I>ACCEPT</I>,

<I>DENY</I>,

<I>REJECT</I>,

<I>MASQ</I>,

<I>REDIRECT</I>,

<I>RETURN</I>

のうちの 1 つである。
<P>
<I>ACCEPT </I>

は、対象パケットを通過させる。
<I>DENY</I>

は、対象パケットを床へ落とし、捨て去る。
<I>REJECT </I>

は、対象パケットを捨て去るという点では DENY と同じだが、 DENY よりも
礼儀正しく、デバッグし易くなっている。
何故なら、パケットを捨てる際に対象パケットを捨てたことを示す ICMP
メッセージを送信元に返信するからである。
(
<I>DENY </I>

と
<I>REJECT </I>

は、 ICMP パケットに関しては動作が同じであることに注意されたい。)
<P>
<I>MASQ</I>

は forward チェインとユーザ定義チェインに対してのみ有効であり、且つカーネルが
<B>CONFIG_IP_MASQUERADE</B>

付きでコンパイルされている場合にだけ使用できる。
これにより、パケットはあたかもローカルホストから発信されたかのように
マスカレードされる。
更に、受信されるパケットは先にマスカレードされたホストに対する返答として
認識されると共に、自動的にマスカレード外し (demasquerade) が行われ、
forward チェインのチェックから外される。
<P>
<I>REDIRECT</I>

は input チェインとユーザ定義チェインに対してのみ有効であり、カーネルが
<B>CONFIG_IP_TRANSPARENT_PROXY</B>

付きでコンパイルされている場合にだけ使用できる。
このターゲットにより、リモートホスト宛に送信されたパケットであっても
ローカルのソケットへ振り向けられる。
リダイレクト先のポートにデフォルト値である 0 が指定されていると、
そのパケットの宛先ポートがリダイレクト先のポートとして使用される。
このターゲットを用いる時は、オプションの引数としてポート番号が指定できる。
<P>
ユーザ定義チェインの終りに達するか、またはターゲット
<I>RETURN</I>

を持つルールにマッチした場合、以前の (呼び出し元の) チェイン中の次の
ルールが評価される。
組み込み済みチェインの終りに達するか、または組み込み済みチェインのルールの
ターゲットとして
<I>RETURN</I>

にマッチした場合、チェインに指定されたポリシーがそのパケットの運命を
決定する。
<A NAME="lbAF">&nbsp;</A>
<H2>オプション</H2>

<B>ipchains</B>

が認識するオプションは、幾つかのグループに分類できる。
<A NAME="lbAG">&nbsp;</A>
<H3>コマンド</H3>

これらのオプションは実行する特定の機能を指定する - 
以下に特別に指定のない限り、コマンドラインではこれらのオプションのうち
いずれか一つしか指定することができない。
ロングバージョンのコマンドやオプション名は、必ずしも完全な形の名前で
指定する必要はなく、
<B>ipchains</B>

が他のオプションと識別することができるだけの長さがあれば十分である。
【訳注: 例えば、 --append の場合、 --a で始まるオプション名は他にないので、
--app でも可である。】
<DL COMPACT>
<DT><B>-A, --append</B>

<DD>
選択したチェインの末尾に 1 つ以上のルールを追加する。
名前解決の結果、発信元アドレスと宛先アドレスの両方またはいずれかの名前が
1 つ以上の IP アドレスを持つ場合、ルールは各々の可能なアドレスの組合せ毎に
追加される。
<DT><B>-D, --delete</B>

<DD>
選択したチェインから、1 つ以上のルールを削除する。
このコマンドには 2 つのバージョンがある - 
ルールは (最初のルールを 1 として数え始めて) チェイン中の番号で
指定されるか、一致するルールにて指定される。
<DT><B>-R, --replace</B>

<DD>
選択したチェインのルールを置き換える。
名前解決の結果、発信元と宛先の両方またはいずれかの名前が
複数の IP アドレスを持つ場合、コマンドの実行は失敗する。
ルールには 1 から始まる番号が振られる。
<DT><B>-I, --insert</B>

<DD>
選択したチェインへ、 1 つ以上のルールを指定のルール番号で挿入する。
従って、ルール番号に 1 を指定すると、そのルールはチェインの先頭に
挿入される。
<DT><B>-L, --list</B>

<DD>
選択したチェインに含まれる全てのルールを一覧表示する。
チェインを指定しないと、全てのチェインが一覧表示される。
チェインを指定しない時に、
<B>-Z</B>

(ゼロ) オプションとの組み合わせは有効である。
正確な出力は他の引数の指定によって行われる。
<DT><B>-F, --flush</B>

<DD>
選択したチェインの内容を一気に消去する。
これは全てのルールを一つずつ削除することと等価である。
<DT><B>-Z, --zero</B>

<DD>
全てのチェインのパケットカウンタとバイトカウンタをゼロに初期化する。
カウンタがクリアされる直前にその値を見たい時の為に、 
<B>-L, --list</B>

(リスト) オプションとの組み合わせは有効である - 
カウンタのクリアを行う際、特定のチェインを指定することは出来ない。
(
<I>全ての</I>

チェインが表示されると共にクリアされる)
<DT><B>-N, --new-chain</B>

<DD>
指定した名前のユーザ定義チェインを新たに作成する。
既存のターゲットと同じ名前は使用できない。
<DT><B>-X, --delete-chain</B>

<DD>
指定したユーザ定義チェインを削除する。
削除対象チェインへの参照が存在してはならない 
(参照されている場合は、そのチェインを削除する前に、参照元のルールを
削除するか、或は他のチェインへ移動しなければならない)。
引数が与えられなかった場合、 ipchains は組み込み済みチェインを除く
全てのユーザ定義チェインを削除しようとする。
<DT><B>-P, --policy</B>

<DD>
チェインのポリシーを指定したターゲットに設定する。
正しいターゲットについては、
<B>ターゲット</B>

の項を参照。
ポリシーを持つことができるのはユーザ定義ではないチェインだけであり、
組み込み済みチェインもユーザ定義チェインもポリシーのターゲットとはなり得ない。
<DT><B>-M, --masquerading</B>

<DD>
このオプションは、(
<B>-L</B>

オプションと組み合わせて) 現在マスカレードされている接続を閲覧したり、(
<B>-S</B>

オプションと組み合わせて) カーネルにマスカレードの値を設定する。
<DT><B>-S, --set tcp tcpfin udp</B>

<DD>
IP マスカレードに使用するタイムアウト値を変更する。
このコマンドは常に 3 つのパラメータを取り、それぞれ、TCP セッション、
FIN パケット受信後の TCP セッション、UDP パケットに対するタイムアウト
値 (秒) を表す。
タイムアウト値 0 は、対応する項目の現在のタイムアウト値が保持される
ことを意味する。
このオプションは、
<B>-M</B>

フラグとの組み合わせの時のみ使用できる。
<DT><B>-C, --check</B>

<DD>
選択したチェインで与えられたパケットを照合する。
このパケットを、ネットワークから来た &quot;本物の&quot; パケットのように扱わせることで
カーネルルーチンのテストに使える。
組み込み済みチェインやユーザ定義チェインをチェックするのにも使える。
ファイアウォールのルールを規定した引数は、テスト用パケットを構築するのにも
使える。
特に、
<B>-s</B>

(発信元)、
<B>-d</B>

(宛先)、
<B>-p</B>

(プロトコル)、
<B>-i</B>

(インターフェース) フラグは必ず指定する。
<DT><B>-h, --help</B>

<DD>
コマンドの書式に関する (今のところは非常に簡単な) 説明を表示する。
オプションに
<I>icmp</I>

を指定すると、ICMP 名の一覧を表示する。
<DT><B>-V, --version</B>

<DD>
単に ipchains のバージョン番号を表示する。
</DL>
<A NAME="lbAH">&nbsp;</A>
<H3>引数</H3>

下記に示すパラメータは (追加 (append), 削除 (delete), 置換(replace),
挿入 (insert) 及びチェック (check) の各コマンドにて用いられる) ルールの
指定を補う。
<P>
<DL COMPACT>
<DT><B>-p, --protocol</B><I>[!] protocol</I>

<DD>
チェック対象となるルールまたはパケットのプロトコル。
プロトコルには
<I>tcp</I>,

<I>udp</I>,

<I>icmp</I>,

<I>all</I>,

のどれか一つを指定する。
またはこれらのプロトコルに対応したプロトコル番号や、これらのプロトコルに
対応していない番号を指定できる。
また、 /etc/protocols にあるプロトコル名での指定も許される。
プロトコル指定の前に &quot;!&quot; を置くと、そのプロトコルを指定しないことになる。
数値 0 は
<I>all</I>

と等価である。
プロトコル
<I>all</I>

は全てのプロトコルと一致し、このオプションが省略された場合のデフォルト値
である。
<I>all</I>

は check コマンドと組み合わせてはならない。
<DT><B>-s, --source, --src </B>[!] <I>address</I>[/<I>mask</I>] [!] [<I>port[:port]</I>]

<DD>
発信元の指定。
<I>address</I>

は、ホスト名・ネットワーク名・素の IP アドレスのいずれでもよい。
<I>mask</I>

は、ネットマスク・単なる数 (ネットマスクの左側から数えた 1 の個数) のいずれでもよい。
したがって、
<I>24</I>

という mask の値は、
<I>255.255.255.0</I>

と等価である。
アドレス指定の前に &quot;!&quot; を置くと、そのアドレスを指定しないことになる。
<P>
発信元にはポート指定または ICMP タイプを含めてもよい。
これはサービス名、ポート番号、ICMP タイプの数値、あるいは
<BR>

<BR>&nbsp;ipchains&nbsp;-h&nbsp;icmp
<BR>

コマンドで表示される ICMP タイプ名のいずれかでよい。
<BR>

これら ICMP 名の多くはタイプとコードの両方を参照することに注意されたい。
よって、
<B>-d</B>

フラグの後の ICMP コードの指定は誤りである。
この節の残りの部分では、
<I>port</I>

はポート指定または ICMP タイプのいずれかを意味する。
対象とするポートの範囲を
<I>port</I>:<I>port</I>

という書式で指定することもできる。
最初のポートを省略すると、&quot;0&quot; とみなされる。
最後のポートを省略すると、&quot;65535&quot; とみなされる。
<P>
ポートは、
<I>tcp</I>,

<I>udp</I>,

<I>icmp</I>

プロトコルとの組み合わせでのみ指定可能である。
ポート指定の前に &quot;!&quot; を置くと、そのポートを指定しないことになる。
check コマンドが指定された場合、厳密に 1 つのポートが必要である。
<B>-f </B>

(fragment) フラグが指定された場合、ポートの指定は許されない。
<DT><B>--source-port </B>[!] [<I>port[:port]</I>]

<DD>
発信元ポートまたは発信元ポート範囲の、個別指定を可能とする。
詳細については、前出の
<B>-s</B>

フラグに関する解説を参照のこと。フラグ
<B>--sport</B>

は、このオプションの別名である。
<DT><B>-d, --destination, --dst </B>[!] <I>address</I>[/<I>mask</I>] [!] [<I>port[:port]</I>]

<DD>
宛先指定。
構文についての詳細な説明は、
<B>-s</B>

(source) フラグの解説を参照のこと。
ポートを持たない ICMP に対しては、&quot;宛先ポート&quot; は数字の ICMP コードを表す。
<DT><B>--destination-port </B>[!] [<I>port[:port]</I>]

<DD>
ポートの個別指定を可能とする。詳細については、
<B>-s</B>

フラグの解説を参照のこと。フラグ
<B>--dport</B>

は、このオプションの別名である。
<DT><B>--icmp-type </B>[!] typename

<DD>
ICMP タイプの指定を可能にする (正しい ICMP タイプ名を確認するには、
<B>-h icmp</B>

オプションを使用する)。
宛先指定に ICMP タイプを付加するよりも、これを利用するほうがより便利な
場合が多い。
<DT><B>-j, --jump </B><I>target</I>

<DD>
これはルールのターゲットを指定する - 
すなわち、ルールにマッチしたパケットの行く末である。
ターゲットはユーザ定義チェイン (但し、当該ルールが含まれているものを
除く) か、パケットの運命を直接決定する特定のターゲットのうちの一つが
指定可能である。
ルール中でこのオプションが省略された場合には、パケットの運命には全く
影響しないが、ルールのカウンタの値は増加する。
<DT><B>-i, --interface </B><I>[!] name</I>

<DD>
(input チェインにおいては) 受信したパケットが通過するインターフェース名、
(forward 及び output チェインにおいては) 送信されるパケットが通過する
インターフェース名を指定する。
このオプションが省略された場合は空文字列と見なされ、全ての
インターフェース名を指定することと同じ意味になる。
インタフェース名の前に &quot;!&quot; が置かれると、そのインターフェースを
指定しないという意味になる。
インタフェース名の末尾の &quot;+&quot; は前方一致を示し、&quot;+&quot; の直前までの文字列
で始まるインタフェースの全てにマッチする。
<DT><B>[!]  -f, --fragment</B>

<DD>
寸断された (fragment: フラグメント) パケットのうち 2 番目以降の
フラグメントだけを参照するルールであることを意味する。
そのようなパケット (または ICMP タイプ) の発信元ポートや宛先ポートを
識別する方法は無いので、この類のパケットはあらゆるルールとマッチしない。
&quot;-f&quot; フラグの前に &quot;!&quot; があると、2番目以降のフラグメントを参照しない。
</DL>
<A NAME="lbAI">&nbsp;</A>
<H3>その他のオプション</H3>

以下のオプションを追加することができる - 
<DL COMPACT>
<DT><B>-b, --bidirectional</B>

<DD>
双方向モード。
ルールは IP パケットに対し双方向にマッチする - 
これは発信元と宛先を交換してルールを繰り返して記述することと同じ効果を
もたらす。
TCP syn パケットの送出を許可する設定に -b ルールを適応すると、TCP syn
パケットでないパケットの受け取りを許可する設定にはならない。
【訳注: -b フラグが反対を意味するからといって、&quot;TCP synパケット&quot; の反対
の意味で &quot;非SYNパケット&quot; という対応になったり、 &quot;パケットの送出&quot; の反対
の意味で &quot;パケットの受けとり&quot; という対応にはならない。
意味が反対になるのは発信元アドレスと宛先アドレスの交換によるパケットの
方向だけであり、 &quot;SYN パケット&quot; が&quot;非SYNパケット&quot; にはならないし、
input チェインから output チェインに扱いが変わる訳でもない。】
つまり、-b フラグは使わずに、きちんと一つずつルールを指定したほうがよい。
<DT><B>-v, --verbose</B>

<DD>
詳細表示。
このオプションは、コマンドのインターフェースアドレス・(もしあれば)
ルールのオプション・TOS マスク・パケットとバイトのカウンタを一覧表にして
表示する。
カウンタ表示の後の 'K', 'M', 'G' は各々、 1000, 1,000,000, 1,000,000,000 倍を
意味する。
(但し、
<B>-x</B>

フラグはこの表示方法を変更する。)
<B>-M</B>

と組み合わせて使うと、デルタシーケンス番号 (delta sequence numbers) に
関連する情報も表示される。
追加、挿入、削除、置換にこのオプションを適用すると、ルールの詳細情報が
表示されるようになる。
<DT><B>-n, --numeric</B>

<DD>
数値での出力。
IP アドレスとポート番号が数値形式で出力される。
デフォルトでは、 ipchains はそれらをホスト名、ネットワーク名、或は
サービス名で(出来るだけ)表示しようと試みる。
<DT><B>-l, --log</B>

<DD>
マッチしたパケットをカーネルのログに記録する。
ルールにこのオプションが設定される時、 Linux カーネルは 
<I>printk()</I>

関数を通じて、マッチしたパケット全ての(多くは IP ヘッダフィールドに関する)
情報を出力する。
<DT><B>-o, --output</B><I> [maxsize]</I>

<DD>
マッチしたパケットをユーザ空間のデバイスへコピーする。
これは現在主にユーザ空間でファイアウォールの効果を使って何かしたい
開発者が使用する。
オプション引数の最大サイズはコピーされるパケットの最大数を制限する
為に使われる。
このオプションはカーネルを CONFIG_IP_FIREWALL_NETLINK を設定して
コンパイルした時のみ有効である。
<DT><B>-m, --mark</B><I> markvalue</I>

<DD>
マッチしたパケットに印を付ける。
パケットには 32 ビットの符号無しの数値で印が付けられ、
その値によって (そのうち) そのパケットが内部で
どのように扱われるかが変更できるようになるだろう。
あなたがカーネルハッカーでなければ、このオプションは気にしなくて良い。
<I>マーク値</I>

が + 或は - から始まる際には、  (ゼロから始まる) 現在のマーク値からその値を
加算或は減算する。
<DT><B>-t, --TOS</B><I> andmask xormask</I>

<DD>
IP ヘッダ内の TOS フィールドを変更する為に使用されるマスク。
パケットがルールにマッチする時、その TOS フィールドは 1 番目のマスク
でビット単位の論理積が行われ、その結果は 2 番目のマスクでビット単位の
排他的論理和が行われる。
マスク値は 16 進の 8 ビット値で指定する。
TOS フィールドの LSB は不変でなければならない (RFC 1349) 。
これを変更しようとすると、拒絶される。
すなわち、 TOS ビットが 1 つ以上設定されているものがこれに該当する。
パケットに複数の TOS ビットを設定しようとすると、(標準出力を通じて)
ワーニングメッセージを出す。
そのような TOS 値を持つパケットが当該ルールに到達することはあり得ないと
わかっているなら、ワーニングメッセージは無視できる。
勿論、 TOS の操作はルールのターゲットが
<I>DENY </I>

或は
<I>REJECT</I>

の場合には無意味である。
<DT><B>-x, --exact</B>

<DD>
番号表示の拡張。
パケット及びバイトカウンタの値を K (1000倍)、 M (1000K倍) 或は
G (1000M倍)で丸めた値でなく、正確な値で表示する。
このオプションは
<B>-L </B>

コマンドでのみ有効である。
<DT><B>[!] -y, --syn</B>

<DD>
TCP パケットの内、SYN ビットがセットされ ACK ビットと FIN ビットがクリア
されたパケットにのみマッチする。
そのようなパケットは、TCP 接続の開始要求に使用される。
例えば、あるインターフェースへ到着するそのようなパケットを遮断すると、
内向きの TCP 接続を防止するが、外向きの TCP 接続は影響を受けない。
このオプションは、プロトコルの種類が TCP に設定されている場合にのみ意味を持つ。
&quot;-y&quot; の前に &quot;!&quot; フラグがあると、このオプションの判定結果が否定される。
【訳注: -y の場合、各々のビットの条件は &quot;SYN=1 and ACK=0 and FIN=0&quot; の
組合せにのみマッチする。
&quot;! -y&quot; はこの否定なので、各ビットの組合せが上記以外の全てのパケットが
マッチする。
すなわち、 &quot;SYN=0 or ACK=1 or FIN=1&quot; という条件になる。
SYN ビットが 0 であれば良いのは言うまでもなく、例えば
&quot;SYN=1 and ACK=1 and FIN=0&quot; という組合せでもマッチする。】
<DT><B>--line-numbers</B>

<DD>
ルールを一覧表示する際、各ルールの先頭にそのルールのチェイン中での
位置に対応する行番号を追加する。
<DT><B>--no-warnings</B>

<DD>
全ての警告を無効にする。
</DL>
<A NAME="lbAJ">&nbsp;</A>
<H2>ファイル</H2>

<I>/proc/net/ip_fwchains</I>

<BR>

<I>/proc/net/ip_masquerade</I>

<A NAME="lbAK">&nbsp;</A>
<H2>返り値</H2>

各種エラーメッセージは標準エラー出力に出力される。
正常動作時の終了コードは 0 である。
無効な、或は誤ったコマンド行パラメータに起因すると思われるエラーは、
終了コード 2 を発生する。
その他のエラーでの終了コードは 1 である。
<A NAME="lbAL">&nbsp;</A>
<H2>バグ</H2>

<P>

ターミナルからの入力により forward チェインへルールが挿入または追加された
ときに IP 転送機能が有効になっていない場合で --no-warnings を
指定していなければ、誤りを修正するまで IP 転送が行われないことを警告する
メッセージが標準出力へ表示される。
これは、(2.0 カーネルには存在しなかった) 必要条件に気付かないユーザを助け
るためのものである。
<P>

パケットカウンタとバイトカウンタを 1 つのチェインの分だけリセットする
方法は無い。これはカーネルの制限である。
<P>

ループの検知は ipchains では行われない。
ループ状態にあるパケットは破棄されログに記録されるが、
うっかりループを作ってしまうことを考慮して、ログから見つけ出すことが
必要である。
<P>

新しい 2.1 カーネルのパケットスケジューリングのルーチンを詳述する文書が
リリースされる迄、パケットのマーキングの効果に関する説明は意図的に
曖昧にしている。
<P>

(組み込み済みチェインの) ポリシーカウンタを 0 にする方法は無い 。
<A NAME="lbAM">&nbsp;</A>
<H2>注意</H2>

<B>ipchains</B>

は、新しい IP ファイアウォールツリーを利用するという点で、Jos Vos 作の
ipfwadm とは大きく異なっている。
ipchains の機能は ipfwadm のスーパーセットであり、コマンドはほぼ 1 対 1 で
対応付けることができる。
新しいコマンド名は、より理に適ったものであると思う。
とはいえ、注意すべき変更点もいくつか存在する。
<P>

フラグメントの扱いが異なる。
従来は、2 番目以降のフラグメントを全て通過させていた (通常、これは安全である)。
現在では、これらをフィルタすることができる。
すなわち、 ipfwadm からルールを変換する際には、フラグメントを許可する
ルールを明示しなければならない。
同様に、送信元及び宛先ポートに 0xFFFF (ICMP では 0xFF) を指定して
チェックする、古い統計 (accounting)ルールを探す必要がある。
これはフラグメントの統計を取る古い方法である。
<P>

統計 (accounting) ルールは、現在は input チェインと output チェインへ
統合されている。
以前の挙動と同じようにするには以下のようにすればよい - 
<BR>

<BR>&nbsp;ipchains&nbsp;-N&nbsp;acctin
<BR>

<BR>&nbsp;ipchains&nbsp;-N&nbsp;acctout
<BR>

<BR>&nbsp;ipchains&nbsp;-N&nbsp;acctio
<BR>

<BR>&nbsp;ipchains&nbsp;-I&nbsp;input&nbsp;-j&nbsp;acctio
<BR>

<BR>&nbsp;ipchains&nbsp;-I&nbsp;input&nbsp;-j&nbsp;acctin
<BR>

<BR>&nbsp;ipchains&nbsp;-I&nbsp;output&nbsp;-j&nbsp;acctio
<BR>

<BR>&nbsp;ipchains&nbsp;-I&nbsp;output&nbsp;-j&nbsp;acctout
<BR>

これは 3 つのユーザ定義チェイン、
<I>acctin</I>,

<I>acctout ,</I>

<I>acctio</I>,

を生成する。
これらはあらゆる統計ルールを含められる。
(これらのルールは
<B>-j </B>

フラグを使わず指定するべきである。
そうすれば、パケットはこれらのチェインを単に無傷のまま通過する。)
<P>

カーネルが
<I>MASQ</I>

ターゲットや
<I>REDIRECT</I>

ターゲットが不適切なところにある (つまり、 forward ルール以外に
MASQ があったり、入力ルール以外に REDIRECT がある等) のを見つけると、syslog
にメッセージを記録し、そのパケットは破棄される。
<P>

SYN 及び ACK に合致する際の古い挙動 (従来、非 TCP パケットに対しては
無視されていた) が変更された。
非 TCP パケット固有のルールに対する SYN オプションは誤りである。
<P>

ACK マッチングオプション (
<B>-k</B>

フラグ) は、もはやサポートされない。
<B>!</B>

と
<B>-y</B>

との組み合わせがこれに相当する)。
<P>

現在では、TOS の最下位ビットを設定・変更する TOS マスクを
明記するのはエラーになる - 
以前の TOS マスクの場合、そのような試みはカーネル内部で黙って
変更されていた。
<P>

現在、
<B>-b</B>

フラグは単に送信元及び宛先の指定を反転させるルールの組合せを
挿入或は削除する為だけになった。
<P>

インターフェースをアドレスで指定する方法は無い。インターフェース名を使うこと。
<A NAME="lbAN">&nbsp;</A>
<H2>関連項目</H2>

ipfw(4)
<A NAME="lbAO">&nbsp;</A>
<H2>著者</H2>

Rusty Russell &lt;<A HREF="mailto:rusty@linuxcare.com">rusty@linuxcare.com</A>&gt;。細かな点まで校正してくれた Hans Persson
にお礼が言いたい。今後私が書く文書は、全部彼に読んでもらいたい!
<A NAME="lbAP">&nbsp;</A>
<H2>翻訳者</H2>

大神 淳 &lt;<A HREF="mailto:ati@ff.iij4u.or.jp">ati@ff.iij4u.or.jp</A>&gt;
<BR>

松田 陽一 &lt;<A HREF="mailto:matsuda@palnet.or.jp">matsuda@palnet.or.jp</A>&gt;
<A NAME="lbAQ">&nbsp;</A>
<H2>日本語版校正</H2>

白方 健太郎 &lt;<A HREF="mailto:argrath@ub32.org">argrath@ub32.org</A>&gt;
<BR>

武井 伸光 &lt;<A HREF="mailto:takei@webmasters.gr.jp">takei@webmasters.gr.jp</A>&gt;
<BR>

元木 顕弘 &lt;<A HREF="mailto:amotoki@dd.iij4u.or.jp">amotoki@dd.iij4u.or.jp</A>&gt;
<BR>

関根 達夫 &lt;<A HREF="mailto:tsekine@isoternet.org">tsekine@isoternet.org</A>&gt;
<P>

<HR>
<A NAME="index">&nbsp;</A><H2>Index</H2>
<DL>
<DT><A HREF="#lbAB">名前</A><DD>
<DT><A HREF="#lbAC">書式</A><DD>
<DT><A HREF="#lbAD">説明</A><DD>
<DT><A HREF="#lbAE">ターゲット</A><DD>
<DT><A HREF="#lbAF">オプション</A><DD>
<DL>
<DT><A HREF="#lbAG">コマンド</A><DD>
<DT><A HREF="#lbAH">引数</A><DD>
<DT><A HREF="#lbAI">その他のオプション</A><DD>
</DL>
<DT><A HREF="#lbAJ">ファイル</A><DD>
<DT><A HREF="#lbAK">返り値</A><DD>
<DT><A HREF="#lbAL">バグ</A><DD>
<DT><A HREF="#lbAM">注意</A><DD>
<DT><A HREF="#lbAN">関連項目</A><DD>
<DT><A HREF="#lbAO">著者</A><DD>
<DT><A HREF="#lbAP">翻訳者</A><DD>
<DT><A HREF="#lbAQ">日本語版校正</A><DD>
</DL>
<HR>
This document was created by
<A HREF="../../man/man1/man2html.1.html">man2html</A>,
using the manual pages.<BR>
Time: 03:33:39 GMT, December 05, 2022
</BODY>
</HTML>
