
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML><HEAD><TITLE>Man page of PTX</TITLE>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=UTF-8">
<LINK REL="stylesheet" TYPE="text/css" HREF="../../../jm.css">
</HEAD>
<BODY>

<H1>PTX</H1>
Section: User Commands  (1)<BR>Updated: 7 October 2002<BR><A HREF="#index">Index</A>
<A HREF="../../../index.html">JM Home Page</A>
<A HREF="../../../manual/gnumaniak/release/man1/ptx.1">roff page</A><HR>

<A NAME="lbAB">&nbsp;</A>
<H2>名前</H2>

ptx - 整列済み索引を作成する
<A NAME="lbAC">&nbsp;</A>
<H2>書式</H2>

<B>ptx</B>

[<I>OPTION...</I>] [<I>FILE...</I>]

<P>
<B>ptx</B>

[<B>-G</B>]

[<B>--traditional</B>]

[<I>OPTION...</I>] [<I>IN-FILE</I> [<I>OUT-FILE</I>]]

<A NAME="lbAD">&nbsp;</A>
<H3>Options:</H3>

[<B>-frAORT</B>]

[<B>-b </B><I>FILE</I>]

[<B>-g </B><I>NUMBER</I>]

[<B>-i </B><I>FILE</I>]

[<B>-o </B><I>FILE</I>]

[<B>-w </B><I>NUMBER</I>]

[<B>-F </B><I>STRING</I>]

[<B>-M </B><I>STRING</I>]

[<B>-S </B><I>REGEXP</I>]

[<B>-W </B><I>REGEXP</I>]

[<B>--auto-reference</B>]

[<B>--break-file=</B><I>FILE</I>]

[<B>--flac-truncation=</B><I>STRING</I>]

[<B>--format=</B>{<B>nroff,tex</B>}]

[<B>--gap-size=</B><I>NUMBER</I>]

[<B>--ignore-case</B>]

[<B>--ignore-file=</B><I>FILE</I>]

[<B>--macro-name=</B><I>STRING</I>]

[<B>--only-file=</B><I>FILE</I>]

[<B>--references</B>]

[<B>--right-side-refs</B>]

[<B>--sentence-regexp=</B><I>REGEXP</I>]

[<B>--word-regexp=</B><I>REGEXP</I>]

[<I>FILE...</I>]

<BR>&nbsp;
<B>ptx</B> [<B>-C</B>] [<B>--copyright</B>]  [<B>--help</B>] [<B>--version</B>]

<A NAME="lbAE">&nbsp;</A>
<H2>説明</H2>

GNU 拡張された
<B>ptx</B>

(デフォルト) は、与えられた
<I>FILE</I>

それぞれの整列済み索引 (permutated index)
を標準出力に書く。
<I>FILE</I>

が一つも与えられないと標準入力から読み込む。また
<I>FILE</I>

が
`<B>-</B>'

だった場合には、そのファイルには標準入力が用いられる。
結果は結合されるが、各
<I>FILE</I>

はそれぞれ独自のコンテクストを持ち、
自動参照を使うときには別々に参照される。
<P>
[訳注: 参照 (reference) とは、キーワードの現れるファイル名と行数の表示。]
<P>
<B>--traditional</B>

モードを使うと、
<B>ptx</B>

は入力を
<I>IN-FILE</I>

から読み、
<I>OUT-FILE</I>

に書く。後者が省略されると標準出力に書く。
<P>
デフォルトの出力フォーマットは、
キーワードをセンターに、そしてコンテクストがあれば左または右に書く。
<B>--traditional</B>

モードでは
<B>--format-nroff</B>

が用いられる。
<A NAME="lbAF">&nbsp;</A>
<H2>オプション</H2>

<DL COMPACT>
<DT><B>-b </B><I>FILE</I><B>, --break-file=</B><I>FILE</I>

<DD>
単語に含むことのできない文字を
<I>FILE</I>

から取得する (このファイルは
<B>break file</B>

と呼ばれる)。
デフォルトのモードでは、
<I>FILE</I>

にある全ての文字が (改行文字も含めて) 考慮される。
過去互換モードでは、空白・タブ・改行の各文字は、常に
<I>FILE</I>

からは捨てられる。
<DT><B>-f, --ignore-case</B>

<DD>
文字列をソートするとき英大文字小文字を無視する。
<DT><B>-g </B><I>NUMBER</I><B>, --gap-size=</B><I>NUMBER</I>

<DD>
フィールド間の空白の最低数を
<I>NUMBER</I>

に設定する (デフォルトは 3)。
<DT><B>-i </B><I>FILE</I><B>, --ignore-file=</B><I>FILE</I>

<DD>
無視するキーワードのリストを
<I>FILE</I>

から取得する (このファイルは
<B>ignore file</B>

と呼ばれる。デフォルトは /usr/local/lib/eign)。
各行には単語を一つだけ指定する。
<B>ignore file</B>

にある単語は
<B>only file</B>

にある単語を上書きする。
<DT><B>-o </B><I>FILE</I><B>, --only-file=</B><I>FILE</I>

<DD>
キーワードのリストを
<I>FILE</I>

から取得する (このファイルは
<B>only file</B>

と呼ばれる)。インデックスを生成するとき、
このリストにない単語は無視する。各行には単語を一つだけ指定する。
<DT><B>-r, --references</B>

<DD>
各行の前にコンテクストを指示する文字列 (行頭の単語) を付ける。
<B>ptx</B>

は参照をコンテクストから削除しようとし、
コンテクストが改行で終わる場合にはこれは常に成功する。
このオプションを
<B>-S</B>

と共に用いたり (これはデフォルト)、
<B>--traditional</B>

モードを用いると、参照は常にコンテクストから削除される。
<DT><B>-w </B><I>NUMBER</I><B>, --width=</B><I>NUMBER</I>

<DD>
出力行を
<I>NUMBER</I>

桁を越えないように切り捨てる。
<B>--right-side-refs</B>

の分は含まれないので注意。これを用いた場合は指定桁を越えることがある。
<DT><B>-A, --auto-reference</B>

<DD>
各行の前にファイル名 (標準入力から読み込んだ場合は空文字列)、
行番号、コロンを出力する。
<B>--references</B>

より優先する。
<DT><B>-F </B><I>STRING</I><B>, --flac-truncation=</B><I>STRING</I>

<DD>
<B>--width</B>

によって行を切り捨てるときや、コンテクストが行区切りを越えて続く場合に
<I>STRING</I>

(デフォルトは `<B>\</B>') を出力する。
<P>
<I>STRING</I>

中では、(C プログラムで使うような)
バックスラッシュを用いたエスケープシーケンスの多くも認識され、
適切な文字に変換される。

<DT><B>-M </B><I>STRING</I><B>, --macro-name=</B><I>STRING</I>

<DD>
nroff や TeX 形式で出力するときに、
<I>STRING</I>

をマクロ名に使う (デフォルトは
`<B>.xx</B>')。

<DT><B>-O, --format=nroff</B>

<DD>
出力を nroff 形式にする。
印字できない文字はスペースに置換され、クォート文字は二重にして
正しく処理できるようにする。各行のフォーマットは以下の通り:
<P>
<PRE>
 .xx &quot;TAIL&quot; &quot;BEFORE&quot; &quot;KEYWORD_AND_AFTER&quot; &quot;HEAD&quot; &quot;REF&quot;
</PRE>

<DT><B>-R, --right-side-refs</B>

<DD>
<B>--references</B>

と似ているが、参照を右に出力する。
<DT><B>-S </B><I>REGEXP</I><B>, --sentence-regexp=</B><I>REGEXP</I>

<DD>
<I>REGEXP</I>

を行末または文末の評価に用いる。
GNU モードで
<B>--references</B>

オプションが指定されていない場合のデフォルトは以下:
<P>
<DL COMPACT><DT><DD>
<DL COMPACT><DT><DD>
<PRE>
[.?!][]\&quot;')}]*\\($\\|\t\\|  \\)[ \t\n]*  
</PRE>

</DL>

<P>
<B>--traditional</B>

モードや、 GNU モードで
<B>--references</B>

オプションが指定されている場合のデフォルトは以下:
<P>
<DL COMPACT><DT><DD>
<PRE>
\n
</PRE>

</DL>

<P>
<B>-F</B>

と同様、バックスラッシュを用いたシーケンスも認識・変換される。
</DL>

<DT><B>-T, --format=tex</B>

<DD>
出力を TeX 形式にする。
印字できない文字はスペースに置換し、
いくつかの特殊文字 (`$', `%', `&amp;', `#', `_' など)
をバックスラッシュでプロテクトする。
バックスラッシュは `\backslash{}' に、
アクセント記号は `^\{ }' に、
チルダは `~\{ }' に置換し、
その他の音韻記号も可能な限り最も適切な TeX シーケンスに変換する。
各行のフォーマットは以下の通り:
<P>
<DL COMPACT><DT><DD>
<DL COMPACT><DT><DD>
<PRE>
\xx {TAIL}{BEFORE}{KEYWORD}{AFTER}{HEAD}{REF}
</PRE>

</DL>

</DL>

<DT><B>-W </B><I>REGEXP</I><B>, --word-regexp=</B><I>REGEXP</I>

<DD>
<I>REGEXP</I>

にマッチする単語をキーワードにする。
<B>--break-file</B>

に指定されている単語も出力する。 GNU モードでのデフォルトは:
<P>
<DL COMPACT><DT><DD>
<DL COMPACT><DT><DD>
<PRE>
<B>\w+</B>
</PRE>

</DL>

<P>
<B>--traditional</B>

モードでのデフォルトは
<P>
<PRE>
<DL COMPACT><DT><DD><B>[^ \t\n]+</B>
</PRE>

</DL>

<P>
<I>REGEXP</I>

が空の場合はデフォルトを用いる。
<B>-F</B>

と同じく、バックスラッシュを用いたシーケンスも認識・変換される。
</DL>

<DT><B>-C, --copyright</B>

<DD>
標準出力に短い copyright メッセージを出力して正常終了する。
<DT><B>--help</B>

<DD>
標準出力に使用方法のメッセージを出力して正常終了する。
<DT><B>--version</B>

<DD>
標準出力にバージョン情報を出力して正常終了する。
</DL>
<A NAME="lbAG">&nbsp;</A>
<H2>例</H2>

分量が多くなるので、完全な例はここには示していない。
<A NAME="lbAH">&nbsp;</A>
<H3>プレインテキスト</H3>

<P>
<B>ptx</B>

の著者である Francois Pinard は、私の出したメールを
<B>ptx</B>

に通し、以下の返事を送ってくれた
(*** は man ページに収めるために手で行った切り捨てを示す)。
<P>
<PRE>
&gt;&gt;    /I've had a look at the source,   and I still   ***
&gt;&gt;    /or what is a permutated index,   and what it   ***

&gt; ptx merely produces a sorted list of the vocabulary you
&gt; used, with some context for each, so I can study your
&gt; writing style, for example.  Whenever you use the word 
&gt; &quot;and&quot;, it is preceded by a comma :-). 

[ptx は君の使ったボキャブラリをソートしてリストを作り、
 前後のコンテクストと共に示してくれるんだ。これを見ると、
 例えば君の書き方のクセがわかるわけさ。君が &quot;and&quot; って
 いう単語を使う前には必ずコンマを入れる、とかね :-)]
</PRE>

<A NAME="lbAI">&nbsp;</A>
<H3>bang パス</H3>

news へのポストや email メッセージに対して grep を行い、
bang パスを取得してみよう。例えば:
<P>
<DL COMPACT><DT><DD>
<PRE>
lightside~% grep posts &quot;^Path: &quot; |cut -b 7- &gt; paths.txt
</PRE>

</DL>

<P>
すると paths.txt の内容は以下のようになるだろう。
<P>
<DL COMPACT><DT><DD>
<PRE>
lightside!host2!host3!host4!host5!news
lightside!host2!host3!host4!host6!news
lightside!host7!host8!host9|host10|host4|host5!news
lightside!host4!host5!news
lightside!host11!news
</PRE>

</DL>

<P>
これに正規表現を正しくエスケープして
<B>ptx</B>

を用いてみよう。
<P>
<DL COMPACT><DT><DD>
<PRE>
lightside~% ptx --sentence-regexp=&quot;\n&quot; \
                --word-regexp=&quot;[^\!]+.&quot;
</PRE>

</DL>

<P>
するとポストの経路の解析に適した出力が生成されるだろう。
行数が、ここに示した 5 行よりもずっと多くなると、とても便利になるだろう。
<A NAME="lbAJ">&nbsp;</A>
<H2>移植性</H2>

<B>--traditional</B>

を指定すると、
System V の
<B>ptx</B>

と互換になる。 GNU
<B>ptx</B>

は行幅をよりうまく使えるのだが、この点も
System V の出力に時々現れる異常をまねしようと試みる。

<B>--traditioanl</B>

モードとの他の相違点は以下の通り:
<DL COMPACT><DT><DD>
<P>
<B>&bull;</B>&nbsp;<B>説明</B> にあるように、引数の取り方が変わる。
<P>
<B>&bull;</B>&nbsp;指定できるオプションが
<B>-b</B>, <B>-f</B>, <B>-g</B>, <B>-i</B>, <B>-o</B>, -r<B>, </B>-t<B>, </B>-w

だけになる。
<P>
<B>&bull;</B>&nbsp;デフォルトの出力形式が
<B>--format=nroff</B>

になる。
<P>
<B>&bull;</B>&nbsp;<B>--width</B> で行切り捨てを行うとき、参照の幅を考慮しなくなる。
<P>
<B>&bull;</B>&nbsp;8 ビット文字とチルダ (`<B>~</B>') をはねる。
いくつかの制御文字もはねる。
<P>
<B>&bull;</B>&nbsp;入力行の 200 文字以降を黙って切り捨てる。
<P>
<B>&bull;</B>&nbsp;<B>ignore file</B> と <B>only file</B> の両方を同時に指定できない。
<P>
<B>&bull;</B>&nbsp;<B>オプション</B>に記述したように、
いくつかのオプションのデフォルトが変わる。
</DL>

<A NAME="lbAK">&nbsp;</A>
<H2>注意</H2>

プログラムのバグについては <A HREF="mailto:bug-textutils@gnu.org">bug-textutils@gnu.org</A> に報告してください。
<BR>

man ページは Ragnar Hojland Espinosa &lt;<A HREF="mailto:ragnar@ragnar-hojland.com">ragnar@ragnar-hojland.com</A>&gt; が作成しました。
<P>

<HR>
<A NAME="index">&nbsp;</A><H2>Index</H2>
<DL>
<DT><A HREF="#lbAB">名前</A><DD>
<DT><A HREF="#lbAC">書式</A><DD>
<DL>
<DT><A HREF="#lbAD">Options:</A><DD>
</DL>
<DT><A HREF="#lbAE">説明</A><DD>
<DT><A HREF="#lbAF">オプション</A><DD>
<DT><A HREF="#lbAG">例</A><DD>
<DL>
<DT><A HREF="#lbAH">プレインテキスト</A><DD>
<DT><A HREF="#lbAI">bang パス</A><DD>
</DL>
<DT><A HREF="#lbAJ">移植性</A><DD>
<DT><A HREF="#lbAK">注意</A><DD>
</DL>
<HR>
This document was created by
<A HREF="../../man/man1/man2html.1.html">man2html</A>,
using the manual pages.<BR>
Time: 03:33:38 GMT, December 05, 2022
</BODY>
</HTML>
