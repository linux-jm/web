
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML><HEAD><TITLE>Man page of SORT</TITLE>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=UTF-8">
<LINK REL="stylesheet" TYPE="text/css" HREF="../../../jm.css">
</HEAD>
<BODY>

<H1>SORT</H1>
Section: User Commands  (1)<BR>Updated: 7 October 2002<BR><A HREF="#index">Index</A>
<A HREF="../../../index.html">JM Home Page</A>
<A HREF="../../../manual/gnumaniak/release/man1/sort.1">roff page</A><HR>

<A NAME="lbAB">&nbsp;</A>
<H2>名前</H2>

sort - テキストファイルをソートする
<A NAME="lbAC">&nbsp;</A>
<H2>書式</H2>

<B>sort</B>

[<B>-cm</B>]

[<B>-bdfginruzM</B>]

[<B>+</B><I>POS1</I>[<B>-</B><I>POS2</I>]

[<B>-o </B><I>OUTFILE</I>]

[<B>-t </B><I>SEPARATOR</I>]

[<B>-k </B><I>POS1</I>[<B>,</B><I>POS2</I>]

[<B>-K </B><I>POS1</I>[<B>,</B><I>POS2</I>]

[<B>-S </B><I>SIZE</I>]

[<B>-T </B><I>TEMPDIR</I>]

[<B>--reverse</B>]

[<I>FILE...</I>]

<P>
<B>sort</B> [<B>--help</B>] [<B>--version</B>]

<A NAME="lbAD">&nbsp;</A>
<H2>説明</H2>

<B>sort</B>

は与えられた各
<I>FILE</I>

をソート・マージ・比較する。結果は結合されて標準出力に書き出される。
<I>FILE</I>

が一つも与えられないと標準入力から読み込む。また
<I>FILE</I>

が
`<B>-</B>'

だった場合には、そのファイルには標準入力が用いられる。
<P>
GNU
<B>sort</B>

は (他の GNU ユーティリティと同じく)
入力ファイルの行の長さや、行あたりのバイト数に制限はない。
また入力ファイルの最後が改行でなければ、
<B>sort</B>

は黙って改行を一つ追加する。
<P>
エラーが起こると、
<B>sort</B>

はステータス 2 で終了する。
<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
環境変数
<B>TMPDIR</B>

が設定されていると、
<B>sort</B>

は一時ファイルの置き場所として、デフォルトの /tmp の代わりにそのディレ
クトリを用いる。オプション
<B>-T</B><I> TEMPDIR</I>

でも一時ファイルを置くディレクトリを指定できる。
オプションは環境変数より優先される。
<P>
<B>-k</B> や <B>+</B>

オプションでのソートフィールドの場所指定は、
<I>F</I><B>.</B><I>C</I>

という形式で行う。ここで <I>F</I> は用いるフィールドの番号で、
<I>C</I> は先頭の文字の番号を、そのフィールドの先頭 (<B>+</B><I>POS</I> の場合)
あるいは直前のフィールドの末尾 (<B>-</B><I>POS</I> の場合) から数えた数字である。
<B>.</B><I>C</I> が省略された場合は、フィールドの先頭文字になる。
<B>-b</B>

オプションが指定されると、フィールド指定の <B>.</B><I>C</I> の部分は、
そのフィールドの空白でない最初の文字 (<B>+</B><I>POS</I> の場合)
あるいは直前のフィールドの末尾以降の空白でない最初の文字
(<B>-</B><I>POS</I> の場合) から数えられる。
<P>
ソートキーのオプションには、
出力順序オプション (output ordering option) を含めることもでき、
その場合はグローバルな順序オプションはそのフィールドには用いられない。
<B>-b</B>

オプションはフィールド指定の <B>+</B><I>POS</I> と <B>-</B><I>POS</I> の
どちらか片方にも、あるいは両方にも、独立に効力を及ぼすことができる。
<B>-b</B>

がグローバルなオプションから継承されたものである場合は、
両方に影響する。キーは複数のフィールドにまたがってもかまわない。
<P>
<A NAME="lbAE">&nbsp;</A>
<H2>オプション</H2>

<A NAME="lbAF">&nbsp;</A>
<H3>動作モード</H3>

<B>sort</B>

のデフォルトの動作はソート動作である。
これは以下のオプションによって変更できる。
<DL COMPACT>
<DT><B>-c</B>

<DD>
与えられたファイルがすでにソートされているかどうかをチェックする。
ソートされていないものがあった場合は、
エラーメッセージを表示してステータス 1 で終了する。
それ以外の場合は正常終了する。
<DT><B>-m</B>

<DD>
与えられたファイル群をまとめてソートしてマージする。
入力ファイルは事前にそれぞれソートされていなければならない。
マージ動作ではなく、ソート動作を複数ファイルにまとめて行うこともできる。
マージ動作が提供されているのは、
(これでよい場合は) こちらの方が高速だからである。
</DL>
<P>

行のペアは以下のように比較される。
キーフィールドが指定されている場合は、
<B>sort</B>

は順序オプションによって
コマンドラインから指定された順に、
それぞれの行からの各フィールドを比較する。
比較動作は違いを発見するか全てのフィールドを尽くすまで継続される。
<P>
グローバルオプションの `<B>-bdfinrM</B>' のいずれかが指定されており、
キーフィールドが一つも指定されていない場合は、
<B>sort</B>

は行全体をグローバルオプションに従って比較する。
<P>
最後に、全てのキーが等しい (あるいは順序オプションが
まったく指定されなかった) 場合には、
<B>sort</B>

は最終手段として、行を <B>LC_COLLATE</B> ではなくマシンの
照合順序にしたがって 1 バイトずつ比較する。
この最終手段の比較は
<B>-r</B>

オプションに従う。
<B>-s</B>

オプション (stable オプション) は、この最終手段比較を無効にし、
全てのフィールドの比較結果が同じだった行の順序を、入力の順序のままにする。
フィールドやグローバルオプションがまったく指定されなかった場合は、
<B>-s</B>

オプションは無視される。
<A NAME="lbAG">&nbsp;</A>
<H3>出力順序オプション</H3>

以下のオプションは、
<B>sort</B>

が行を出力する順序に影響する。これらはグローバルにも、
あるいは特定のキーフィールドの一部としても指定できる。
キーフィールドが指定されなければ、
グローバルオプションで行全体が比較される。
キーフィールド指定がされた場合、
順序オプションが特に指定されなかったフィールドには、
グローバルオプションが継承される。
<DL COMPACT>
<DT><B>-b</B>

<DD>
各行の比較の際に、行頭の空白を無視する。
<DT><B>-d</B>

<DD>
「電話帳」順でソートする。
アルファベット、数字、空白以外のキャラクタをすべて無視してソートする。
<DT><B>-f</B>

<DD>
ソートの際に、小文字を対応する大文字と同じに扱う。
例えば `b' は `B' と同じとみなされる。
<DT><B>-g</B>

<DD>
<B><A HREF="../../LDP_man-pages/man3/strtod.3.html">strtod</A></B>(3)

を用いて数値に変換した後、その数値順にソートする。
これを用いると、浮動小数点の理工学的な記法 (`1.0e-34' や `10e100' など)
を扱うことができる。このオプションは、他に手段がない場合に限って用いること。
これは
<B>-n</B>

よりずっと遅いし、有効桁数が多すぎると、
丸めたかたちで比較されてしまう。
さらに、倍精度浮動小数点の範囲で扱えない数値は
0 であるかのように処理される。
またオーバーフロー・アンダーフロー・変換エラーは報告されない。
<DT><B>-i</B>

<DD>
印字可能でない文字を無視する。


<DT><B>-n</B>

<DD>
数値順に評価する。行先頭の文字列
(空白が前置されていても良い) を数値文字列として比較する。
数値文字列は、先頭の - 符号 (なくても良い)、 0 桁以上の数字、
そして小数点と 0 桁以上の数字 (なくても良い) からなる。
<P>
<B>sort</B>

は浮動小数点表記文字列を、あまり普通でない方法で比較する。
まず各文字を C の <B>double</B> 方に変換してからそれらの値を比較するのではなく、
2つの文字の基数点 (radix point) を揃えて、1 文字づつ比較するのである。
この方法の利点は速度である。実際この方法は、
2つのそれぞれの文字列を double に変換してから比較するよりずっと速い
(あるいは integer 変換に比べてすらずっと速い)。
また精度の問題も生じない。多くのシステムでは、
文字列を double に変換してから比較する方法では、
精度は 16 桁に制限されてしまう。
<BR>&nbsp;&nbsp;
先頭の `+' や指数表記は認識できない。
このような文字列を数値的に比較するには
<B>-g</B>

を用いること。
<DT><B>-r, --reverse</B>

<DD>
比較の結果を逆順にする。より大きなキー値を持つ行が、
より早く現われるようになる。
<DT><B>-M</B>

<DD>
行頭の空白文字をすべて無視して最初に現われた 3 文字を、
月の名称の省略形とみなして `JAN' &lt; `FEB' &lt; ... &lt; `DEC' の順でソートする。
小文字は大文字と同じに扱われる。
月の名称にない文字列は、より低位であるとみなされる。
</DL>
<A NAME="lbAH">&nbsp;</A>
<H3>その他のオプション</H3>

<DL COMPACT>
<DT><B>+</B><I>POS1</I>[<B>-</B><I>POS2</I>]

<DD>
ソートフィールド指定の obosolete な古い形式。行の
<I>POS1</I> から <I>POS2</I>

の直前までのフィールドを指定する。
<I>POS2</I> は<B>含まない</B>。
<I>POS2</I> が省略されたら行末まで。
フィールドと文字位置はそれぞれ 0 から数えはじめる。
<DT><B>-k </B><I>POS1</I>[<B>,</B><I>POS2</I>]

<DD>
<B>-K </B><I>POS1</I>[<B>,</B><I>POS2</I>]

ソートフィールド指定の POSIX 形式。今後はこちらが推奨される。行の
<I>POS1</I> から <I>POS2</I>

までのフィールドを指定する。
<I>POS2</I> を<B>含む</B>。
<I>POS2</I> が省略されたら行末まで。
フィールドと文字位置はそれぞれ 0 から数えはじめる。
<DT><B>-o </B><I>OUTFILE</I>

<DD>
出力先を標準出力から
<I>OUTFILE</I>

に変更する。
<I>OUTFILE</I>

が入力ファイルのどれかひとつだった場合、
<B>sort</B>

はその入力ファイルを一時ファイルにコピーしてから、ソートと
<I>OUTFILE</I>

への出力を行う。
<DT><B>-t </B><I>SEPARATOR</I>

<DD>
各行からソートキーを検索する際、文字
<I>SEPARATOR</I>

をフィールドのセパレーターにする。
デフォルトでは、
フィールドは空白以外の文字と空白文字の間の空文字列
(empty string) によって分離される。
例えば入力行として ` foo bar' が与えられた場合、
<B>sort</B>

はこの行をフィールド ` foo' と ` bar' に分離する。
フィールドセパレーターは、
その前後のフィールドには含まれないものとされる。
<DT><B>-u</B>

<DD>
デフォルトの動作と
<I>-m</I>

オプションの動作では、等しいとされた行のうちの最初のものだけを表示する。
<I>-c</I>

オプションの動作では、
連続した行で等しいものがないかどうかをチェックする。
<DT><B>-z</B>

<DD>
入力における行の末尾が、&lt;LF&gt; (ラインフィード) ではなく
&lt;NUL&gt; (ゼロバイト文字) で終了するとみなす。
このオプションは `perl -0' や `find -print0'
や `xargs -0' などと組み合わせて使うと便利で、
これらは任意のパス名を扱う際に信頼性を上げる効果を持つ
(ラインフィード文字が含まれるパス名も正しく扱える)。
<DT><B>-S </B><I>SIZE</I><B></B>

<DD>
<I>SIZE</I><B> KB のバッファを使う。
単位指定文字 (後述) を用いれば、単位を変更できる。
<DT>-T </B><I>TEMPDIR</I>

<DD>
<I>TEMPDIR</I>

を一時ファイルを置くディレクトリにする。
このオプションは環境変数
<B>TMPDIR</B>

より優先される。<B>-T</B> オプションが複数回指定されると、
それぞれのディレクトリが用いられ、
巨大なソートやマージの際には性能が上がるかもしれない。
<DT><B>--help</B>

<DD>
標準出力に使用方法のメッセージを出力して正常終了する。
<DT><B>--version</B>

<DD>
標準出力にバージョン情報を出力して正常終了する。
</DL>
<A NAME="lbAI">&nbsp;</A>
<H2>例</H2>

<B>&bull;</B> 数値的に降順 (逆順) にソートする。
<P>
<DL COMPACT><DT><DD>
<PRE>
sort -nr
</PRE>

</DL>

<P>
<B>&bull;</B> アルファベット順にソートし、第 1・第 2 フィールドは無視する。
キーに開始フィールドとなる 3 だけを指定すれば、各行末までが比較される。

<P>
<DL COMPACT><DT><DD>
<PRE>
sort -k3
</PRE>

</DL>

<P>
<B>&bull;</B> 第 2 フィールドで数値的にソートし、
同じになったものを第 5 フィールドの第 3〜第 4 文字で更にソートする。
フィールドの区切りとして `:' を用いる。
<P>
<DL COMPACT><DT><DD>
<PRE>
sort -t : -k 2,2n -k 5.3,5.4
</PRE>

</DL>

<P>
`-k 2,2' の代わりに `-k 2' と指定すると、
<B>sort</B>

は第 2 フィールドから行末までの全ての文字を、
プライマリな「数値」キーとして扱ってしまう。
通常の用途では、1 つ以上のフィールドにまたがったキーを
数値的に扱うと、望む結果は得られないだろう。
<P>
`n' の指定が最初のキーの末尾で行われている点にも注意してほしい。
これは `-k 2n,2' や `-k 2n,2n' としても効果は同じである。
`b' 以外の全てのオプション指定は、開始フィールドに置いても
キー指定全体の末尾に置いても、指定全体に効果を及ぼす。
<P>
<B>&bull;</B> パスワードファイルを第 5 フィールドでソートし、
先頭の空白文字は無視する。第 5 フィールドが同じ値を持つ行は、
第 3 フィールドのユーザー ID で数値的にソートする。
<P>
<DL COMPACT><DT><DD>
<PRE>
sort -t : -k 5b,5 -k 3,3n /etc/passwd
</PRE>

</DL>

<P>
数値比較オプション <B>-n</B> はグローバルに用いても結果は同じ。
<P>
<DL COMPACT><DT><DD>
<PRE>
sort -t : -n -k 5b,5 -k 3,3 /etc/passwd
</PRE>

</DL>

<P>
<B>&bull;</B> 英大文字小文字の違いを無視してソートされた tags ファイルを生成する。
<P>
<DL COMPACT><DT><DD>
<PRE>
find src -type f -print0 | sort -t / -z -f |
xargs -0 etags --append
</PRE>

</DL>

<P>
この `-print0', `-z', `-0' は、改行 (line feed) 文字を含む
パス名がソート操作によって壊れないようにするためのものである。
<P>
<B>&bull;</B> 最後の例。フィールドの先頭・末尾の空白群を無視するには、
第 1 キーの末尾フィールド指定もして、 `b' オプションを使えばよい。
<P>
<DL COMPACT><DT><DD>
<PRE>
sort -t : -n -k 5b,5b -k 3,3 /etc/passwd
</PRE>

</DL>

<P>
あるいはグローバルな指定を <B>-n</B> の代わりに <B>-b</B>
にして、第 2 キーのオプションに `n' を追加するかたちでもよい。
<P>
<DL COMPACT><DT><DD>
<PRE>
sort -t : -b -k 5,5 -k 3,3n /etc/passwd
</PRE>

</DL>

<A NAME="lbAJ">&nbsp;</A>
<H2>乗数</H2>

数値の後には、倍数を指定するサイズ指定文字と、
通常のバイトを意味する <B>B</B> または
10 進の「商業用」バイトを意味する <B>D</B> を
続けて置くことができる。
たとえば `1KB' は `1024' と等しく、`1KD' は `1000' と等しい。
この例外は <B>b</B> (512 バイト)、<B>c</B> (1 バイト)、
<B>w</B> (使うべきでない - System V では 2 を意味し、
4.2BSD では 4 を意味する) の 3 つで、
これらの後に <B>B</B> や <B>D</B> をおくことはできない。
<P>
<DL COMPACT>
<DT><B>k</B>

<DD>
キロ: 通常バイト指定なら 2^10 = 1024、10 進バイト指定なら 10^3 = 1000
<DT><B>M</B>

<DD>
メガ: 2^20 = 1,048,576 または 10^6 = 1,000,000
<DT><B>G</B>

<DD>
ギガ: 2^30 = 1,073,741,824 または 10^9 = 1,000,000,000
<DT><B>T</B>

<DD>
テラ: 2^40 = 1,099,511,627,776 または 10^12 = 1,000,000,000,000
<DT><B>P</B>

<DD>
ペタ: 2^50 = 1,125,899,906,842,624 
または 10^15 = 1,000,000,000,000,000
<DT><B>E</B>

<DD>
エクサ: 2^60 = 1,152,921,504,606,846,976 
または 10^18 = 1,000,000,000,000,000,000
<DT><B>Z</B>

<DD>
ゼタ: 2^70 = 1,180,591,620,717,411,303,424
または 10^21 = 1,000,000,000,000,000,000,000
<DT><B>Y</B>

<DD>
ヨタ: 2^80 = 1,208,925,819,614,629,174,706,176 
または 10^24 = 1,000,000,000,000,000,000,000,000
</DL>
<A NAME="lbAK">&nbsp;</A>
<H2>移植性</H2>

<B>sort</B>

の歴史的な (BSD と System V の) 実装では、
いくつかのオプション (特に
<B>-b</B>, <B>-f</B>, <B>-n</B>)

の解釈が異なる。 POSIX に従えば、<B>-n</B> はもはや
<B>-b</B> を暗黙のうちに指定することはない。
このあたりを首尾一貫させるため、 <B>-M</B> も同様に変更されている。
これによって、曖昧な指定では
フィールド内の文字位置の指定の意味が変わってしまうかもしれない。
唯一の解決法は、 <B>-b</B> を明示的に指定することである。
<A NAME="lbAL">&nbsp;</A>
<H2>ロケール</H2>

<DL COMPACT>
<DT><B>LC_COLLATE</B>

<DD>
(特に他の指定がない限り) 全ての比較で用いられる
文字の照合順序を指定する。
<DT><B>LC_CTYPE</B>

<DD>
<B>-b</B>, <B>-d</B>, <B>-f</B>, -i

といった出力順序オプションの動作に影響する。
<DT><B>LC_NUMERIC</B>

<DD>
基数文字と桁区切り文字 (, など) を指定する。
<DT><B>LC_TIME</B>

<DD>
月名のスペルを決める。 <B>-M</B> に影響する。
</DL>
<A NAME="lbAM">&nbsp;</A>
<H2>注意</H2>

プログラムのバグについては <A HREF="mailto:bug-textutils@gnu.org">bug-textutils@gnu.org</A> に報告してください。
<BR>

man ページは Ragnar Hojland Espinosa &lt;<A HREF="mailto:ragnar@ragnar-hojland.net">ragnar@ragnar-hojland.net</A>&gt;
が作成しました。
<P>

<HR>
<A NAME="index">&nbsp;</A><H2>Index</H2>
<DL>
<DT><A HREF="#lbAB">名前</A><DD>
<DT><A HREF="#lbAC">書式</A><DD>
<DT><A HREF="#lbAD">説明</A><DD>
<DT><A HREF="#lbAE">オプション</A><DD>
<DL>
<DT><A HREF="#lbAF">動作モード</A><DD>
<DT><A HREF="#lbAG">出力順序オプション</A><DD>
<DT><A HREF="#lbAH">その他のオプション</A><DD>
</DL>
<DT><A HREF="#lbAI">例</A><DD>
<DT><A HREF="#lbAJ">乗数</A><DD>
<DT><A HREF="#lbAK">移植性</A><DD>
<DT><A HREF="#lbAL">ロケール</A><DD>
<DT><A HREF="#lbAM">注意</A><DD>
</DL>
<HR>
This document was created by
<A HREF="../../man/man1/man2html.1.html">man2html</A>,
using the manual pages.<BR>
Time: 03:33:38 GMT, December 05, 2022
</BODY>
</HTML>
