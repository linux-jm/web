
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML><HEAD><TITLE>Man page of FTPD</TITLE>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=UTF-8">
<LINK REL="stylesheet" TYPE="text/css" HREF="../../../jm.css">
</HEAD>
<BODY>

<H1>FTPD</H1>
Section: Maintenance Commands (8)<BR>Updated: Jan 10, 1997<BR><A HREF="#index">Index</A>
<A HREF="../../../index.html">JM Home Page</A>
<A HREF="../../../manual/wu-ftpd/release/man8/ftpd.8">roff page</A><HR>


<A NAME="lbAB">&nbsp;</A>
<H2>名前</H2>

ftpd - インターネットファイル転送プロトコルサーバ
<A NAME="lbAC">&nbsp;</A>
<H2>書式</H2>

<B>ftpd</B>

[
<B>-d</B>

] [
<B>-v</B>

] [
<B>-l</B>

] [
<B>-t</B>

timeout
] [
<B>-T</B>

maxtimeout
] [
<B>-a</B>

] [
<B>-A</B>

] [
<B>-L</B>

] [
<B>-i</B>

] [
<B>-I</B>

] [
<B>-o</B>

] [
<B>-p</B>

ctrlport
] [
<B>-P</B>

dataport
] [
<B>-q</B>

] [
<B>-Q</B>

] [
<B>-r</B>

rootdir
] [
<B>-s</B>

] [
<B>-S</B>

] [
<B>-u</B>

umask
] [
<B>-V</B>

] [
<B>-w</B>

] [
<B>-W</B>

] [
<B>-X</B>

]
<A NAME="lbAD">&nbsp;</A>
<H2>説明</H2>

<I>ftpd</I>

はインターネットファイル転送プロトコルサーバプロセスである。
サーバはTCP プロトコルを使用し、``ftp'' サービス仕様書
で指定されたポートの接続を待つ。
<I><A HREF="../../LDP_man-pages/man5/services.5.html">services</A></I>(5)

を参照。
<P>

<B>-V</B>

オプションは著作権とバージョン情報を出力し、終了する。
<P>

<B>-d</B>

もしくは
<B>-v</B>

オプションを指定した場合、
syslog にデバッグ情報を記述する。
<P>

<B>-l</B>

オプションを指定した場合、
各々の ftp セションが syslog に記録される。
<P>

ftp サーバは接続してから 15 分後に動作していないセションをタイムアウトにする。
<B>-t</B>

オプションを指定した場合、
動作していない時のタイムアウト期間を
<I>timeout</I>

秒で設定する。
クライアントは違うタイムアウト期間をも要求することができる。
最大期間は
<B>-t</B>

オプションで指定した場合、
<I>timeout</I>

秒を設定することを許可する。
デフォルト制限は 2 時間である。
<P>

<B>-a</B>

オプションが指定された場合、
<I>ftpaccess</I>(5)

の設定ファイルの使用が可能である。
<P>

<B>-A</B>

オプションが指定された場合、
<I>ftpaccess</I>(5)

の設定ファイルの使用は不可能である。
これはデフォルトである。
<P>

<B>-L</B>

オプションが指定された場合、
<I><A HREF="../man8/ftpd.8.html">ftpd</A></I>(8)

サーバに送信されたコマンドは syslog に記録される。
<B>-L</B>

オプションは
<I>ftpaccess</I>(5)

ファイルの設定より優先される。
<B>-L</B>

フラグが使用されると、ftp サーバが起動すると同時に
コマンドのログへの記録はデフォルトの設定になる。
これはすべてのユーザコマンドを記録し、
ユーザが偶然にもコマンドにユーザ名の
かわりにパスワードを入力した場合、
syslog を経由してパスワードが記録される。
<P>

<B>-i</B>

オプションが指定された場合、
<I><A HREF="../man8/ftpd.8.html">ftpd</A></I>(8)

サーバにより受信したファイルを
<I><A HREF="../man5/xferlog.5.html">xferlog</A></I>(5)

に記録する。
<B>-i</B>

オプションは
<I>ftpaccess</I>(5)

ファイルの使用よりも優先する。
<P>

<B>-I</B>

オプションはクライアントのユーザ名を決定しようとするための
RFC931 (AUTH/ident) の使用を無効にする。
<P>

<B>-o</B>

オプションが指定された場合、
<I><A HREF="../man8/ftpd.8.html">ftpd</A></I>(8)

サーバが送信したファイルは
<I><A HREF="../man5/xferlog.5.html">xferlog</A></I>(5)

に記録される。
<B>-o</B>

オプションは
<I>ftpaccess</I>(5)

ファイルの使用より優先させる。
<B>-X</B>

オプションが指定された場合、
<B>-i</B>

及び
<B>-o</B>

オプションで作成された出力は
xferlog ではなく、syslog を経由して記録される、
そこで、いくつかのホストからの出力をひとつの中央ログホストに
集約することができる。
<P>

<B>-u</B>

オプションが指定された場合、デフォルト umask は
<I>umask</I>

に設定される。
<P>

<B>-W</B>

オプションが指定された場合、ユーザのログインが
wtmp ファイルに記録されなくなる。デフォルト

はすべてのログインとログアウトを記録する。
<P>

<B>-s</B>

及び
<B>-S</B>

オプションはスタンドアローンオペレーションモードで
デーモンを位置付ける。
<B>-S</B>

オプションはバックグラウンドでデーモンを実行し、
システムの初期化中 (例 rc.local) の起動スクリプトで役立つ。
<B>-s</B>

オプションはデーモンをフォアグラウンドに出して
init から実行させる時に役立つ。(例、/etc/inittab)
<P>

<B>-p</B>

及び
<B>-P</B>

オプションはデーモンが使用するポート番号を受け付ける。
通常、デーモンは /etc/services から &quot;ftp&quot; と &quot;ftp-data&quot; を探すことにより
ポート番号を決定する。
もし &quot;ftp-data&quot; が /etc/services になくて、
<B>-P</B>

オプションが指定されなかった場合、
デーモンは制御接続ポートのちょうど前のポートを使用する。
<B>-p</B>

オプションはデーモンをスタンドアローンとして実行する場合のみ
使用可能である。
<P>

<B>-q</B>

及び
<B>-Q</B>

オプションはデーモンが PID ファイルを使用するかどうかを決定する。
これらのファイルはそれぞれのアクセスクラスで現在のユーザの数を
決定するための指示的な制限により要求される。
PID ファイルの使用を無効にすると、ユーザ制限が無効になる。デフォルトは
<B>(-q)</B>

PID ファイルを使用する。
アクセス許可が PID の使用を妨げるときに一般ユーザとしてサーバでテストする時に
<B>-Q</B>

を指定する。同時ユーザ数の制限を強いられるのを望まない、大きく、
ビジーなサイトをも PID ファイルを無効にすることを検討可能である。
<B>-r</B>

オプションはデーモンに対し指定されたルートディレクトリへロードされると
すぐに <A HREF="../../LDP_man-pages/man2/chroot.2.html">chroot</A>(2) するように指示する。
これはデーモンを経由して不正進入された場合、破壊される可能性のあるファイルを制限することにより
システムのセキュリティを向上させる。設定は anonymous FTP とほぼ同様に、
システムにより異なる、必要とされる追加ファイルがある。
<P>

ftp サーバは現在次の ftp 要求をサポートしている。
大文字と小文字の区別はしない。
<P>

<PRE>

<B>リクエスト        説明</B>
ABOR                   前のコマンドを中止する
ACCT                   アカウントを指定する (無視される)
ALLO                   ストレージを割り当てる (意味はない)
APPE                   ファイルに追加する
CDUP                   現在の作業ディレクトリの親に変更する
CWD                    作業ディレクトリを変更する
DELE                   ファイルを削除する
HELP                   ヘルプ情報を送出する
LIST                   ディレクトリ内のファイルのリストを送出する (``ls -lgA'')
MKD                    ディレクトリを作成する
MDTM                   ファイルの最終更新時間を表示する
MODE                   データの転送 <I>mode</I> を指定する
NLST                   ディレクトリ内のファイルリスト名を送出する 
NOOP                   なにもしない
PASS                   パスワードを指定する
PASV                   サーバ - サーバの転送を準備する 
PORT                   指定したデータの接続ポート
PWD                    現在の作業ディレクトリを出力する
QUIT                   セションを終了する
REST                   未完了の転送を再度開始する
RETR                   ファイルを取得する
RMD                    ディレクトリを削除する
RNFR                   リネームされるファイル名を指定する
RNTO                   リネームするファイル名を指定する
SITE                   非標準コマンド (次節を参照)
SIZE                   ファイルサイズを返す
STAT                   サーバの状態を返す
STOR                   ファイルを蓄積する
STOU                   一意名でファイルを蓄積する
STRU                   データ転送の <I>structure</I> を指定する
SYST                   サーバシステムのオペレーションシステムの種類を表示する
TYPE                   データ転送の <I>type</I> を指定する
USER                   ユーザ名を指定する
XCUP                   現在の作業ディレクトリの親に変更する (重要ではない)
XCWD                   作業ディレクトリを変更する (重要ではない)
XMKD                   ディレクトリを作成する (重要ではない)
XPWD                   現在の作業の作業ディレクトリを表示する (重要ではない)
XRMD                   ディレクトリを削除する (重要ではない)
</PRE>

<P>

次の標準ではない、もしくは UNIX 独自のコマンドが SITE 要求により
サポートされている。
<P>

<PRE>

<B>リクエスト        説明</B>
UMASK                  umask を変更する。<I>例</I> SITE UMASK 002
IDLE                   idle-timer を設定する。<I>例</I> SITE IDLE 60
CHMOD                  ファイルのモードを変更する。<I>例</I> SITE CHMOD 755 filename
HELP                   ヘルプ情報を出力する。<I>例</I> SITE HELP
NEWER                  特定の日付より新しいファイルをリストする。
MINFO                  SITE NEWER に似ているが、追加情報を出力する。
GROUP                  特定のグループのアクセスを要求する。<I>例</I> SITE GROUP foo
GPASS                  特定のグループのアクセスパスワードを出力する。<I>例</I> SITE GPASS bar
EXEC                   プログラムを実行する。<I>例</I> SITE EXEC program params
</PRE>

<P>

インターネット RFC 959 で指定された残りの ftp 要求は認識されるが、
実装はされていない。
MDTM 及び SIZE は RFC 959 では指定されないが、次に更新される FTP RFC には
あらわれるだろう。
<P>

FTP サーバは ABOR コマンドがインターネット RFC 959 に記述されるように
コマンド Telnet ストリームの Telnet &quot;Synch&quot; シグナル及び
Telnet &quot;割り込みプロセス&quot; (IP) シグナルによって前置きされる時にのみ
実行中のファイル転送を中断する。
Telnet IP と Synch の前置きの後に STAT コマンドが
データ転送中に受信した場合、転送状態が返される。
<P>

<I>ftpd</I>

は
<I>csh</I>(1)

によって使用される ``globbing'' 規則に従ってファイル名を解釈する。
これはユーザがメタ文字 ``*?[]{}~'' を利用することを許可する。
<P>

<I>Ftpd</I>

は 4 つの規則によりユーザを認証する。
<DL COMPACT>
<DT>1)<DD>
ユーザ名がパスワードデータベース
<I>/etc/passwd</I>

もしくはオペレーティングシステムに適切なものでなければならず、
パスワードはヌル文字であってはならない。この場合、パスワードは
すべてのファイル操作するまえにクライアントによって行わなければ
ならない。
<DT>2)<DD>
ユーザ名は
<I>/etc/ftpusers</I>

ファイルに存在してはならない。
<DT>3)<DD>
ユーザは
<I><A HREF="../../LDP_man-pages/man3/getusershell.3.html">getusershell</A></I>(3)

により返される標準シェルを持っていなければならない。
<DT>4)<DD>
ユーザ名が ``anonymous'' または ``ftp'' の場合、anonymous ftp アカウントは
パスワードファイル（ユーザ ``ftp'' ）に存在していなければならない。
この場合、ユーザは指定するどんなパスワードでもログインすることを
許可される。（規則によりこれはクライアントのホスト名が与えられる）
</DL>
<P>

最後の場合では、
<I>ftpd</I>

はクライアントのアクセス特権を制限するために特別な評価をする。
サーバは
<I><A HREF="../../LDP_man-pages/man2/chroot.2.html">chroot</A></I>(2)

コマンドを ``ftp'' ユーザのホームディレクトリに実行する。
システムセキュリティが侵害されないようにするために、
``ftp'' サブツリーは注意して構築することを推奨する;
次の規則が推奨される。
<DL COMPACT>
<DT>~ftp)<DD>
スーパーユーザによりホームディレクトリを作成し
誰からも書き込まれないようにする。
<DT>~ftp/bin)<DD>
スーパーユーザによりこのディレクトリを作成し
誰からも書き込まれないようにする。プログラム
<I><A HREF="../../0MultiFileIdx/man1/ls.1.html">ls</A></I>(1)

は list コマンドをサポートするために存在しなければならない。
このプログラムはモード 111 であるべきである。
<DT>~ftp/etc)<DD>
スーパーユーザによりこのディレクトリを作成し
誰からも書き込まれないようにする。このファイルは
<I><A HREF="../../0MultiFileIdx/man5/passwd.5.html">passwd</A></I>(5)

及び
<I><A HREF="../../LDP_man-pages/man5/group.5.html">group</A></I>(5)

は ls コマンドが番号の代わりに所有者を表示するように存在しなければならない。
オペレーティングシステム次第で、その他必要なファイルがあることが
あります。
<I><A HREF="../../LDP_man-pages/man3/getpwent.3.html">getpwent</A></I>(3)

ライブラリルーティンのマニュアルページを調べてください。
<I>passwd</I>

のパスワードフィールドは使用されず、本物の暗号化されたパスワードが
含まれるべきではない。これらのファイルはモード 444 でスーパーユーザに
所有されるべきである。パスワードファイルとしてシステムの
/etc/passwd ファイルを使用したり、システムの /etc/group ファイルを
group ファイルとして ~ftp/etc ディレクトリで使用するべきではない。
</DL>
<P>

<A NAME="lbAE">&nbsp;</A>
<H2>BSD/OS システム専用の認証メカニズム</H2>

ftpd によって使用される認証メカニズムは、ユーザの class と一致する
<I>/etc/login.conf</I>

ファイル
<I>（</I>login.conf<I>(5)</I>

を参照)の ``auth-ftp'' エントリによって決定される。
classに ``auth-ftp'' エントリが存在しない場合、通常の ``auth'' エントリが
代わりに使用される。
代わりの認証メカニズムはコロン (``:'') を追加し、次に認証スタイルを
追加することにより指定することが可能である。例えば ``joe:skey'' のようになる。
<A NAME="lbAF">&nbsp;</A>
<H2>一般的な FTP 拡張</H2>

<P>

ユーザがファイル名 (RETRIEVE コマンドを使用するとき) を指定する場合の
FTP サーバへのいくつかの拡張がある:
<P>

<PRE>
 実ファイル名   指定ファイル名      動作
 -------------  ------------------  -----------------------------------
 &lt;filename&gt;.Z   &lt;filename&gt;          転送前にファイルを解凍する
 &lt;filename&gt;     &lt;filename&gt;.Z        転送前に&lt;filename&gt;を圧縮する 
 &lt;filename&gt;     &lt;filename&gt;.tar      転送前に&lt;filename&gt;を tar する 
 &lt;filename&gt;     &lt;filename&gt;.tar.Z    転送前に&lt;filename&gt;を tar して圧縮する
</PRE>

<P>

また、FTP サーバは正式な電子メールアドレスをチェックし、
チェックが通らなかったらユーザに警告する。
ユーザの FTP クライアントが「長い応答文」（つまり、複数行の応答）で
応答しなくなってしまう場合は、パスワードの最初の文字にダッシュを
使用するとサーバの lreply() 関数を無効にする。
FTP サーバはすべてのファイルの送信と受信を記録することもでき、
各々のファイル転送で発生する次の情報を保持する。
<P>

<PRE>
Mon Dec  3 18:52:41 1990 1 wuarchive.wustl.edu 568881 /files.lst.Z a _ o a <A HREF="mailto:chris@wugate.wustl.edu">chris@wugate.wustl.edu</A> ftp 0 *

  %.24s %d %s %d %s %c %s %c %c %s %s %d %s
    1   2  3  4  5  6  7  8  9  10 11 12 13

  1 DDD MMM dd hh:mm:ss YYYY 形式の現在時刻
  2 秒単位の転送時間
  3 リモートホスト名
  4 バイト単位のファイルサイズ
  5 ファイル名
  6 転送の種類 (a&gt;scii, b&gt;inary)
  7 特別の動作のフラグ (必要に応じて連結する):
        C   ファイルは圧縮された
        U   ファイルは解凍された
        T   ファイルは tar された
        _   なにもされなかった
  8 ファイルはユーザに送信された (o&gt;utgoing),
  　またはユーザから受信した (i&gt;ncoming)
  9 匿名でアクセスされた (r&gt;eal, a&gt;nonymous, g&gt;uest) -- 主に FTP のため
 10 ローカルユーザ名または、ゲストであれば、与えられた ID 文字列
    (anonymous FTP password)
 11 サービス名 ('ftp', その他)
 12 認証メソッド (bitmask)
        0   なし
        1   RFC931 認証
 13 認証されたユーザ ID (可能な場合、そうでなければ '*')
</PRE>

<A NAME="lbAG">&nbsp;</A>
<H2>関連項目</H2>

<B><A HREF="../../netkit/man1/ftp.1.html">ftp</A>(1)</B>,

<B><A HREF="../../LDP_man-pages/man3/getusershell.3.html">getusershell</A>(3)</B>,

<B><A HREF="../../sysklogd/man8/syslogd.8.html">syslogd</A>(8)</B>,

<B>ftpaccess(5)</B>,

<B><A HREF="../man5/xferlog.5.html">xferlog</A>(5)</B>,

<B><A HREF="../../LDP_man-pages/man2/umask.2.html">umask</A>(2)</B>

<A NAME="lbAH">&nbsp;</A>
<H2>バグ</H2>

anonymous アカウントは本質的に危険であり
可能であれば避けるべきである。
<P>

サーバは特権のあるポート番号でソケットを作成するために
スーパーユーザとして実行しなければならない。アドレスを
ソケットにバインドする時にのみスーパーユーザに復帰し、
ログインした有効なユーザ ID を保持する。可能性のある
セキュリティホールは可能な限り調査したが、完全でない可能性
がある。
<P>

<HR>
<A NAME="index">&nbsp;</A><H2>Index</H2>
<DL>
<DT><A HREF="#lbAB">名前</A><DD>
<DT><A HREF="#lbAC">書式</A><DD>
<DT><A HREF="#lbAD">説明</A><DD>
<DT><A HREF="#lbAE">BSD/OS システム専用の認証メカニズム</A><DD>
<DT><A HREF="#lbAF">一般的な FTP 拡張</A><DD>
<DT><A HREF="#lbAG">関連項目</A><DD>
<DT><A HREF="#lbAH">バグ</A><DD>
</DL>
<HR>
This document was created by
<A HREF="../../man/man1/man2html.1.html">man2html</A>,
using the manual pages.<BR>
Time: 03:33:51 GMT, December 05, 2022
</BODY>
</HTML>
