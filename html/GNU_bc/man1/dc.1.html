
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML><HEAD><TITLE>Man page of DC</TITLE>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=UTF-8">
<LINK REL="stylesheet" TYPE="text/css" HREF="../../../contrib.css">
</HEAD>
<BODY>
<DIV ALIGN="right">
本ページは <A HREF="http://www.jp.freebsd.org/man-jp/">FreeBSD jpman project</A>
(man-jp@jp.FreeBSD.org) より寄贈いただきました。
</DIV>


<H1>DC</H1>
Section: User Commands  (1)<BR>Updated: 1997-03-25<BR><A HREF="#index">Index</A>
<A HREF="../../../index.html">JM Home Page</A>
<A HREF="../../../manual/GNU_bc/contrib/man1/dc.1">roff page</A><HR>



<A NAME="lbAB">&nbsp;</A>
<H2>名称</H2>

dc - 任意精度の計算機
<A NAME="lbAC">&nbsp;</A>
<H2>書式</H2>

dc [-V] [--version] [-h] [--help]
<BR>&nbsp;&nbsp;&nbsp;[-e&nbsp;scriptexpression]&nbsp;[--expression=scriptexpression]
<BR>&nbsp;&nbsp;&nbsp;[-f&nbsp;scriptfile]&nbsp;[--file=scriptfile]
<BR>&nbsp;&nbsp;&nbsp;[file&nbsp;...]
<A NAME="lbAD">&nbsp;</A>
<H2>解説</H2>

<P>

<I>dc</I> は、逆ポーランド形式の無限精度の計算が行える卓上計算機です。
この電卓は、定義やマクロ呼び出しも行えます。
普通、<I>dc</I> は標準入力から読み込みます。
コマンドライン引数が与えられた時は、それはファイル名となり、
<I>dc</I> はそのファイルを読み込み、ファイルの内容を実行した後で、
標準入力から入力を取ります。
通常の出力はすべて標準出力へ、エラー出力はすべて標準エラー出力へ
送られます。
<P>

逆ポーランド記法計算機は、数字をスタックに保存します。
数字を入力すると、それをスタックに積み上げます。
計算操作は、引数をスタックから取り出し、結果をスタックに積み上げます。
<P>

数字を
<I>dc</I>

に入力するためには、数字 (小数点が有っても構いません) を入力します。
指数表現はサポートされていません。
負の数字を入力するためには、``_'' で始まる数字を入力します。
``-'' は減算の二項演算子として使われているので、
このために利用することはできません。
引き続いて 2 つの数字を入力するためには、あいだに空白文字か改行文字を
入力します。
これらは、コマンドとしての意味はありません。
<A NAME="lbAE">&nbsp;</A>
<H2>オプション</H2>

<I>dc</I> は、次のコマンドラインオプション付きで起動可能です:
<DL COMPACT>
<DT><B>-V</B>

<DD>
<DT><B>--version</B>

<DD>
実行される <I>dc</I> のバージョンと著作権情報を表示し、終了します。
<DT><B>-h</B>

<DD>
<DT><B>--help</B>

<DD>
これらのコマンドラインオプションを短くまとめたメッセージと
バグ報告アドレスを表示し、終了します。
<DT><B>-e </B><I>script</I>

<DD>
<DT><B>--expression=</B><I>script</I>

<DD>
<I>script</I>

中のコマンドを、入力処理中に実行するコマンド集合に追加します。
<DT><B>-f </B><I>script-file</I>

<DD>
<DT><B>--file=</B><I>script-file</I>

<DD>
ファイル
<I>script-file</I>

中のコマンドを、入力処理中に実行するコマンド集合に追加します。
</DL>
<P>

上記オプションの処理後にコマンドラインパラメータが残った場合、
これらのコマンドラインパラメータは処理対象の入力ファイル名として
解釈されます。
ファイル名
<B>-</B>

は、標準入力ストリームを指します。
ファイル名を指定しないと、標準入力が処理されます。

<A NAME="lbAF">&nbsp;</A>
<H2>表示コマンド</H2>

<DL COMPACT>
<DT><B>p</B>

<DD>
スタックを変更することなく、スタックの先頭の値を表示します。
改行文字が、値の後に表示されます。
<DT><B>n</B>

<DD>
スタックの先頭の値を表示し、スタックから取り出します。
改行文字は、後に表示されません。
<DT><B>P</B>

<DD>
スタックの先頭の値をスタックから取り出します。
値が文字列の場合、末尾の改行を付けずに、単に表示します。
そうでない場合、これは数値であり、数値の絶対値の整数部分が、
&quot;基数 (UCHAR_MAX+1)&quot; のバイトストリームとして表示されます。
ここで (UCHAR_MAX+1) は 256 を仮定すると
(ほとんどのマシンでは 8 ビットバイトなので)、文字列
<B>KSK 0k1/ [_1*]sx d0&gt;x [256~aPd0&lt;x]dsxx sxLKk</B>
もまたこの機能を実現しますが、
x レジスタを潰してしまう副作用が違います。
<DT><B>f</B>

<DD>
変更することなく、

スタックの内容全部を表示します。
これは、忘れてしまった時に使ったり、あるコマンドがどのような効果を
もたらすのかを知りたい時には、良いコマンドです。

</DL>
<A NAME="lbAG">&nbsp;</A>
<H2>計算</H2>

<DL COMPACT>
<DT><B>+</B>

<DD>
2 つの値をスタックから取り出し、加算を行い、結果をスタックに積みます。
結果の精度は、引数の値にだけによって決まり、十分正確です。
<DT><B>-</B>

<DD>
2 つの値を取り出し、最初に取り出した値を 2 番目に取り出した値から
引きます。その後、結果をスタックに積みます。
<DT><B>*</B>

<DD>
2 つの値を取り出し、かけ算を行い、結果をスタックに積みます。
結果の小数の桁数は、
現在の精度値 (以下参照) と 2 つの引数の小数の桁数に依存します。
<DT><B>/</B>

<DD>
2 つの値を取り出し、2 番目に取り出した値を最初に取り出した値で割り、
結果をスタックに積みます。
小数の桁数は、精度値によって指定されます。
<DT><B>%</B>

<DD>
2 つの値を取り出し、
<B>/</B>

で計算された割算の余りを計算し、結果をスタックに積みます。
計算される値は、文字列 <B>Sd dld/ Ld*-</B> で計算される値と同じです。
<DT><B>~</B>

<DD>
2 つの値を取り出し、2 番目に取り出した値を最初に取り出した値で割り、
その商を先にスタックに積み、続いて余りを積みます。
割算に使われる小数の桁数は、精度値によって指定されます。
(エラーチェック機構はわずかに異なりますが、文字列 <B>SdSn lnld/ LnLd%</B>
もこの機能と同様に働くでしょう。)
<DT><B>^</B>

<DD>
2 つの値を取り出し、最初に取り出した値を指数とし、
2 つめの値を底として指数計算します。
指数の小数点以下は無視されます。
精度値は、結果の小数の桁数を指定します。
<DT><B>|</B>

<DD>
3 つの値を取り出し、べき剰余 (modular exponentiation) を計算します。
最初に取り出した値は法 (reduction modulus) (この値は 0 以外の整数で
なくてはいけません。) 、2 番目に取り出した値は指数 (この値は
非負の数字でなければならず、小数点以下は無視されます。)、
3 番目に取り出した値は累乗される底として用いられます。
これは整数であるべきです。
小さな整数に関しては、この機能は文字列 <B>Sm lble^ Lm%</B> のように
働きます。しかし、<B>^</B> を使う場合と違い、このコマンドは指数が
非常に大きくても働くはずです。
<DT><B>v</B>

<DD>
1 つの値を取り出し、平方根を求め、結果をスタックに積みます。
精度値は、結果の小数の桁数を指定します。
</DL>
<P>

ほとんどの演算子は、``精度値'' に影響を受けます。
精度値は、
<B>k</B>

コマンドで設定することができます。
デフォルトの精度値は 0 です。これは、足し算と引き算を除くすべての算術は
整数値の結果を出すことを意味しています。
<A NAME="lbAH">&nbsp;</A>
<H2>スタックの制御</H2>

<DL COMPACT>
<DT><B>c</B>

<DD>
スタックを消去し、空にします。
<DT><B>d</B>

<DD>
スタック先頭の値を複製し、スタックに積みます。
したがって、``4d*p'' は 4 の自乗を計算し、表示します。
<DT><B>r</B>

<DD>
スタック先頭の値と 2 番目の値の順番を入れ換えます。(交換します。)
</DL>
<A NAME="lbAI">&nbsp;</A>
<H2>レジスタ</H2>

<P>

<I>dc</I> は、少なくとも 256 個のメモリレジスタを持っています。
各レジスタは、1 文字の名前を持っています。
数字や文字列をレジスタに保存し、後で取り出すことができます。
<DL COMPACT>
<DT><B>s</B><I>r</I>

<DD>
スタックの先頭から値を取り出し、レジスタ
<I>r</I>

に保存します。
<DT><B>l</B><I>r</I>

<DD>
レジスタ
<I>r</I>

の値を複製し、それをスタックに積みます。
これは、
<I>r</I>

の内容を変更しません。
</DL>
<P>

各レジスタは、それ自身のスタックを持っています。
現在のレジスタ値は、レジスタスタックの先頭です。
<DL COMPACT>
<DT><B>S</B><I>r</I>

<DD>
(メイン) スタックの先頭の値を取り出し、レジスタ
<I>r</I>

のスタックにそれを積みます。
レジスタの以前の値は、アクセスできなくなります。
<DT><B>L</B><I>r</I>

<DD>
レジスタ
<I>r</I>

のスタックの先頭の値を取り出し、それをメインスタックに積みます。
レジスタ
<I>r</I>

のスタックにあった以前の値がもしあれば、
<B>l</B><I>r</I>

コマンドを使ってアクセス可能となります。

</DL>
<A NAME="lbAJ">&nbsp;</A>
<H2>パラメータ</H2>

<P>

<I>dc</I> は、その操作を制御するための 3 つのパラメータを持っています:
精度と、入力の基数、出力の基数です。
精度は、ほとんどの算術操作の結果で保存される小数の桁数を指定します。
入力の基数は、入力された数字の解釈を制御します。
入力されたすべての数字はこの基数をつかっているとされます。
出力の基数は、表示する数字で使われます。
<P>

入力と出力の基数は、分離されたパラメータです。
等しく設定しなくてもいいですが、これは便利だったり紛らわしかったりします。
入力の基数は 2 から 16 の範囲でなければなりません。
出力の基数は最低 2 でなければなりません。
精度は 0 以上でなければなりません。
精度は、現在の入力基数や出力基数に関係なく、いつも 10 進の桁数で決められます。
<DL COMPACT>
<DT><B>i</B>

<DD>
スタックの先頭から値を取り出し、入力基数を設定するために使います。
<DT><B>o</B>

<DD>
スタックの先頭から値を取り出し、出力基数を設定するために使います。
<DT><B>k</B>

<DD>
スタックの先頭から値を取り出し、精度を設定するために使います。
<DT><B>I</B>

<DD>
現在の入力基数をスタックに積みます。
<DT><B>O</B>

<DD>
現在の出力基数をスタックに積みます。
<DT><B>K</B>

<DD>
現在の精度をスタックに積みます。
</DL>
<A NAME="lbAK">&nbsp;</A>
<H2>文字列</H2>

<P>

<I>dc</I> は、数と同じように文字列を操作できます。
文字列に対してできる唯一のことは、それを表示し、マクロとして
実行することです。
マクロとは、<I>dc</I> コマンドとして実行される文字列の内容のことです。
すべてのレジスタとスタックは文字列を保存できます。
そして、<I>dc</I> はいつも、与えられたデータが文字列か数字かを
知っています。
算術操作のようないくつかのコマンドは、数を必要としており、
文字列が与えられた場合はエラーが表示されます。
他のコマンドは、数字か文字列を受け入れることができます。
例えば、
<B>p</B>

コマンドは、両方を受け付けることができ、データをその型に応じて
表示します。
<DL COMPACT>
<DT><B>[</B><I>characters</I><B>]</B>

<DD>
(左右の釣合のとれた、
<B>[</B>

と
<B>]</B>

で囲まれた
)
<I>characters</I>

という文字列を作り、それをスタックに積みます。
例えば、
<B>[foo]P</B>

は文字列
<B>foo</B>

を表示します (が、改行文字は表示しません)。
<DT><B>a</B>

<DD>
スタック先頭の値を取り出し、それが数字なら、その低位バイトを
文字列に変換し、スタックに積みます。文字列なら、その最初の文字が
スタックに積み戻されます。
<DT><B>x</B>

<DD>
スタックから値を取り出し、マクロとして実行します。
普通、これは文字列です。数の場合は、単純にその値がスタックに
積み戻されます。
例えば、
<B>[1p]x</B>

は、マクロ
<B>1p</B>

を実行します。
<B>1p</B>

は、
<B>1</B>

をスタックに積み、別の行に
<B>1</B>

を表示します。
</DL>
<P>

マクロは、しばしばレジスタにも保存されます。
<B>[1p]sa</B>

は、
<B>1</B>

を表示するためのマクロを
レジスタ
<B>a</B>

に保存します。
<B>lax</B>

でこのマクロは実行できます。
<DL COMPACT>
<DT><B>&gt;</B><I>r</I>

<DD>
スタックから 2 つの値を取り出し、それらを数と仮定して比較し、
もともとのスタックの先頭が大きい場合、レジスタ
<I>r</I>

の内容を実行します。
したがって、
<B>1 2&gt;a</B>

は、レジスタ
<B>a</B>

の内容を実行しますが、
<B>2 1&gt;a</B>

では実行しません。
<DT><B>!&gt;</B><I>r</I>

<DD>
似ていますが、もともとのスタックの先頭が 2 番目の値よりも大きくない場合
(2 番目の値以下である場合)、マクロを起動します。
<DT><B>&lt;</B><I>r</I>

<DD>
似ていますが、もともとのスタックの先頭が小さい場合にマクロを実行します。
<DT><B>!&lt;</B><I>r</I>

<DD>
似ていますが、もともとのスタックの先頭が 2 番目の値よりも小さくない場合
(2 番目の値以上である場合)、マクロを起動します。
<DT><B>=</B><I>r</I>

<DD>
似ていますが、2 つの取り出された値が等しい場合にマクロが実行されます。
<DT><B>!=</B><I>r</I>

<DD>
似ていますが、2 つの取り出された値が等しくない場合にマクロが実行されます。

<DT><B>?</B>

<DD>
端末から行を読み込み、実行します。
このコマンドは、ユーザからの入力を要求するためのマクロで使えます。
<DT><B>q</B>

<DD>
マクロを終了し、それを呼び出したマクロからも終了します。
一番上のレベルか、一番上のレベルから直接呼ばれたマクロから呼ばれると、
<B>q</B>

コマンドは <I>dc</I> を終了します。
<DT><B>Q</B>

<DD>
スタックから値を取り出し、それを終了すべきマクロレベル数として、
その数のマクロを終了します。
したがって、
<B>3Q</B>

は、3 つのレベルを終了します。
<B>Q</B>

コマンドでは、<I>dc</I> を終了することはありません。
</DL>
<A NAME="lbAL">&nbsp;</A>
<H2>状態の問い合わせ</H2>

<DL COMPACT>
<DT><B>Z</B>

<DD>
スタックから値を取り出し、その桁数 (文字列の場合は、文字数) を計算し、
その値をスタックに積みます。
<DT><B>X</B>

<DD>
スタックから値を取り出し、その小数点以下の桁数を計算し、
その値をスタックに積みます。文字列の場合、スタックには

0
が積まれます。
<DT><B>z</B>

<DD>
現在のスタックの深さを、スタックに積みます。
スタックの深さとは、
<B>z</B>

コマンドが実行される前のスタックのデータ数です。
</DL>
<A NAME="lbAM">&nbsp;</A>
<H2>その他のさまざまなこと</H2>

<DL COMPACT>
<DT><B>!</B>

<DD>
行の末尾までをシステムコマンドとして実行します (シェルエスケープ) 。


コマンド !&lt;, !=, !&gt; のパーズが優先しますので、&lt;, =, &gt; で開始する
コマンドを起動したい場合には、! の後に空白を加える必要があります。
<DT><B>#</B>

<DD>
行の末尾までをコメントとして取り扱います。
<DT><B>:</B><I>r</I>

<DD>
スタックから 2 つの値を取り出します。
スタックの先頭だった値で配列
<I>r</I>

をインデックスし、スタックの先頭から 2 番目だった値をそこに保存します。
<DT><B>;</B><I>r</I>

<DD>
スタックから値を取り出し、配列
<I>r</I>

のインデックスとして利用します。
配列から選ばれた値は、その後でスタックに積まれます。
</DL>
<A NAME="lbAN">&nbsp;</A>
<H2>バグ</H2>

<P>

バグ報告は、
<B><A HREF="mailto:bug-dc@gnu.org">bug-dc@gnu.org</A></B>

に電子メールでお願いします。
単語 ``dc'' を ``Subject:'' フィールドのどこかに入れておいてください。
<P>

<HR>
<A NAME="index">&nbsp;</A><H2>Index</H2>
<DL>
<DT><A HREF="#lbAB">名称</A><DD>
<DT><A HREF="#lbAC">書式</A><DD>
<DT><A HREF="#lbAD">解説</A><DD>
<DT><A HREF="#lbAE">オプション</A><DD>
<DT><A HREF="#lbAF">表示コマンド</A><DD>
<DT><A HREF="#lbAG">計算</A><DD>
<DT><A HREF="#lbAH">スタックの制御</A><DD>
<DT><A HREF="#lbAI">レジスタ</A><DD>
<DT><A HREF="#lbAJ">パラメータ</A><DD>
<DT><A HREF="#lbAK">文字列</A><DD>
<DT><A HREF="#lbAL">状態の問い合わせ</A><DD>
<DT><A HREF="#lbAM">その他のさまざまなこと</A><DD>
<DT><A HREF="#lbAN">バグ</A><DD>
</DL>
<HR>
This document was created by
<A HREF="../../man/man1/man2html.1.html">man2html</A>,
using the manual pages.<BR>
Time: 03:33:22 GMT, December 05, 2022
</BODY>
</HTML>
