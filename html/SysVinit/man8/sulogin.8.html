
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML><HEAD><TITLE>Man page of SULOGIN</TITLE>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=UTF-8">
<LINK REL="stylesheet" TYPE="text/css" HREF="../../../jm.css">
</HEAD>
<BODY>

<H1>SULOGIN</H1>
Section: Linux System Administrator's Manual (8)<BR>Updated: 11 Sep 2000<BR><A HREF="#index">Index</A>
<A HREF="../../../index.html">JM Home Page</A>
<A HREF="../../../manual/SysVinit/release/man8/sulogin.8">roff page</A><HR>

<A NAME="lbAB">&nbsp;</A>
<H2>名前</H2>

sulogin - シングルユーザログイン
<A NAME="lbAC">&nbsp;</A>
<H2>書式</H2>

<B>sulogin</B>

[<B> -e </B>]

[<B> -p </B>]

[<B> -t timeout </B>]

[<B> tty-device </B>]

<A NAME="lbAD">&nbsp;</A>
<H2>説明</H2>

<I>sulogin</I>

は、システムがシングルユーザモードに入ったときに
(<I><A HREF="../man5/inittab.5.html">inittab</A></I>(5)

のエントリを通して)
<B><A HREF="../man8/init.8.html">init</A></B>(8)

から起動される。
<B>init</B>

は LILO などのブートモニタから
<B>-b</B>

フラグを与えられたときにも
<I>sulogin</I>

を起動しようとする。
<P>

ユーザには以下のようなプロンプトが出される。
<DL COMPACT><DT><DD>
<P>
<PRE>
Give root password for system maintenance
<BR>
(or type Control-D for normal startup):
</PRE>

</DL>

<P>

<I>sulogin</I>

は現在の端末か、またはコマンドラインから指定されたデバイス
(たいてい
<B>/dev/console</B>)

に接続する。
<P>

<B>-p</B>

オプションが与えられると、シングルユーザのシェルは、
<I>argv[0]</I>

の最初の文字にダッシュ `-' を付けたかたちで起動される。
これによって、ほとんどのシェルはログインシェルとして動作する。
デフォルトではこれは行われないので、シェルは起動時に
<B>/etc/profile</B>

や
<B>$HOME/.profile</B>

を読み込まない。
<P>

ユーザがシングルユーザシェルを終了した後、
あるいはプロンプトに対して Control-d を押した (シェルを起動しなかった) 後には、
システムは (動作を継続して) デフォルトのランレベルにブートする。
<A NAME="lbAE">&nbsp;</A>
<H2>環境変数</H2>

<I>sulogin</I>

は環境変数
<B>SUSHELL</B>

または
<B>sushell</B>

を探し、起動するシェルを決定しようとする。
これらの環境変数が設定されていないと、
/etc/passwd に書かれている root のシェルを 起動しようとする。
これにも失敗すると、
<B>/bin/sh</B>

を起動する。
<P>

この機能は、init の
<B>-b</B>

オプションと一緒に用いると非常に便利である。
システムをシングルユーザモードで起動し、
ルートファイルシステムを read/write でマウントし、
静的にリンクされた特殊な「フェイルセーフ」シェルを使うには、
次のようにする
(この例は LILO のブートプロンプトに与えることができる)。
<DL COMPACT><DT><DD>
<P>
<PRE>
boot: linux -b rw sushell=/sbin/sash
</PRE>

</DL>

<A NAME="lbAF">&nbsp;</A>
<H2>探索方法</H2>

<I>sulogin</I>

は、まず通常の方法を用いて root のパスワードをチェックする。
<B>-e</B>

オプションが指定されると、
<I>sulogin</I>

は以下のファイルを調べて root のパスワードを見つけようとする。
これらが壊れていたり、存在しない場合は、
最後の手段として、
root のパスワードを訊ねないままシェルのプロンプトを表示してしまう。
<DL COMPACT><DT><DD>
<P>
<PRE>
/etc/passwd,
<BR>
/etc/shadow (存在する場合)
</PRE>

</DL>
<A NAME="lbAG">&nbsp;</A>
<H2>著者</H2>

Miquel van Smoorenburg &lt;<A HREF="mailto:miquels@cistron.nl">miquels@cistron.nl</A>&gt;
<A NAME="lbAH">&nbsp;</A>
<H2>関連項目</H2>

<B><A HREF="../man8/init.8.html">init</A></B>(8),

<B><A HREF="../man5/inittab.5.html">inittab</A></B>(5)

<P>

<HR>
<A NAME="index">&nbsp;</A><H2>Index</H2>
<DL>
<DT><A HREF="#lbAB">名前</A><DD>
<DT><A HREF="#lbAC">書式</A><DD>
<DT><A HREF="#lbAD">説明</A><DD>
<DT><A HREF="#lbAE">環境変数</A><DD>
<DT><A HREF="#lbAF">探索方法</A><DD>
<DT><A HREF="#lbAG">著者</A><DD>
<DT><A HREF="#lbAH">関連項目</A><DD>
</DL>
<HR>
This document was created by
<A HREF="../../man/man1/man2html.1.html">man2html</A>,
using the manual pages.<BR>
Time: 03:33:36 GMT, December 05, 2022
</BODY>
</HTML>
