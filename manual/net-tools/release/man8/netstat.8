.\"
.\" netstat.8 
.\"
.\" Original: (mdw@tc.cornell.edu & dc6iq@insu1.etec.uni-karlsruhe.de)
.\"
.\" Modified: Bernd.Eckenfels@inka.de
.\" Modified: Andi Kleen ak@muc.de 
.\" Modified: Tuan Hoang tqhoang@bigfoot.com 
.\"
.\"
.\"
.\" Japanese Version Copyright (c) 1997 NAKANO Takeo all rights reserved.
.\" Translated Thu Jan 22 1998 by NAKANO Takeo <nakano@@apm.seikei.ac.jp>
.\" Updated Sat Dec 25 1999 by Kentaro Shirakata <argrath@yo.rim.or.jp>
.\" Updated Sun Jan 14 20:46:00 JST 2001
.\"	by Yuichi SATO <sato@complex.eng.hokudai.ac.jp>
.\" Updated & Modified Tue Dec 25 17:18:23 JST 2001
.\"     by Yuichi SATO <ysato@h4.dion.ne.jp>
.\"
.TH NETSTAT 8 "19 December 2000" "net-tools" "Linux Programmer's Manual"

.SH 名前
netstat \- ネットワーク接続、経路テーブル、インターフェースの状態、マスカレード接続、 netlink メッセージ、マルチキャストのメンバーシップを表示する

.SH 書式

.B netstat 
.RI [ address_family_options ]
.RB [ \-\-tcp | \-t ]
.RB [ \-\-udp | \-u ]
.RB [ \-\-raw | \-w ]
.RB [ \-\-listening | \-l ]
.RB [ \-\-all | \-a ]
.RB [ \-\-numeric | \-n ]
.RB [ \-\-numeric-hosts ] [ \-\-numeric-ports ] [ \-\-numeric-ports ]
.RB [ \-\-symbolic | \-N ]
.RB [ \-\-extend | \-e  [ \-\-extend | \-e] ]
.RB [ \-\-timers | \-o ]
.RB [ \-\-program | \-p ]
.RB [ \-\-verbose | \-v ]
.RB [ \-\-continuous | \-c]
.P
.B netstat 
.RB { \-\-route | \-r }
.RI [ address_family_options ]
.RB [ \-\-extend | \-e  [ \-\-extend | \-e] ]
.RB [ \-\-verbose | \-v ]
.RB [ \-\-numeric | \-n ]
.RB [ \-\-numeric-hosts ] [ \-\-numeric-ports ] [ \-\-numeric-ports ]
.RB [ \-\-continuous | \-c]
.P
.B netstat
.RB { \-\-interfaces | \-i }
.RI [ iface ]
.RB [ \-\-all | \-a ]
.RB [ \-\-extend | \-e  [ \-\-extend | \-e] ]
.RB [ \-\-verbose | \-v ]
.RB [ \-\-program | \-p ]
.RB [ \-\-numeric | \-n ]
.RB [ \-\-numeric-hosts ] [ \-\-numeric-ports ] [ \-\-numeric-ports ]
.RB [ \-\-continuous | \-c]
.P
.B netstat
.RB { \-\-groups | \-g }
.RB [ \-\-numeric | \-n ]
.RB [ \-\-numeric-hosts ] [ \-\-numeric-ports ] [ \-\-numeric-ports ]
.RB [ \-\-continuous | \-c]
.P
.B netstat
.RB { \-\-masquerade | \-M }
.RB [ \-\-extend | \-e ]
.RB [ \-\-numeric | \-n ]
.RB [ \-\-numeric-hosts ] [ \-\-numeric-ports ] [ \-\-numeric-ports ]
.RB [ \-\-continuous | \-c]
.P
.B netstat
.RB { \-\-statistics | -s }
.RB [ \-\-tcp | \-t ]
.RB [ \-\-udp | \-u ]
.RB [ \-\-raw | \-w ]
.P
.B netstat 
.RB { \-\-version | \-V }
.P
.B netstat 
.RB { \-\-help | \-h }
.P
.IR address_family_options :
.PP
.RB [ \-\-protocol= { inet , unix , ipx , ax25 , netrom , ddp }[, ...] ]
.RB [ \-\-unix | \-x ] 
.RB [ \-\-inet | \-\-ip ]
.RB [ \-\-ax25 ]
.RB [ \-\-ipx ] 
.RB [ \-\-netrom ]
.RB [ \-\-ddp ]

.SH 説明
.B netstat
は Linux のネットワークシステムに関する情報を表示する。
表示される情報のタイプは、最初の引き数で以下のように制御される。
.SS (引き数なし)
デフォルトでは、
.B netstat
はオープンされているソケットの一覧を表示する。
アドレスファミリーが指定されていなければ、
設定されている全てのアドレスファミリーに関して、
アクティブなソケットが表示される。
.SS "\-\-route , \-r"
カーネルの経路テーブルを表示する。
.SS "\-\-groups , \-g"
IPv4 と IPv6 のマルチキャストグループメンバーシップ情報を表示する。
.SS "\-\-interface=\fIiface \fR, \fB\-i"
全ての (あるいは
.I iface
で指定した) ネットワークインターフェースの状態テーブルを表示する。
.SS "\-\-masquerade , \-M"
マスカレードされた接続を表示する。
.SS "\-\-statistics , \-s"
各プロトコルの統計情報の一覧を表示する。
.SH オプション
.SS "\-\-verbose , \-v"
詳細表示モードになり、起こっていることをユーザーに知らせる。
特に、設定されていないアドレスファミリー関する有用な情報をいくつか表示する。
.SS "\-\-numeric , \-n"
ホスト・ポート・ユーザーなどの名前を解決せずに、数字のアドレスで表示する。
.SS "\-\-numeric-hosts"
ホストアドレスを数値で表示する。
ただし、ポート名とユーザー名の解決は行う。
.SS "\-\-numeric-ports"
ポート番号を数値で表示する。
ただし、ホスト名とユーザー名の解決は行う。
.SS "\-\-numeric-users"
ユーザー ID を数値で表示する。
ただし、ホスト名とポート名の解決は行う。

.SS "\-\-protocol=\fIfamily \fR, \fB\-A"
接続状態を表示するアドレスファミリーを指定する
(低レベルのプロトコルを指定すれば、
アドレスファミリーをうまく記述できるだろう)。
.I family
はコンマ (',') で区切られたリストで、
アドレスファミリーのキーワードを指定する。
キーワードとして
.BR inet , 
.BR unix , 
.BR ipx , 
.BR ax25 , 
.BR netrom ,
.BR ddp
が指定できる。
これは、
.BR \-\-inet ,
.BR \-\-unix " (" \-x ),
.BR \-\-ipx ,
.BR \-\-ax25 ,
.BR \-\-netrom ,
.B \-\-ddp
オプションを使った場合と同じ効果がある。
.P
アドレスファミリー
.B inet
には
raw, udp, tcp プロトコルソケットが含まれる。
.SS "\-c, \-\-continuous"
指定された情報を 1 秒ごとに表示し続ける。
.SS "\-e, \-\-extend"
さらに詳しい情報を表示する。
このオプションを 2 個指定すれば最も詳しい表示が得られる。
.SS "\-o, \-\-timers"
ネットワーキングタイマーに関する情報が追加される。
.SS "\-p, \-\-program"
各ソケットが属しているプログラムの PID と名前が表示される。
.SS "\-l, \-\-listening"
接続待ち (listen) 状態にあるソケットのみを表示する
(このオプションはデフォルトでは省略される)。
.SS "\-a, \-\-all"
接続待ち状態にあるソケットも、接続待ち状態にないソケットも表示する。
.B --interfaces
オプションが指定された場合、
マークされていないインターフェースを表示する。
.SS "\-F"
FIB からの経路情報を表示する (これはデフォルトである)。
.SS "\-C"
経路キャッシュからの経路情報を表示する。
.P
.SH 出力
.P
.SS アクティブなインターネット接続 \fR(TCP, UDP, raw)\fR
.SS "Proto" 
ソケットで用いられているプロトコル (tcp, udp, raw のいずれか)。
.SS "Recv-Q"
このソケットに接続されたユーザープログラムに渡されなかったデータのバイト数。
.SS "Send-Q"
リモートホストに受け入れられなかったデータのバイト数。
.SS "Local Address" 
ローカル側ソケットのアドレスとポート番号。
.BR \-\-numeric " (" \-n )
オプションが指定されない限り、
ソケットアドレスは正式なホスト名 (FQDN) になり、
ポート番号は対応するサービス名に変換される。
.SS "Foreign Address"
リモート側ソケットのアドレスとポート番号。
その他は "Local Address" と同様である。 
.SS "State"
ソケットの状態 (state)。 
raw モードには状態がなく、また UDP も通常状態を使用しないため、
この項目は空白になっている。
普通は以下の値のどれか:
.TP
.I
ESTABLISHED
ソケットは確立した接続状態にある。
.TP
.I
SYN_SENT
ソケットは接続を確立しようと試みている。
.TP
.I
SYN_RECV
接続要求をネットワークから受信している。
.TP
.I
FIN_WAIT1
ソケットはクローズされており、接続は切断中である。
.TP
.I
FIN_WAIT2
接続はクローズされ、ソケットはリモート側からの切断を待っている。
.TP
.I
TIME_WAIT
ソケットは、クローズ後にリモートからの切断が再送されるのを待っている。
.TP
.I
CLOSED
ソケットは使用されていない。
.TP
.I
CLOSE_WAIT
リモート側は既に切断され、ソケットがクローズされるのを待っている。
.TP
.I
LAST_ACK
リモート側は既に切断され、ソケットもクローズされている。
確認 (acknowledgement) を待っている。
.TP
.I
LISTEN
ソケットは接続待ち (listen) である。
このようなソケットは、
.BR \-\-listening " (" \-l )
または
.BR \-\-all " (" \-a )
オプションを指定しない限り、出力には含まれない。
.TP
.I
CLOSING
両方のソケットが切断されているが、まだ全てのデータが送られていない。
.TP
.I
UNKNOWN
ソケットの状態は不明である。
.SS "User"
ソケットのオーナーの、名前またはユーザー ID (UID)。
.SS "PID/Program name"
このソケットを所有しているプログラムの
プロセス ID (PID) とプログラム名の対 (スラッシュで区切られる)。
.B --program
オプションによってこの項目が現れる。
自分が所有していないソケットの情報を見るためには、
.I スーパーユーザー
特権が必要である。
この識別情報は IPX ソケットに対してはまだ利用できない。
.SS "Timer"
(まだ書いていない)
.P
.SS アクティブな UNIX ドメインソケット
.SS "Proto" 
ソケットで用いられているプロトコル (通常は unix)。
.SS "RefCnt"
参照カウント (このソケットに接続されているプロセス数)。
.SS "Flags"
表示されるフラグは SO_ACCEPTON (\fBACC\fP と表示される)、
SO_WAITDATA (\fBW\fP)、 SO_NOSPACE (\fBN\fP) である。
SO_ACCEPTON は、ソケットが接続されておらず、
かつそれを用いているプログラムが接続要求を待っている場合に用いられる。
他のフラグは通常は重要ではない。
.SS "Type"
ソケットアクセスのタイプ。何種類かある:
.TP
.I
SOCK_DGRAM
データグラム (connectionless) モードのソケットである。
.TP
.I
SOCK_STREAM
ストリーム (connection) ソケットである。
.TP
.I
SOCK_RAW
raw ソケットである。
.TP
.I
SOCK_RDM
信頼性の高いメッセージを届けるソケットである。
.TP
.I
SOCK_SEQPACKET
シーケンシャルパケットのソケットである。
.TP
.I
SOCK_PACKET
raw インターフェースアクセスのソケットである。
.TP
.I
UNKNOWN
将来なにが起こるか誰が知ろうか - ここに書いて下さい :-)
.PP
.SS "State"
このフィールドには、以下のキーワードのいずれかが入る:
.TP
.I FREE
ソケットは割り当てられていない。
.TP
.I LISTENING 
ソケットは接続要求の待ち状態である。
これらのソケットは、
.BR \-\-listening " (" \-l )
または
.BR \-\-all " (" \-a )
オプションが指定されない限り、出力されない。
.TP
.I CONNECTING
ソケットは接続中である。
.TP
.I CONNECTED
ソケットは接続されている。
.TP
.I DISCONNECTING
ソケットは切断中である。
.TP
.I (空白)
ソケットは他のソケットに接続されていない。
.TP
.I UNKNOWN
このステートは現われないはずである。
.SS "PID/Program name"
このソケットをオープンしているプログラムのプロセス ID (PID) とプロセス名。
より詳しい情報は上記の
.B アクティブなインターネット接続
の項を参照のこと。
.SS "Path"
ソケットに結び付けられているプロセスのパス名。
.P
.SS アクティブな IPX ソケット
(知識を持っている人が記述してほしい)
.P
.SS アクティブな NET/ROM ソケット
(知識を持っている人が記述してほしい)
.P
.SS アクティブな AX.25 ソケット
(知識を持っている人が記述してほしい)
.PP
.SH 注意
カーネルリリース 2.2 から、
.B netstat -i
では別名インターフェースの
インターフェース統計を表示しなくなった。
別名インターフェース毎の統計を得るためには、
.BR ipchains(8)
コマンドを用いて明示的にルールを設定する必要がある。

.SH ファイル
.ta
.I /etc/services
-- サービス名と番号の変換表が入ったファイル

.I /proc
-- proc ファイルシステムのマウントポイント。
このファイルシステムにより、
以下のファイルを使ってカーネルの統計情報にアクセスできる。

.I /proc/net/dev
-- デバイスの情報

.I /proc/net/raw
raw ソケットの情報

.I /proc/net/tcp
-- TCP ソケットの情報

.I /proc/net/udp
-- UDP ソケットの情報

.I /proc/net/igmp
-- IGMP マルチキャストの情報

.I /proc/net/unix
-- Unix ドメインソケットの情報

.I /proc/net/ipx
-- IPX ソケットの情報

.I /proc/net/ax25
-- AX25 ソケットの情報

.I /proc/net/appletalk
-- DDP (appletalk) ソケットの情報

.I /proc/net/nr
-- NET/ROM ソケットの情報

.I /proc/net/route
-- IP 経路情報

.I /proc/net/ax25_route
-- AX25 経路情報

.I /proc/net/ipx_route
-- IPX 経路情報

.I /proc/net/nr_nodes
-- NET/ROM ノードリスト

.I /proc/net/nr_neigh
-- NET/ROM ネイバー (neighbour)

.I /proc/net/ip_masquerade
-- マスカレード接続

.I /proc/net/snmp
-- 統計情報
.fi
.P
.SH 関連項目
.BR route (8), 
.BR ifconfig (8), 
.BR ipchains (8),
.BR iptables (8),
.BR proc (5)
.P
.SH バグ
ソケットが表示中に変更されると、たまに妙な情報が表示されることがある。
あまり起こらないとは思うが。
.P
.SH 著者
netstat のユーザーインターフェースは
Fred Baumgarten <dc6iq@insu1.etec.uni-karlsruhe.de> が書いた。
マニュアルページは主に Matt Welsh <mdw@tc.cornell.edu> が書き
Alan Cox <Alan.Cox@linux.org> が更新した。
しかし、作業はあまり多くなかった。
そしてさらに Tuan Hoang <tqhoang@bigfoot.com> が更新した。
.br
net-tools パッケージに入っているマニュアルページとコマンドは、
Bernd Eckenfels <ecki@linux.de> が全体的に書き直した。
