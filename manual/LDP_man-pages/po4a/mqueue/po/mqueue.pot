# SOME DESCRIPTIVE TITLE
# Copyright (C) YEAR Free Software Foundation, Inc.
# This file is distributed under the same license as the PACKAGE package.
# FIRST AUTHOR <EMAIL@ADDRESS>, YEAR.
#
#, fuzzy
msgid ""
msgstr ""
"Project-Id-Version: PACKAGE VERSION\n"
"POT-Creation-Date: 2021-03-12 14:00+0900\n"
"PO-Revision-Date: YEAR-MO-DA HO:MI+ZONE\n"
"Last-Translator: FULL NAME <EMAIL@ADDRESS>\n"
"Language-Team: LANGUAGE <LL@li.org>\n"
"Language: \n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=UTF-8\n"
"Content-Transfer-Encoding: 8bit\n"

#. type: TH
#: build/C/man3/mq_close.3:25
#, no-wrap
msgid "MQ_CLOSE"
msgstr ""

#. type: TH
#: build/C/man3/mq_close.3:25 build/C/man2/mq_getsetattr.2:25 build/C/man3/mq_open.3:25 build/C/man3/mq_receive.3:25 build/C/man3/mq_send.3:25 build/C/man3/mq_unlink.3:25
#, no-wrap
msgid "2020-08-13"
msgstr ""

#. type: TH
#: build/C/man3/mq_close.3:25 build/C/man3/mq_getattr.3:25 build/C/man2/mq_getsetattr.2:25 build/C/man3/mq_notify.3:25 build/C/man3/mq_open.3:25 build/C/man7/mq_overview.7:25 build/C/man3/mq_receive.3:25 build/C/man3/mq_send.3:25 build/C/man3/mq_unlink.3:25 build/C/man2/msgctl.2:38 build/C/man2/msgget.2:35 build/C/man2/msgop.2:40
#, no-wrap
msgid "Linux"
msgstr ""

#. type: TH
#: build/C/man3/mq_close.3:25 build/C/man3/mq_getattr.3:25 build/C/man2/mq_getsetattr.2:25 build/C/man3/mq_notify.3:25 build/C/man3/mq_open.3:25 build/C/man7/mq_overview.7:25 build/C/man3/mq_receive.3:25 build/C/man3/mq_send.3:25 build/C/man3/mq_unlink.3:25 build/C/man2/msgctl.2:38 build/C/man2/msgget.2:35 build/C/man2/msgop.2:40
#, no-wrap
msgid "Linux Programmer's Manual"
msgstr ""

#. type: SH
#: build/C/man3/mq_close.3:26 build/C/man3/mq_getattr.3:26 build/C/man2/mq_getsetattr.2:26 build/C/man3/mq_notify.3:26 build/C/man3/mq_open.3:26 build/C/man7/mq_overview.7:26 build/C/man3/mq_receive.3:26 build/C/man3/mq_send.3:26 build/C/man3/mq_unlink.3:26 build/C/man2/msgctl.2:39 build/C/man2/msgget.2:36 build/C/man2/msgop.2:41
#, no-wrap
msgid "NAME"
msgstr ""

#. type: Plain text
#: build/C/man3/mq_close.3:28
msgid "mq_close - close a message queue descriptor"
msgstr ""

#. type: SH
#: build/C/man3/mq_close.3:28 build/C/man3/mq_getattr.3:28 build/C/man2/mq_getsetattr.2:28 build/C/man3/mq_notify.3:28 build/C/man3/mq_open.3:28 build/C/man3/mq_receive.3:28 build/C/man3/mq_send.3:28 build/C/man3/mq_unlink.3:28 build/C/man2/msgctl.2:41 build/C/man2/msgget.2:38 build/C/man2/msgop.2:43
#, no-wrap
msgid "SYNOPSIS"
msgstr ""

#. type: Plain text
#: build/C/man3/mq_close.3:31 build/C/man3/mq_getattr.3:31 build/C/man3/mq_notify.3:31 build/C/man3/mq_receive.3:31 build/C/man3/mq_send.3:31 build/C/man3/mq_unlink.3:31
#, no-wrap
msgid "B<#include E<lt>mqueue.hE<gt>>\n"
msgstr ""

#. type: Plain text
#: build/C/man3/mq_close.3:33
#, no-wrap
msgid "B<int mq_close(mqd_t >I<mqdes>B<);>\n"
msgstr ""

#. type: Plain text
#: build/C/man3/mq_close.3:36 build/C/man3/mq_getattr.3:39 build/C/man3/mq_notify.3:36 build/C/man3/mq_open.3:40 build/C/man3/mq_receive.3:44 build/C/man3/mq_send.3:44 build/C/man3/mq_unlink.3:36
msgid "Link with I<-lrt>."
msgstr ""

#. type: SH
#: build/C/man3/mq_close.3:36 build/C/man3/mq_getattr.3:39 build/C/man2/mq_getsetattr.2:39 build/C/man3/mq_notify.3:36 build/C/man3/mq_open.3:40 build/C/man7/mq_overview.7:28 build/C/man3/mq_receive.3:56 build/C/man3/mq_send.3:56 build/C/man3/mq_unlink.3:36 build/C/man2/msgctl.2:49 build/C/man2/msgget.2:46 build/C/man2/msgop.2:56
#, no-wrap
msgid "DESCRIPTION"
msgstr ""

#. type: Plain text
#: build/C/man3/mq_close.3:40
msgid "B<mq_close>()  closes the message queue descriptor I<mqdes>."
msgstr ""

#. type: Plain text
#: build/C/man3/mq_close.3:47
msgid ""
"If the calling process has attached a notification request (see "
"(B<mq_notify>(3))  to this message queue via I<mqdes>, then this request is "
"removed, and another process can now attach a notification request."
msgstr ""

#. type: SH
#: build/C/man3/mq_close.3:47 build/C/man3/mq_getattr.3:117 build/C/man3/mq_notify.3:133 build/C/man3/mq_open.3:157 build/C/man3/mq_receive.3:111 build/C/man3/mq_send.3:120 build/C/man3/mq_unlink.3:43 build/C/man2/msgctl.2:308 build/C/man2/msgget.2:146 build/C/man2/msgop.2:338
#, no-wrap
msgid "RETURN VALUE"
msgstr ""

#. type: Plain text
#: build/C/man3/mq_close.3:53
msgid ""
"On success B<mq_close>()  returns 0; on error, -1 is returned, with I<errno> "
"set to indicate the error."
msgstr ""

#. type: SH
#: build/C/man3/mq_close.3:53 build/C/man3/mq_getattr.3:125 build/C/man3/mq_notify.3:139 build/C/man3/mq_open.3:169 build/C/man3/mq_receive.3:120 build/C/man3/mq_send.3:128 build/C/man3/mq_unlink.3:49 build/C/man2/msgctl.2:337 build/C/man2/msgget.2:152 build/C/man2/msgop.2:351
#, no-wrap
msgid "ERRORS"
msgstr ""

#. type: TP
#: build/C/man3/mq_close.3:54 build/C/man3/mq_getattr.3:126 build/C/man3/mq_notify.3:140 build/C/man3/mq_receive.3:127 build/C/man3/mq_send.3:135
#, no-wrap
msgid "B<EBADF>"
msgstr ""

#. type: Plain text
#: build/C/man3/mq_close.3:59 build/C/man3/mq_getattr.3:131 build/C/man3/mq_notify.3:145
msgid "The message queue descriptor specified in I<mqdes> is invalid."
msgstr ""

#. type: SH
#: build/C/man3/mq_close.3:59 build/C/man3/mq_getattr.3:136 build/C/man3/mq_notify.3:173 build/C/man3/mq_open.3:269 build/C/man3/mq_receive.3:154 build/C/man3/mq_send.3:162 build/C/man3/mq_unlink.3:61
#, no-wrap
msgid "ATTRIBUTES"
msgstr ""

#. type: Plain text
#: build/C/man3/mq_close.3:62 build/C/man3/mq_getattr.3:139 build/C/man3/mq_notify.3:176 build/C/man3/mq_open.3:272 build/C/man3/mq_receive.3:157 build/C/man3/mq_send.3:165 build/C/man3/mq_unlink.3:64
msgid "For an explanation of the terms used in this section, see B<attributes>(7)."
msgstr ""

#. type: tbl table
#: build/C/man3/mq_close.3:66 build/C/man3/mq_getattr.3:143 build/C/man3/mq_notify.3:180 build/C/man3/mq_open.3:276 build/C/man3/mq_receive.3:161 build/C/man3/mq_send.3:169 build/C/man3/mq_unlink.3:68
#, no-wrap
msgid "Interface"
msgstr ""

#. type: tbl table
#: build/C/man3/mq_close.3:66 build/C/man3/mq_getattr.3:143 build/C/man3/mq_notify.3:180 build/C/man3/mq_open.3:276 build/C/man3/mq_receive.3:161 build/C/man3/mq_send.3:169 build/C/man3/mq_unlink.3:68
#, no-wrap
msgid "Attribute"
msgstr ""

#. type: tbl table
#: build/C/man3/mq_close.3:66 build/C/man3/mq_getattr.3:143 build/C/man3/mq_notify.3:180 build/C/man3/mq_open.3:276 build/C/man3/mq_receive.3:161 build/C/man3/mq_send.3:169 build/C/man3/mq_unlink.3:68
#, no-wrap
msgid "Value"
msgstr ""

#. type: tbl table
#: build/C/man3/mq_close.3:69
#, no-wrap
msgid "B<mq_close>()"
msgstr ""

#. type: tbl table
#: build/C/man3/mq_close.3:69 build/C/man3/mq_getattr.3:147 build/C/man3/mq_notify.3:183 build/C/man3/mq_open.3:279 build/C/man3/mq_receive.3:165 build/C/man3/mq_send.3:173 build/C/man3/mq_unlink.3:71
#, no-wrap
msgid "Thread safety"
msgstr ""

#. type: tbl table
#: build/C/man3/mq_close.3:69 build/C/man3/mq_getattr.3:147 build/C/man3/mq_notify.3:183 build/C/man3/mq_open.3:279 build/C/man3/mq_receive.3:165 build/C/man3/mq_send.3:173 build/C/man3/mq_unlink.3:71
#, no-wrap
msgid "MT-Safe"
msgstr ""

#. type: SH
#: build/C/man3/mq_close.3:71 build/C/man3/mq_getattr.3:149 build/C/man2/mq_getsetattr.2:49 build/C/man3/mq_notify.3:186 build/C/man3/mq_open.3:281 build/C/man3/mq_receive.3:167 build/C/man3/mq_send.3:175 build/C/man3/mq_unlink.3:73 build/C/man2/msgctl.2:408 build/C/man2/msgget.2:191 build/C/man2/msgop.2:478
#, no-wrap
msgid "CONFORMING TO"
msgstr ""

#. type: Plain text
#: build/C/man3/mq_close.3:73 build/C/man3/mq_getattr.3:151 build/C/man3/mq_open.3:283 build/C/man3/mq_receive.3:169 build/C/man3/mq_send.3:177 build/C/man3/mq_unlink.3:75
msgid "POSIX.1-2001, POSIX.1-2008."
msgstr ""

#. type: SH
#: build/C/man3/mq_close.3:73 build/C/man3/mq_getattr.3:151 build/C/man2/mq_getsetattr.2:51 build/C/man3/mq_notify.3:188 build/C/man3/mq_open.3:283 build/C/man7/mq_overview.7:356 build/C/man3/mq_receive.3:169 build/C/man3/mq_send.3:177 build/C/man2/msgctl.2:411 build/C/man2/msgget.2:193 build/C/man2/msgop.2:490
#, no-wrap
msgid "NOTES"
msgstr ""

#. type: Plain text
#: build/C/man3/mq_close.3:77
msgid ""
"All open message queues are automatically closed on process termination, or "
"upon B<execve>(2)."
msgstr ""

#. type: SH
#: build/C/man3/mq_close.3:77 build/C/man3/mq_getattr.3:235 build/C/man2/mq_getsetattr.2:55 build/C/man3/mq_notify.3:277 build/C/man3/mq_open.3:305 build/C/man7/mq_overview.7:395 build/C/man3/mq_receive.3:175 build/C/man3/mq_send.3:183 build/C/man3/mq_unlink.3:75 build/C/man2/msgctl.2:450 build/C/man2/msgget.2:242 build/C/man2/msgop.2:714
#, no-wrap
msgid "SEE ALSO"
msgstr ""

#. type: Plain text
#: build/C/man3/mq_close.3:85
msgid ""
"B<mq_getattr>(3), B<mq_notify>(3), B<mq_open>(3), B<mq_receive>(3), "
"B<mq_send>(3), B<mq_unlink>(3), B<mq_overview>(7)"
msgstr ""

#. type: SH
#: build/C/man3/mq_close.3:85 build/C/man3/mq_getattr.3:243 build/C/man2/mq_getsetattr.2:58 build/C/man3/mq_notify.3:286 build/C/man3/mq_open.3:313 build/C/man7/mq_overview.7:409 build/C/man3/mq_receive.3:184 build/C/man3/mq_send.3:192 build/C/man3/mq_unlink.3:83 build/C/man2/msgctl.2:457 build/C/man2/msgget.2:250 build/C/man2/msgop.2:720
#, no-wrap
msgid "COLOPHON"
msgstr ""

#. type: Plain text
#: build/C/man3/mq_close.3:93 build/C/man3/mq_getattr.3:251 build/C/man2/mq_getsetattr.2:66 build/C/man3/mq_notify.3:294 build/C/man3/mq_open.3:321 build/C/man7/mq_overview.7:417 build/C/man3/mq_receive.3:192 build/C/man3/mq_send.3:200 build/C/man3/mq_unlink.3:91 build/C/man2/msgctl.2:465 build/C/man2/msgget.2:258 build/C/man2/msgop.2:728
msgid ""
"This page is part of release 5.10 of the Linux I<man-pages> project.  A "
"description of the project, information about reporting bugs, and the latest "
"version of this page, can be found at "
"\\%https://www.kernel.org/doc/man-pages/."
msgstr ""

#. type: TH
#: build/C/man3/mq_getattr.3:25
#, no-wrap
msgid "MQ_GETATTR"
msgstr ""

#. type: TH
#: build/C/man3/mq_getattr.3:25 build/C/man3/mq_notify.3:25 build/C/man7/mq_overview.7:25
#, no-wrap
msgid "2020-06-09"
msgstr ""

#. type: Plain text
#: build/C/man3/mq_getattr.3:28
msgid "mq_getattr, mq_setattr - get/set message queue attributes"
msgstr ""

#. type: Plain text
#: build/C/man3/mq_getattr.3:33
#, no-wrap
msgid "B<int mq_getattr(mqd_t >I<mqdes>B<, struct mq_attr *>I<attr>B<);>\n"
msgstr ""

#. type: Plain text
#: build/C/man3/mq_getattr.3:36
#, no-wrap
msgid ""
"B<int mq_setattr(mqd_t >I<mqdes>B<, const struct mq_attr *>I<newattr>B<,>\n"
"B<                 struct mq_attr *>I<oldattr>B<);>\n"
msgstr ""

#. type: Plain text
#: build/C/man3/mq_getattr.3:46
msgid ""
"B<mq_getattr>()  and B<mq_setattr>()  respectively retrieve and modify "
"attributes of the message queue referred to by the message queue descriptor "
"I<mqdes>."
msgstr ""

#. type: Plain text
#: build/C/man3/mq_getattr.3:53
msgid ""
"B<mq_getattr>()  returns an I<mq_attr> structure in the buffer pointed by "
"I<attr>.  This structure is defined as:"
msgstr ""

#. type: Plain text
#: build/C/man3/mq_getattr.3:62
#, no-wrap
msgid ""
"struct mq_attr {\n"
"    long mq_flags;       /* Flags: 0 or O_NONBLOCK */\n"
"    long mq_maxmsg;      /* Max. # of messages on queue */\n"
"    long mq_msgsize;     /* Max. message size (bytes) */\n"
"    long mq_curmsgs;     /* # of messages currently in queue */\n"
"};\n"
msgstr ""

#. type: Plain text
#: build/C/man3/mq_getattr.3:72
msgid ""
"The I<mq_flags> field contains flags associated with the open message queue "
"description.  This field is initialized when the queue is created by "
"B<mq_open>(3).  The only flag that can appear in this field is "
"B<O_NONBLOCK>."
msgstr ""

#. type: Plain text
#: build/C/man3/mq_getattr.3:93
msgid ""
"The I<mq_maxmsg> and I<mq_msgsize> fields are set when the message queue is "
"created by B<mq_open>(3).  The I<mq_maxmsg> field is an upper limit on the "
"number of messages that may be placed on the queue using B<mq_send>(3).  The "
"I<mq_msgsize> field is an upper limit on the size of messages that may be "
"placed on the queue.  Both of these fields must have a value greater than "
"zero.  Two I</proc> files that place ceilings on the values for these fields "
"are described in B<mq_overview>(7)."
msgstr ""

#. type: Plain text
#: build/C/man3/mq_getattr.3:97
msgid ""
"The I<mq_curmsgs> field returns the number of messages currently held in the "
"queue."
msgstr ""

#. type: Plain text
#: build/C/man3/mq_getattr.3:117
msgid ""
"B<mq_setattr>()  sets message queue attributes using information supplied in "
"the I<mq_attr> structure pointed to by I<newattr>.  The only attribute that "
"can be modified is the setting of the B<O_NONBLOCK> flag in I<mq_flags>.  "
"The other fields in I<newattr> are ignored.  If the I<oldattr> field is not "
"NULL, then the buffer that it points to is used to return an I<mq_attr> "
"structure that contains the same information that is returned by "
"B<mq_getattr>()."
msgstr ""

#. type: Plain text
#: build/C/man3/mq_getattr.3:125
msgid ""
"On success B<mq_getattr>()  and B<mq_setattr>()  return 0; on error, -1 is "
"returned, with I<errno> set to indicate the error."
msgstr ""

#. type: TP
#: build/C/man3/mq_getattr.3:131 build/C/man3/mq_notify.3:149 build/C/man3/mq_open.3:190 build/C/man3/mq_open.3:197 build/C/man3/mq_receive.3:136 build/C/man3/mq_send.3:144 build/C/man2/msgctl.2:368 build/C/man2/msgop.2:382 build/C/man2/msgop.2:432
#, no-wrap
msgid "B<EINVAL>"
msgstr ""

#. type: Plain text
#: build/C/man3/mq_getattr.3:136
msgid "I<newattr-E<gt>mq_flags> contained set bits other than B<O_NONBLOCK>."
msgstr ""

#. type: tbl table
#: build/C/man3/mq_getattr.3:147
#, no-wrap
msgid ""
"B<mq_getattr>(),\n"
"B<mq_setattr>()"
msgstr ""

#. type: Plain text
#: build/C/man3/mq_getattr.3:159
msgid ""
"On Linux, B<mq_getattr>()  and B<mq_setattr>()  are library functions "
"layered on top of the B<mq_getsetattr>(2)  system call."
msgstr ""

#. type: SH
#: build/C/man3/mq_getattr.3:159 build/C/man3/mq_notify.3:210 build/C/man7/mq_overview.7:392 build/C/man2/msgop.2:577
#, no-wrap
msgid "EXAMPLES"
msgstr ""

#. type: Plain text
#: build/C/man3/mq_getattr.3:170
msgid ""
"The program below can be used to show the default I<mq_maxmsg> and "
"I<mq_msgsize> values that are assigned to a message queue that is created "
"with a call to B<mq_open>(3)  in which the I<attr> argument is NULL.  Here "
"is an example run of the program:"
msgstr ""

#. type: Plain text
#: build/C/man3/mq_getattr.3:176
#, no-wrap
msgid ""
"$ B<./a.out /testq>\n"
"Maximum # of messages on queue:   10\n"
"Maximum message size:             8192\n"
msgstr ""

#. type: Plain text
#: build/C/man3/mq_getattr.3:184
msgid ""
"Since Linux 3.5, the following I</proc> files (described in "
"B<mq_overview>(7))  can be used to control the defaults:"
msgstr ""

#. type: Plain text
#: build/C/man3/mq_getattr.3:193
#, no-wrap
msgid ""
"$ B<uname -sr>\n"
"Linux 3.8.0\n"
"$ B<cat /proc/sys/fs/mqueue/msg_default>\n"
"10\n"
"$ B<cat /proc/sys/fs/mqueue/msgsize_default>\n"
"8192\n"
msgstr ""

#. type: SS
#: build/C/man3/mq_getattr.3:195 build/C/man3/mq_notify.3:216 build/C/man2/msgop.2:598
#, no-wrap
msgid "Program source"
msgstr ""

#. type: Plain text
#: build/C/man3/mq_getattr.3:204
#, no-wrap
msgid ""
"#include E<lt>mqueue.hE<gt>\n"
"#include E<lt>sys/stat.hE<gt>\n"
"#include E<lt>fcntl.hE<gt>\n"
"#include E<lt>stdio.hE<gt>\n"
"#include E<lt>stdlib.hE<gt>\n"
"#include E<lt>unistd.hE<gt>\n"
msgstr ""

#. type: Plain text
#: build/C/man3/mq_getattr.3:207
#, no-wrap
msgid ""
"#define errExit(msg)    do { perror(msg); exit(EXIT_FAILURE); \\e\n"
"                        } while (0)\n"
msgstr ""

#. type: Plain text
#: build/C/man3/mq_getattr.3:213
#, no-wrap
msgid ""
"int\n"
"main(int argc, char *argv[])\n"
"{\n"
"    mqd_t mqd;\n"
"    struct mq_attr attr;\n"
msgstr ""

#. type: Plain text
#: build/C/man3/mq_getattr.3:218
#, no-wrap
msgid ""
"    if (argc != 2) {\n"
"        fprintf(stderr, \"Usage: %s mq-name\\en\", argv[0]);\n"
"        exit(EXIT_FAILURE);\n"
"    }\n"
msgstr ""

#. type: Plain text
#: build/C/man3/mq_getattr.3:222
#, no-wrap
msgid ""
"    mqd = mq_open(argv[1], O_CREAT | O_EXCL, S_IRUSR | S_IWUSR, NULL);\n"
"    if (mqd == (mqd_t) -1)\n"
"        errExit(\"mq_open\");\n"
msgstr ""

#. type: Plain text
#: build/C/man3/mq_getattr.3:225
#, no-wrap
msgid ""
"    if (mq_getattr(mqd, &attr) == -1)\n"
"        errExit(\"mq_getattr\");\n"
msgstr ""

#. type: Plain text
#: build/C/man3/mq_getattr.3:228
#, no-wrap
msgid ""
"    printf(\"Maximum # of messages on queue:   %ld\\en\", attr.mq_maxmsg);\n"
"    printf(\"Maximum message size:             %ld\\en\", "
"attr.mq_msgsize);\n"
msgstr ""

#. type: Plain text
#: build/C/man3/mq_getattr.3:231
#, no-wrap
msgid ""
"    if (mq_unlink(argv[1]) == -1)\n"
"        errExit(\"mq_unlink\");\n"
msgstr ""

#. type: Plain text
#: build/C/man3/mq_getattr.3:234 build/C/man2/msgop.2:713
#, no-wrap
msgid ""
"    exit(EXIT_SUCCESS);\n"
"}\n"
msgstr ""

#. type: Plain text
#: build/C/man3/mq_getattr.3:243
msgid ""
"B<mq_close>(3), B<mq_notify>(3), B<mq_open>(3), B<mq_receive>(3), "
"B<mq_send>(3), B<mq_unlink>(3), B<mq_overview>(7)"
msgstr ""

#. type: TH
#: build/C/man2/mq_getsetattr.2:25
#, no-wrap
msgid "MQ_GETSETATTR"
msgstr ""

#. type: Plain text
#: build/C/man2/mq_getsetattr.2:28
msgid "mq_getsetattr - get/set message queue attributes"
msgstr ""

#. type: Plain text
#: build/C/man2/mq_getsetattr.2:32
#, no-wrap
msgid ""
"B<#include E<lt>sys/types.hE<gt>>\n"
"B<#include E<lt>mqueue.hE<gt>>\n"
msgstr ""

#. type: Plain text
#: build/C/man2/mq_getsetattr.2:35
#, no-wrap
msgid ""
"B<int mq_getsetattr(mqd_t >I<mqdes>B<, const struct mq_attr "
"*>I<newattr>B<,>\n"
"B<                 struct mq_attr *>I<oldattr>B<);>\n"
msgstr ""

#. type: Plain text
#: build/C/man2/mq_getsetattr.2:39
msgid "I<Note>: There is no glibc wrapper for this system call; see NOTES."
msgstr ""

#. type: Plain text
#: build/C/man2/mq_getsetattr.2:41
msgid "Do not use this system call."
msgstr ""

#. type: Plain text
#: build/C/man2/mq_getsetattr.2:49
msgid ""
"This is the low-level system call used to implement B<mq_getattr>(3)  and "
"B<mq_setattr>(3).  For an explanation of how this system call operates, see "
"the description of B<mq_setattr>(3)."
msgstr ""

#. type: Plain text
#: build/C/man2/mq_getsetattr.2:51
msgid "This interface is nonstandard; avoid its use."
msgstr ""

#. type: Plain text
#: build/C/man2/mq_getsetattr.2:55
msgid ""
"Glibc does not provide a wrapper for this system call; call it using "
"B<syscall>(2).  (Actually, never call it unless you are writing a C "
"library!)"
msgstr ""

#. type: Plain text
#: build/C/man2/mq_getsetattr.2:58
msgid "B<mq_getattr>(3), B<mq_overview>(7)"
msgstr ""

#. type: TH
#: build/C/man3/mq_notify.3:25
#, no-wrap
msgid "MQ_NOTIFY"
msgstr ""

#. type: Plain text
#: build/C/man3/mq_notify.3:28
msgid "mq_notify - register for notification when a message is available"
msgstr ""

#. type: Plain text
#: build/C/man3/mq_notify.3:33
#, no-wrap
msgid "B<int mq_notify(mqd_t >I<mqdes>B<, const struct sigevent *>I<sevp>B<);>\n"
msgstr ""

#. type: Plain text
#: build/C/man3/mq_notify.3:42
msgid ""
"B<mq_notify>()  allows the calling process to register or unregister for "
"delivery of an asynchronous notification when a new message arrives on the "
"empty message queue referred to by the message queue descriptor I<mqdes>."
msgstr ""

#. type: Plain text
#: build/C/man3/mq_notify.3:50
msgid ""
"The I<sevp> argument is a pointer to a I<sigevent> structure.  For the "
"definition and general details of this structure, see B<sigevent>(7)."
msgstr ""

#. type: Plain text
#: build/C/man3/mq_notify.3:64
msgid ""
"If I<sevp> is a non-null pointer, then B<mq_notify>()  registers the calling "
"process to receive message notification.  The I<sigev_notify> field of the "
"I<sigevent> structure to which I<sevp> points specifies how notification is "
"to be performed.  This field has one of the following values:"
msgstr ""

#. type: TP
#: build/C/man3/mq_notify.3:64
#, no-wrap
msgid "B<SIGEV_NONE>"
msgstr ""

#.  When is SIGEV_NONE useful?
#. type: Plain text
#: build/C/man3/mq_notify.3:69
msgid ""
"A \"null\" notification: the calling process is registered as the target for "
"notification, but when a message arrives, no notification is sent."
msgstr ""

#. type: TP
#: build/C/man3/mq_notify.3:69
#, no-wrap
msgid "B<SIGEV_SIGNAL>"
msgstr ""

#.  I don't know of other implementations that set
#.  si_pid and si_uid -- MTK
#. type: Plain text
#: build/C/man3/mq_notify.3:89
msgid ""
"Notify the process by sending the signal specified in I<sigev_signo>.  See "
"B<sigevent>(7)  for general details.  The I<si_code> field of the "
"I<siginfo_t> structure will be set to B<SI_MESGQ>.  In addition, I<si_pid> "
"will be set to the PID of the process that sent the message, and I<si_uid> "
"will be set to the real user ID of the sending process."
msgstr ""

#. type: TP
#: build/C/man3/mq_notify.3:89
#, no-wrap
msgid "B<SIGEV_THREAD>"
msgstr ""

#. type: Plain text
#: build/C/man3/mq_notify.3:97
msgid ""
"Upon message delivery, invoke I<sigev_notify_function> as if it were the "
"start function of a new thread.  See B<sigevent>(7)  for details."
msgstr ""

#. type: Plain text
#: build/C/man3/mq_notify.3:100
msgid ""
"Only one process can be registered to receive notification from a message "
"queue."
msgstr ""

#. type: Plain text
#: build/C/man3/mq_notify.3:107
msgid ""
"If I<sevp> is NULL, and the calling process is currently registered to "
"receive notifications for this message queue, then the registration is "
"removed; another process can then register to receive a message notification "
"for this queue."
msgstr ""

#. type: Plain text
#: build/C/man3/mq_notify.3:114
msgid ""
"Message notification occurs only when a new message arrives and the queue "
"was previously empty.  If the queue was not empty at the time B<mq_notify>()  "
"was called, then a notification will occur only after the queue is emptied "
"and a new message arrives."
msgstr ""

#. type: Plain text
#: build/C/man3/mq_notify.3:122
msgid ""
"If another process or thread is waiting to read a message from an empty "
"queue using B<mq_receive>(3), then any message notification registration is "
"ignored: the message is delivered to the process or thread calling "
"B<mq_receive>(3), and the message notification registration remains in "
"effect."
msgstr ""

#. type: Plain text
#: build/C/man3/mq_notify.3:133
msgid ""
"Notification occurs once: after a notification is delivered, the "
"notification registration is removed, and another process can register for "
"message notification.  If the notified process wishes to receive the next "
"notification, it can use B<mq_notify>()  to request a further notification.  "
"This should be done before emptying all unread messages from the queue.  "
"(Placing the queue in nonblocking mode is useful for emptying the queue of "
"messages without blocking once it is empty.)"
msgstr ""

#. type: Plain text
#: build/C/man3/mq_notify.3:139
msgid ""
"On success B<mq_notify>()  returns 0; on error, -1 is returned, with "
"I<errno> set to indicate the error."
msgstr ""

#. type: TP
#: build/C/man3/mq_notify.3:145
#, no-wrap
msgid "B<EBUSY>"
msgstr ""

#. type: Plain text
#: build/C/man3/mq_notify.3:149
msgid ""
"Another process has already registered to receive notification for this "
"message queue."
msgstr ""

#. type: Plain text
#: build/C/man3/mq_notify.3:159
msgid ""
"I<sevp-E<gt>sigev_notify> is not one of the permitted values; or "
"I<sevp-E<gt>sigev_notify> is B<SIGEV_SIGNAL> and I<sevp-E<gt>sigev_signo> is "
"not a valid signal number."
msgstr ""

#. type: TP
#: build/C/man3/mq_notify.3:159 build/C/man3/mq_open.3:259 build/C/man2/msgget.2:181 build/C/man2/msgop.2:393
#, no-wrap
msgid "B<ENOMEM>"
msgstr ""

#. type: Plain text
#: build/C/man3/mq_notify.3:162 build/C/man3/mq_open.3:262
msgid "Insufficient memory."
msgstr ""

#.  Linux does not do this
#. type: Plain text
#: build/C/man3/mq_notify.3:173
msgid ""
"POSIX.1-2008 says that an implementation I<may> generate an B<EINVAL> error "
"if I<sevp> is NULL, and the caller is not currently registered to receive "
"notifications for the queue I<mqdes>."
msgstr ""

#. type: tbl table
#: build/C/man3/mq_notify.3:183
#, no-wrap
msgid "B<mq_notify>()"
msgstr ""

#. type: Plain text
#: build/C/man3/mq_notify.3:188
msgid "POSIX.1-2001."
msgstr ""

#. type: SS
#: build/C/man3/mq_notify.3:190 build/C/man3/mq_open.3:284
#, no-wrap
msgid "C library/kernel differences"
msgstr ""

#. type: Plain text
#: build/C/man3/mq_notify.3:210
msgid ""
"In the glibc implementation, the B<mq_notify>()  library function is "
"implemented on top of the system call of the same name.  When I<sevp> is "
"NULL, or specifies a notification mechanism other than B<SIGEV_THREAD>, the "
"library function directly invokes the system call.  For B<SIGEV_THREAD>, "
"much of the implementation resides within the library, rather than the "
"kernel.  (This is necessarily so, since the thread involved in handling the "
"notification is one that must be managed by the C library POSIX threads "
"implementation.)  The implementation involves the use of a raw B<netlink>(7)  "
"socket and creates a new thread for each notification that is delivered to "
"the process."
msgstr ""

#. type: Plain text
#: build/C/man3/mq_notify.3:216
msgid ""
"The following program registers a notification request for the message queue "
"named in its command-line argument.  Notification is performed by creating a "
"thread.  The thread executes a function which reads one message from the "
"queue and then terminates the process."
msgstr ""

#. type: Plain text
#: build/C/man3/mq_notify.3:223
#, no-wrap
msgid ""
"#include E<lt>pthread.hE<gt>\n"
"#include E<lt>mqueue.hE<gt>\n"
"#include E<lt>stdio.hE<gt>\n"
"#include E<lt>stdlib.hE<gt>\n"
"#include E<lt>unistd.hE<gt>\n"
msgstr ""

#. type: Plain text
#: build/C/man3/mq_notify.3:226
#, no-wrap
msgid ""
"#define handle_error(msg) \\e\n"
"    do { perror(msg); exit(EXIT_FAILURE); } while (0)\n"
msgstr ""

#. type: Plain text
#: build/C/man3/mq_notify.3:234
#, no-wrap
msgid ""
"static void                     /* Thread start function */\n"
"tfunc(union sigval sv)\n"
"{\n"
"    struct mq_attr attr;\n"
"    ssize_t nr;\n"
"    void *buf;\n"
"    mqd_t mqdes = *((mqd_t *) sv.sival_ptr);\n"
msgstr ""

#. type: Plain text
#: build/C/man3/mq_notify.3:236
#, no-wrap
msgid "    /* Determine max. msg size; allocate buffer to receive msg */\n"
msgstr ""

#. type: Plain text
#: build/C/man3/mq_notify.3:242
#, no-wrap
msgid ""
"    if (mq_getattr(mqdes, &attr) == -1)\n"
"        handle_error(\"mq_getattr\");\n"
"    buf = malloc(attr.mq_msgsize);\n"
"    if (buf == NULL)\n"
"        handle_error(\"malloc\");\n"
msgstr ""

#. type: Plain text
#: build/C/man3/mq_notify.3:246
#, no-wrap
msgid ""
"    nr = mq_receive(mqdes, buf, attr.mq_msgsize, NULL);\n"
"    if (nr == -1)\n"
"        handle_error(\"mq_receive\");\n"
msgstr ""

#. type: Plain text
#: build/C/man3/mq_notify.3:251
#, no-wrap
msgid ""
"    printf(\"Read %zd bytes from MQ\\en\", nr);\n"
"    free(buf);\n"
"    exit(EXIT_SUCCESS);         /* Terminate the process */\n"
"}\n"
msgstr ""

#. type: Plain text
#: build/C/man3/mq_notify.3:257
#, no-wrap
msgid ""
"int\n"
"main(int argc, char *argv[])\n"
"{\n"
"    mqd_t mqdes;\n"
"    struct sigevent sev;\n"
msgstr ""

#. type: Plain text
#: build/C/man3/mq_notify.3:262
#, no-wrap
msgid ""
"    if (argc != 2) {\n"
"        fprintf(stderr, \"Usage: %s E<lt>mq-nameE<gt>\\en\", argv[0]);\n"
"        exit(EXIT_FAILURE);\n"
"    }\n"
msgstr ""

#. type: Plain text
#: build/C/man3/mq_notify.3:266
#, no-wrap
msgid ""
"    mqdes = mq_open(argv[1], O_RDONLY);\n"
"    if (mqdes == (mqd_t) -1)\n"
"        handle_error(\"mq_open\");\n"
msgstr ""

#. type: Plain text
#: build/C/man3/mq_notify.3:273
#, no-wrap
msgid ""
"    sev.sigev_notify = SIGEV_THREAD;\n"
"    sev.sigev_notify_function = tfunc;\n"
"    sev.sigev_notify_attributes = NULL;\n"
"    sev.sigev_value.sival_ptr = &mqdes;   /* Arg. to thread func. */\n"
"    if (mq_notify(mqdes, &sev) == -1)\n"
"        handle_error(\"mq_notify\");\n"
msgstr ""

#. type: Plain text
#: build/C/man3/mq_notify.3:276
#, no-wrap
msgid ""
"    pause();    /* Process will be terminated by thread function */\n"
"}\n"
msgstr ""

#. type: Plain text
#: build/C/man3/mq_notify.3:286
msgid ""
"B<mq_close>(3), B<mq_getattr>(3), B<mq_open>(3), B<mq_receive>(3), "
"B<mq_send>(3), B<mq_unlink>(3), B<mq_overview>(7), B<sigevent>(7)"
msgstr ""

#. type: TH
#: build/C/man3/mq_open.3:25
#, no-wrap
msgid "MQ_OPEN"
msgstr ""

#. type: Plain text
#: build/C/man3/mq_open.3:28
msgid "mq_open - open a message queue"
msgstr ""

#. type: Plain text
#: build/C/man3/mq_open.3:33
#, no-wrap
msgid ""
"B<#include E<lt>fcntl.hE<gt>>           /* For O_* constants */\n"
"B<#include E<lt>sys/stat.hE<gt>>        /* For mode constants */\n"
"B<#include E<lt>mqueue.hE<gt>>\n"
msgstr ""

#. type: Plain text
#: build/C/man3/mq_open.3:37
#, no-wrap
msgid ""
"B<mqd_t mq_open(const char *>I<name>B<, int >I<oflag>B<);>\n"
"B<mqd_t mq_open(const char *>I<name>B<, int >I<oflag>B<, mode_t "
">I<mode>B<,>\n"
"B<              struct mq_attr *>I<attr>B<);>\n"
msgstr ""

#. type: Plain text
#: build/C/man3/mq_open.3:49
msgid ""
"B<mq_open>()  creates a new POSIX message queue or opens an existing queue.  "
"The queue is identified by I<name>.  For details of the construction of "
"I<name>, see B<mq_overview>(7)."
msgstr ""

#. type: Plain text
#: build/C/man3/mq_open.3:57
msgid ""
"The I<oflag> argument specifies flags that control the operation of the "
"call.  (Definitions of the flags values can be obtained by including "
"I<E<lt>fcntl.hE<gt>>.)  Exactly one of the following must be specified in "
"I<oflag>:"
msgstr ""

#. type: TP
#: build/C/man3/mq_open.3:57
#, no-wrap
msgid "B<O_RDONLY>"
msgstr ""

#. type: Plain text
#: build/C/man3/mq_open.3:60
msgid "Open the queue to receive messages only."
msgstr ""

#. type: TP
#: build/C/man3/mq_open.3:60
#, no-wrap
msgid "B<O_WRONLY>"
msgstr ""

#. type: Plain text
#: build/C/man3/mq_open.3:63
msgid "Open the queue to send messages only."
msgstr ""

#. type: TP
#: build/C/man3/mq_open.3:63
#, no-wrap
msgid "B<O_RDWR>"
msgstr ""

#. type: Plain text
#: build/C/man3/mq_open.3:66
msgid "Open the queue to both send and receive messages."
msgstr ""

#. type: Plain text
#: build/C/man3/mq_open.3:71
msgid "Zero or more of the following flags can additionally be I<OR>ed in I<oflag>:"
msgstr ""

#. type: TP
#: build/C/man3/mq_open.3:71
#, no-wrap
msgid "B<O_CLOEXEC> (since Linux 2.6.26)"
msgstr ""

#.  commit 269f21344b23e552c21c9e2d7ca258479dcd7a0a
#. type: Plain text
#: build/C/man3/mq_open.3:78
msgid ""
"Set the close-on-exec flag for the message queue descriptor.  See B<open>(2)  "
"for a discussion of why this flag is useful."
msgstr ""

#. type: TP
#: build/C/man3/mq_open.3:78
#, no-wrap
msgid "B<O_CREAT>"
msgstr ""

#.  In reality the filesystem IDs are used on Linux.
#. type: Plain text
#: build/C/man3/mq_open.3:86
msgid ""
"Create the message queue if it does not exist.  The owner (user ID) of the "
"message queue is set to the effective user ID of the calling process.  The "
"group ownership (group ID) is set to the effective group ID of the calling "
"process."
msgstr ""

#. type: TP
#: build/C/man3/mq_open.3:86
#, no-wrap
msgid "B<O_EXCL>"
msgstr ""

#. type: Plain text
#: build/C/man3/mq_open.3:96
msgid ""
"If B<O_CREAT> was specified in I<oflag>, and a queue with the given I<name> "
"already exists, then fail with the error B<EEXIST>."
msgstr ""

#. type: TP
#: build/C/man3/mq_open.3:96
#, no-wrap
msgid "B<O_NONBLOCK>"
msgstr ""

#. type: Plain text
#: build/C/man3/mq_open.3:105
msgid ""
"Open the queue in nonblocking mode.  In circumstances where B<mq_receive>(3)  "
"and B<mq_send>(3)  would normally block, these functions instead fail with "
"the error B<EAGAIN>."
msgstr ""

#. type: Plain text
#: build/C/man3/mq_open.3:119
msgid ""
"If B<O_CREAT> is specified in I<oflag>, then two additional arguments must "
"be supplied.  The I<mode> argument specifies the permissions to be placed on "
"the new queue, as for B<open>(2).  (Symbolic definitions for the permissions "
"bits can be obtained by including I<E<lt>sys/stat.hE<gt>>.)  The permissions "
"settings are masked against the process umask."
msgstr ""

#. type: Plain text
#: build/C/man3/mq_open.3:127
msgid ""
"The fields of the I<struct mq_attr> pointed to I<attr> specify the maximum "
"number of messages and the maximum size of messages that the queue will "
"allow.  This structure is defined as follows:"
msgstr ""

#. type: Plain text
#: build/C/man3/mq_open.3:137
#, no-wrap
msgid ""
"struct mq_attr {\n"
"    long mq_flags;       /* Flags (ignored for mq_open()) */\n"
"    long mq_maxmsg;      /* Max. # of messages on queue */\n"
"    long mq_msgsize;     /* Max. message size (bytes) */\n"
"    long mq_curmsgs;     /* # of messages currently in queue\n"
"                            (ignored for mq_open()) */\n"
"};\n"
msgstr ""

#. type: Plain text
#: build/C/man3/mq_open.3:147
msgid ""
"Only the I<mq_maxmsg> and I<mq_msgsize> fields are employed when calling "
"B<mq_open>(); the values in the remaining fields are ignored."
msgstr ""

#. type: Plain text
#: build/C/man3/mq_open.3:157
msgid ""
"If I<attr> is NULL, then the queue is created with implementation-defined "
"default attributes.  Since Linux 3.5, two I</proc> files can be used to "
"control these defaults; see B<mq_overview>(7)  for details."
msgstr ""

#. type: Plain text
#: build/C/man3/mq_open.3:169
msgid ""
"On success, B<mq_open>()  returns a message queue descriptor for use by "
"other message queue functions.  On error, B<mq_open>()  returns I<(mqd_t)\\ "
"-1>, with I<errno> set to indicate the error."
msgstr ""

#. type: TP
#: build/C/man3/mq_open.3:170 build/C/man3/mq_open.3:174 build/C/man3/mq_unlink.3:50 build/C/man2/msgctl.2:341 build/C/man2/msgget.2:156 build/C/man2/msgop.2:357 build/C/man2/msgop.2:412
#, no-wrap
msgid "B<EACCES>"
msgstr ""

#. type: Plain text
#: build/C/man3/mq_open.3:174
msgid ""
"The queue exists, but the caller does not have permission to open it in the "
"specified mode."
msgstr ""

#.  Note that this isn't consistent with the same case for sem_open()
#. type: Plain text
#: build/C/man3/mq_open.3:179
msgid "I<name> contained more than one slash."
msgstr ""

#. type: TP
#: build/C/man3/mq_open.3:179 build/C/man2/msgget.2:164
#, no-wrap
msgid "B<EEXIST>"
msgstr ""

#. type: Plain text
#: build/C/man3/mq_open.3:190
msgid ""
"Both B<O_CREAT> and B<O_EXCL> were specified in I<oflag>, but a queue with "
"this I<name> already exists."
msgstr ""

#.  glibc checks whether the name starts with a "/" and if not,
#.  gives this error
#. type: Plain text
#: build/C/man3/mq_open.3:197
msgid "I<name> doesn't follow the format in B<mq_overview>(7)."
msgstr ""

#. type: Plain text
#: build/C/man3/mq_open.3:229
msgid ""
"B<O_CREAT> was specified in I<oflag>, and I<attr> was not NULL, but "
"I<attr-E<gt>mq_maxmsg> or I<attr-E<gt>mq_msqsize> was invalid.  Both of "
"these fields must be greater than zero.  In a process that is unprivileged "
"(does not have the B<CAP_SYS_RESOURCE> capability), I<attr-E<gt>mq_maxmsg> "
"must be less than or equal to the I<msg_max> limit, and "
"I<attr-E<gt>mq_msgsize> must be less than or equal to the I<msgsize_max> "
"limit.  In addition, even in a privileged process, I<attr-E<gt>mq_maxmsg> "
"cannot exceed the B<HARD_MAX> limit.  (See B<mq_overview>(7)  for details of "
"these limits.)"
msgstr ""

#. type: TP
#: build/C/man3/mq_open.3:229
#, no-wrap
msgid "B<EMFILE>"
msgstr ""

#. type: Plain text
#: build/C/man3/mq_open.3:237
msgid ""
"The per-process limit on the number of open file and message queue "
"descriptors has been reached (see the description of B<RLIMIT_NOFILE> in "
"B<getrlimit>(2))."
msgstr ""

#. type: TP
#: build/C/man3/mq_open.3:237 build/C/man3/mq_unlink.3:53
#, no-wrap
msgid "B<ENAMETOOLONG>"
msgstr ""

#. type: Plain text
#: build/C/man3/mq_open.3:241 build/C/man3/mq_unlink.3:57
msgid "I<name> was too long."
msgstr ""

#. type: TP
#: build/C/man3/mq_open.3:241
#, no-wrap
msgid "B<ENFILE>"
msgstr ""

#. type: Plain text
#: build/C/man3/mq_open.3:245
msgid ""
"The system-wide limit on the total number of open files and message queues "
"has been reached."
msgstr ""

#. type: TP
#: build/C/man3/mq_open.3:245 build/C/man3/mq_open.3:254 build/C/man3/mq_unlink.3:57 build/C/man2/msgget.2:173
#, no-wrap
msgid "B<ENOENT>"
msgstr ""

#. type: Plain text
#: build/C/man3/mq_open.3:254
msgid ""
"The B<O_CREAT> flag was not specified in I<oflag>, and no queue with this "
"I<name> exists."
msgstr ""

#.  Note that this isn't consistent with the same case for sem_open()
#. type: Plain text
#: build/C/man3/mq_open.3:259
msgid "I<name> was just \"/\" followed by no other characters."
msgstr ""

#. type: TP
#: build/C/man3/mq_open.3:262 build/C/man2/msgget.2:185
#, no-wrap
msgid "B<ENOSPC>"
msgstr ""

#. type: Plain text
#: build/C/man3/mq_open.3:269
msgid ""
"Insufficient space for the creation of a new message queue.  This probably "
"occurred because the I<queues_max> limit was encountered; see "
"B<mq_overview>(7)."
msgstr ""

#. type: tbl table
#: build/C/man3/mq_open.3:279
#, no-wrap
msgid "B<mq_open>()"
msgstr ""

#. type: Plain text
#: build/C/man3/mq_open.3:301
msgid ""
"The B<mq_open>()  library function is implemented on top of a system call of "
"the same name.  The library function performs the check that the I<name> "
"starts with a slash (/), giving the B<EINVAL> error if it does not.  The "
"kernel system call expects I<name> to contain no preceding slash, so the C "
"library function passes I<name> without the preceding slash (i.e., "
"I<name+1>)  to the system call."
msgstr ""

#. type: SH
#: build/C/man3/mq_open.3:301 build/C/man7/mq_overview.7:369 build/C/man2/msgget.2:236 build/C/man2/msgop.2:541
#, no-wrap
msgid "BUGS"
msgstr ""

#. type: Plain text
#: build/C/man3/mq_open.3:305
msgid ""
"In kernels before 2.6.14, the process umask was not applied to the "
"permissions specified in I<mode>."
msgstr ""

#. type: Plain text
#: build/C/man3/mq_open.3:313
msgid ""
"B<mq_close>(3), B<mq_getattr>(3), B<mq_notify>(3), B<mq_receive>(3), "
"B<mq_send>(3), B<mq_unlink>(3), B<mq_overview>(7)"
msgstr ""

#. type: TH
#: build/C/man7/mq_overview.7:25
#, no-wrap
msgid "MQ_OVERVIEW"
msgstr ""

#. type: Plain text
#: build/C/man7/mq_overview.7:28
msgid "mq_overview - overview of POSIX message queues"
msgstr ""

#. type: Plain text
#: build/C/man7/mq_overview.7:36
msgid ""
"POSIX message queues allow processes to exchange data in the form of "
"messages.  This API is distinct from that provided by System V message "
"queues (B<msgget>(2), B<msgsnd>(2), B<msgrcv>(2), etc.), but provides "
"similar functionality."
msgstr ""

#. type: Plain text
#: build/C/man7/mq_overview.7:51
msgid ""
"Message queues are created and opened using B<mq_open>(3); this function "
"returns a I<message queue descriptor> (I<mqd_t>), which is used to refer to "
"the open message queue in later calls.  Each message queue is identified by "
"a name of the form I</somename>; that is, a null-terminated string of up to "
"B<NAME_MAX> (i.e., 255) characters consisting of an initial slash, followed "
"by one or more characters, none of which are slashes.  Two processes can "
"operate on the same queue by passing the same name to B<mq_open>(3)."
msgstr ""

#. type: Plain text
#: build/C/man7/mq_overview.7:67
msgid ""
"Messages are transferred to and from a queue using B<mq_send>(3)  and "
"B<mq_receive>(3).  When a process has finished using the queue, it closes it "
"using B<mq_close>(3), and when the queue is no longer required, it can be "
"deleted using B<mq_unlink>(3).  Queue attributes can be retrieved and (in "
"some cases) modified using B<mq_getattr>(3)  and B<mq_setattr>(3).  A "
"process can request asynchronous notification of the arrival of a message on "
"a previously empty queue using B<mq_notify>(3)."
msgstr ""

#. type: Plain text
#: build/C/man7/mq_overview.7:80
msgid ""
"A message queue descriptor is a reference to an I<open message queue "
"description> (see B<open>(2)).  After a B<fork>(2), a child inherits copies "
"of its parent's message queue descriptors, and these descriptors refer to "
"the same open message queue descriptions as the corresponding message queue "
"descriptors in the parent.  Corresponding message queue descriptors in the "
"two processes share the flags (I<mq_flags>)  that are associated with the "
"open message queue description."
msgstr ""

#. type: Plain text
#: build/C/man7/mq_overview.7:93
msgid ""
"Each message has an associated I<priority>, and messages are always "
"delivered to the receiving process highest priority first.  Message "
"priorities range from 0 (low) to I<sysconf(_SC_MQ_PRIO_MAX)\\ -\\ 1> "
"(high).  On Linux, I<sysconf(_SC_MQ_PRIO_MAX)> returns 32768, but POSIX.1 "
"requires only that an implementation support at least priorities in the "
"range 0 to 31; some implementations provide only this range."
msgstr ""

#. type: Plain text
#: build/C/man7/mq_overview.7:96
msgid ""
"The remainder of this section describes some specific details of the Linux "
"implementation of POSIX message queues."
msgstr ""

#. type: SS
#: build/C/man7/mq_overview.7:96
#, no-wrap
msgid "Library interfaces and system calls"
msgstr ""

#. type: Plain text
#: build/C/man7/mq_overview.7:102
msgid ""
"In most cases the B<mq_*>()  library interfaces listed above are implemented "
"on top of underlying system calls of the same name.  Deviations from this "
"scheme are indicated in the following table:"
msgstr ""

#. type: tbl table
#: build/C/man7/mq_overview.7:106
#, no-wrap
msgid "Library interface"
msgstr ""

#. type: tbl table
#: build/C/man7/mq_overview.7:106
#, no-wrap
msgid "System call"
msgstr ""

#. type: tbl table
#: build/C/man7/mq_overview.7:107
#, no-wrap
msgid "mq_close(3)"
msgstr ""

#. type: tbl table
#: build/C/man7/mq_overview.7:107
#, no-wrap
msgid "close(2)"
msgstr ""

#. type: tbl table
#: build/C/man7/mq_overview.7:108
#, no-wrap
msgid "mq_getattr(3)"
msgstr ""

#. type: tbl table
#: build/C/man7/mq_overview.7:108 build/C/man7/mq_overview.7:113
#, no-wrap
msgid "mq_getsetattr(2)"
msgstr ""

#. type: tbl table
#: build/C/man7/mq_overview.7:109
#, no-wrap
msgid "mq_notify(3)"
msgstr ""

#. type: tbl table
#: build/C/man7/mq_overview.7:109
#, no-wrap
msgid "mq_notify(2)"
msgstr ""

#. type: tbl table
#: build/C/man7/mq_overview.7:110
#, no-wrap
msgid "mq_open(3)"
msgstr ""

#. type: tbl table
#: build/C/man7/mq_overview.7:110
#, no-wrap
msgid "mq_open(2)"
msgstr ""

#. type: tbl table
#: build/C/man7/mq_overview.7:111
#, no-wrap
msgid "mq_receive(3)"
msgstr ""

#. type: tbl table
#: build/C/man7/mq_overview.7:111 build/C/man7/mq_overview.7:114
#, no-wrap
msgid "mq_timedreceive(2)"
msgstr ""

#. type: tbl table
#: build/C/man7/mq_overview.7:112
#, no-wrap
msgid "mq_send(3)"
msgstr ""

#. type: tbl table
#: build/C/man7/mq_overview.7:112 build/C/man7/mq_overview.7:115
#, no-wrap
msgid "mq_timedsend(2)"
msgstr ""

#. type: tbl table
#: build/C/man7/mq_overview.7:113
#, no-wrap
msgid "mq_setattr(3)"
msgstr ""

#. type: tbl table
#: build/C/man7/mq_overview.7:114
#, no-wrap
msgid "mq_timedreceive(3)"
msgstr ""

#. type: tbl table
#: build/C/man7/mq_overview.7:115
#, no-wrap
msgid "mq_timedsend(3)"
msgstr ""

#. type: tbl table
#: build/C/man7/mq_overview.7:116
#, no-wrap
msgid "mq_unlink(3)"
msgstr ""

#. type: tbl table
#: build/C/man7/mq_overview.7:116
#, no-wrap
msgid "mq_unlink(2)"
msgstr ""

#. type: SS
#: build/C/man7/mq_overview.7:119
#, no-wrap
msgid "Versions"
msgstr ""

#. type: Plain text
#: build/C/man7/mq_overview.7:122
msgid ""
"POSIX message queues have been supported on Linux since kernel 2.6.6.  Glibc "
"support has been provided since version 2.3.4."
msgstr ""

#. type: SS
#: build/C/man7/mq_overview.7:122
#, no-wrap
msgid "Kernel configuration"
msgstr ""

#. type: Plain text
#: build/C/man7/mq_overview.7:127
msgid ""
"Support for POSIX message queues is configurable via the "
"B<CONFIG_POSIX_MQUEUE> kernel configuration option.  This option is enabled "
"by default."
msgstr ""

#. type: SS
#: build/C/man7/mq_overview.7:127
#, no-wrap
msgid "Persistence"
msgstr ""

#. type: Plain text
#: build/C/man7/mq_overview.7:132
msgid ""
"POSIX message queues have kernel persistence: if not removed by "
"B<mq_unlink>(3), a message queue will exist until the system is shut down."
msgstr ""

#. type: SS
#: build/C/man7/mq_overview.7:132
#, no-wrap
msgid "Linking"
msgstr ""

#. type: Plain text
#: build/C/man7/mq_overview.7:137
msgid ""
"Programs using the POSIX message queue API must be compiled with I<cc -lrt> "
"to link against the real-time library, I<librt>."
msgstr ""

#. type: SS
#: build/C/man7/mq_overview.7:137
#, no-wrap
msgid "/proc interfaces"
msgstr ""

#. type: Plain text
#: build/C/man7/mq_overview.7:141
msgid ""
"The following interfaces can be used to limit the amount of kernel memory "
"consumed by POSIX message queues and to set the default attributes for new "
"message queues:"
msgstr ""

#. type: TP
#: build/C/man7/mq_overview.7:141
#, no-wrap
msgid "I</proc/sys/fs/mqueue/msg_default> (since Linux 3.5)"
msgstr ""

#. type: Plain text
#: build/C/man7/mq_overview.7:165
msgid ""
"This file defines the value used for a new queue's I<mq_maxmsg> setting when "
"the queue is created with a call to B<mq_open>(3)  where I<attr> is "
"specified as NULL.  The default value for this file is 10.  The minimum and "
"maximum are as for I</proc/sys/fs/mqueue/msg_max>.  A new queue's default "
"I<mq_maxmsg> value will be the smaller of I<msg_default> and I<msg_max>.  Up "
"until Linux 2.6.28, the default I<mq_maxmsg> was 10; from Linux 2.6.28 to "
"Linux 3.4, the default was the value defined for the I<msg_max> limit."
msgstr ""

#. type: TP
#: build/C/man7/mq_overview.7:165
#, no-wrap
msgid "I</proc/sys/fs/mqueue/msg_max>"
msgstr ""

#. type: Plain text
#: build/C/man7/mq_overview.7:186
msgid ""
"This file can be used to view and change the ceiling value for the maximum "
"number of messages in a queue.  This value acts as a ceiling on the "
"I<attr-E<gt>mq_maxmsg> argument given to B<mq_open>(3).  The default value "
"for I<msg_max> is 10.  The minimum value is 1 (10 in kernels before "
"2.6.28).  The upper limit is B<HARD_MSGMAX>.  The I<msg_max> limit is "
"ignored for privileged processes (B<CAP_SYS_RESOURCE>), but the "
"B<HARD_MSGMAX> ceiling is nevertheless imposed."
msgstr ""

#. type: Plain text
#: build/C/man7/mq_overview.7:190
msgid "The definition of B<HARD_MSGMAX> has changed across kernel versions:"
msgstr ""

#. type: IP
#: build/C/man7/mq_overview.7:191 build/C/man7/mq_overview.7:194 build/C/man7/mq_overview.7:197 build/C/man7/mq_overview.7:245 build/C/man7/mq_overview.7:248 build/C/man7/mq_overview.7:250
#, no-wrap
msgid "*"
msgstr ""

#. type: Plain text
#: build/C/man7/mq_overview.7:194
msgid "Up to Linux 2.6.32: I<131072\\ /\\ sizeof(void\\ *)>"
msgstr ""

#. type: Plain text
#: build/C/man7/mq_overview.7:197
msgid "Linux 2.6.33 to 3.4: I<(32768\\ *\\ sizeof(void\\ *) / 4)>"
msgstr ""

#.  commit 5b5c4d1a1440e94994c73dddbad7be0676cd8b9a
#. type: Plain text
#: build/C/man7/mq_overview.7:201
msgid "Since Linux 3.5: 65,536"
msgstr ""

#. type: TP
#: build/C/man7/mq_overview.7:202
#, no-wrap
msgid "I</proc/sys/fs/mqueue/msgsize_default> (since Linux 3.5)"
msgstr ""

#. type: Plain text
#: build/C/man7/mq_overview.7:229
msgid ""
"This file defines the value used for a new queue's I<mq_msgsize> setting "
"when the queue is created with a call to B<mq_open>(3)  where I<attr> is "
"specified as NULL.  The default value for this file is 8192 (bytes).  The "
"minimum and maximum are as for I</proc/sys/fs/mqueue/msgsize_max>.  If "
"I<msgsize_default> exceeds I<msgsize_max>, a new queue's default "
"I<mq_msgsize> value is capped to the I<msgsize_max> limit.  Up until Linux "
"2.6.28, the default I<mq_msgsize> was 8192; from Linux 2.6.28 to Linux 3.4, "
"the default was the value defined for the I<msgsize_max> limit."
msgstr ""

#. type: TP
#: build/C/man7/mq_overview.7:229
#, no-wrap
msgid "I</proc/sys/fs/mqueue/msgsize_max>"
msgstr ""

#. type: Plain text
#: build/C/man7/mq_overview.7:244
msgid ""
"This file can be used to view and change the ceiling on the maximum message "
"size.  This value acts as a ceiling on the I<attr-E<gt>mq_msgsize> argument "
"given to B<mq_open>(3).  The default value for I<msgsize_max> is 8192 "
"bytes.  The minimum value is 128 (8192 in kernels before 2.6.28).  The upper "
"limit for I<msgsize_max> has varied across kernel versions:"
msgstr ""

#. type: Plain text
#: build/C/man7/mq_overview.7:248
msgid "Before Linux 2.6.28, the upper limit is B<INT_MAX>."
msgstr ""

#. type: Plain text
#: build/C/man7/mq_overview.7:250
msgid "From Linux 2.6.28 to 3.4, the limit is 1,048,576."
msgstr ""

#. type: Plain text
#: build/C/man7/mq_overview.7:253
msgid "Since Linux 3.5, the limit is 16,777,216 (B<HARD_MSGSIZEMAX>)."
msgstr ""

#. type: Plain text
#: build/C/man7/mq_overview.7:262
msgid ""
"The I<msgsize_max> limit is ignored for privileged process "
"(B<CAP_SYS_RESOURCE>), but, since Linux 3.5, the B<HARD_MSGSIZEMAX> ceiling "
"is enforced for privileged processes."
msgstr ""

#. type: TP
#: build/C/man7/mq_overview.7:262
#, no-wrap
msgid "I</proc/sys/fs/mqueue/queues_max>"
msgstr ""

#. type: Plain text
#: build/C/man7/mq_overview.7:274
msgid ""
"This file can be used to view and change the system-wide limit on the number "
"of message queues that can be created.  The default value for I<queues_max> "
"is 256.  No ceiling is imposed on the I<queues_max> limit; privileged "
"processes (B<CAP_SYS_RESOURCE>)  can exceed the limit (but see BUGS)."
msgstr ""

#. type: SS
#: build/C/man7/mq_overview.7:274
#, no-wrap
msgid "Resource limit"
msgstr ""

#. type: Plain text
#: build/C/man7/mq_overview.7:281
msgid ""
"The B<RLIMIT_MSGQUEUE> resource limit, which places a limit on the amount of "
"space that can be consumed by all of the message queues belonging to a "
"process's real user ID, is described in B<getrlimit>(2)."
msgstr ""

#. type: SS
#: build/C/man7/mq_overview.7:281
#, no-wrap
msgid "Mounting the message queue filesystem"
msgstr ""

#. type: Plain text
#: build/C/man7/mq_overview.7:287
msgid ""
"On Linux, message queues are created in a virtual filesystem.  (Other "
"implementations may also provide such a feature, but the details are likely "
"to differ.)  This filesystem can be mounted (by the superuser) using the "
"following commands:"
msgstr ""

#. type: Plain text
#: build/C/man7/mq_overview.7:292
#, no-wrap
msgid ""
"#B< mkdir /dev/mqueue>\n"
"#B< mount -t mqueue none /dev/mqueue>\n"
msgstr ""

#. type: Plain text
#: build/C/man7/mq_overview.7:296
msgid "The sticky bit is automatically enabled on the mount directory."
msgstr ""

#. type: Plain text
#: build/C/man7/mq_overview.7:303
msgid ""
"After the filesystem has been mounted, the message queues on the system can "
"be viewed and manipulated using the commands usually used for files (e.g., "
"B<ls>(1)  and B<rm>(1))."
msgstr ""

#. type: Plain text
#: build/C/man7/mq_overview.7:306
msgid ""
"The contents of each file in the directory consist of a single line "
"containing information about the queue:"
msgstr ""

#. type: Plain text
#: build/C/man7/mq_overview.7:311
#, no-wrap
msgid ""
"$B< cat /dev/mqueue/mymq>\n"
"QSIZE:129     NOTIFY:2    SIGNO:0    NOTIFY_PID:8260\n"
msgstr ""

#. type: Plain text
#: build/C/man7/mq_overview.7:315
msgid "These fields are as follows:"
msgstr ""

#. type: TP
#: build/C/man7/mq_overview.7:315
#, no-wrap
msgid "B<QSIZE>"
msgstr ""

#. type: Plain text
#: build/C/man7/mq_overview.7:318
msgid "Number of bytes of data in all messages in the queue (but see BUGS)."
msgstr ""

#. type: TP
#: build/C/man7/mq_overview.7:318
#, no-wrap
msgid "B<NOTIFY_PID>"
msgstr ""

#. type: Plain text
#: build/C/man7/mq_overview.7:324
msgid ""
"If this is nonzero, then the process with this PID has used B<mq_notify>(3)  "
"to register for asynchronous message notification, and the remaining fields "
"describe how notification occurs."
msgstr ""

#. type: TP
#: build/C/man7/mq_overview.7:324
#, no-wrap
msgid "B<NOTIFY>"
msgstr ""

#. type: Plain text
#: build/C/man7/mq_overview.7:334
msgid ""
"Notification method: 0 is B<SIGEV_SIGNAL>; 1 is B<SIGEV_NONE>; and 2 is "
"B<SIGEV_THREAD>."
msgstr ""

#. type: TP
#: build/C/man7/mq_overview.7:334
#, no-wrap
msgid "B<SIGNO>"
msgstr ""

#. type: Plain text
#: build/C/man7/mq_overview.7:338
msgid "Signal number to be used for B<SIGEV_SIGNAL>."
msgstr ""

#. type: SS
#: build/C/man7/mq_overview.7:338
#, no-wrap
msgid "Linux implementation of message queue descriptors"
msgstr ""

#. type: Plain text
#: build/C/man7/mq_overview.7:347
msgid ""
"On Linux, a message queue descriptor is actually a file descriptor.  (POSIX "
"does not require such an implementation.)  This means that a message queue "
"descriptor can be monitored using B<select>(2), B<poll>(2), or B<epoll>(7).  "
"This is not portable."
msgstr ""

#. type: Plain text
#: build/C/man7/mq_overview.7:352
msgid ""
"The close-on-exec flag (see B<open>(2))  is automatically set on the file "
"descriptor returned by B<mq_open>(2)."
msgstr ""

#. type: SS
#: build/C/man7/mq_overview.7:352
#, no-wrap
msgid "IPC namespaces"
msgstr ""

#. type: Plain text
#: build/C/man7/mq_overview.7:356
msgid ""
"For a discussion of the interaction of POSIX message queue objects and IPC "
"namespaces, see B<ipc_namespaces>(7)."
msgstr ""

#. type: Plain text
#: build/C/man7/mq_overview.7:366
msgid ""
"System V message queues (B<msgget>(2), B<msgsnd>(2), B<msgrcv>(2), etc.) are "
"an older API for exchanging messages between processes.  POSIX message "
"queues provide a better designed interface than System V message queues; on "
"the other hand POSIX message queues are less widely available (especially on "
"older systems) than System V message queues."
msgstr ""

#. type: Plain text
#: build/C/man7/mq_overview.7:369
msgid ""
"Linux does not currently (2.6.26) support the use of access control lists "
"(ACLs) for POSIX message queues."
msgstr ""

#. type: Plain text
#: build/C/man7/mq_overview.7:378
msgid ""
"In Linux versions 3.5 to 3.14, the kernel imposed a ceiling of 1024 "
"(B<HARD_QUEUESMAX>)  on the value to which the I<queues_max> limit could be "
"raised, and the ceiling was enforced even for privileged processes.  This "
"ceiling value was removed in Linux 3.14, and patches to stable kernels 3.5.x "
"to 3.13.x also removed the ceiling."
msgstr ""

#.  commit d6629859b36d
#.  commit de54b9ac253787c366bbfb28d901a31954eb3511
#. type: Plain text
#: build/C/man7/mq_overview.7:392
msgid ""
"As originally implemented (and documented), the QSIZE field displayed the "
"total number of (user-supplied)  bytes in all messages in the message "
"queue.  Some changes in Linux 3.5 inadvertently changed the behavior, so "
"that this field also included a count of kernel overhead bytes used to store "
"the messages in the queue.  This behavioral regression was rectified in "
"Linux 4.2 (and earlier stable kernel series), so that the count once more "
"included just the bytes of user data in messages in the queue."
msgstr ""

#. type: Plain text
#: build/C/man7/mq_overview.7:395
msgid ""
"An example of the use of various message queue functions is shown in "
"B<mq_notify>(3)."
msgstr ""

#. type: Plain text
#: build/C/man7/mq_overview.7:409
msgid ""
"B<getrlimit>(2), B<mq_getsetattr>(2), B<poll>(2), B<select>(2), "
"B<mq_close>(3), B<mq_getattr>(3), B<mq_notify>(3), B<mq_open>(3), "
"B<mq_receive>(3), B<mq_send>(3), B<mq_unlink>(3), B<epoll>(7), "
"B<namespaces>(7)"
msgstr ""

#. type: TH
#: build/C/man3/mq_receive.3:25
#, no-wrap
msgid "MQ_RECEIVE"
msgstr ""

#. type: Plain text
#: build/C/man3/mq_receive.3:28
msgid "mq_receive, mq_timedreceive - receive a message from a message queue"
msgstr ""

#. type: Plain text
#: build/C/man3/mq_receive.3:34
#, no-wrap
msgid ""
"B<ssize_t mq_receive(mqd_t >I<mqdes>B<, char *>I<msg_ptr>B<,>\n"
"B<                   size_t >I<msg_len>B<, unsigned int *>I<msg_prio>B<);>\n"
msgstr ""

#. type: Plain text
#: build/C/man3/mq_receive.3:37 build/C/man3/mq_send.3:37
#, no-wrap
msgid ""
"B<#include E<lt>time.hE<gt>>\n"
"B<#include E<lt>mqueue.hE<gt>>\n"
msgstr ""

#. type: Plain text
#: build/C/man3/mq_receive.3:41
#, no-wrap
msgid ""
"B<ssize_t mq_timedreceive(mqd_t >I<mqdes>B<, char *>I<msg_ptr>B<,>\n"
"B<                   size_t >I<msg_len>B<, unsigned int *>I<msg_prio>B<,>\n"
"B<                   const struct timespec *>I<abs_timeout>B<);>\n"
msgstr ""

#. type: Plain text
#: build/C/man3/mq_receive.3:49 build/C/man3/mq_send.3:49
msgid "Feature Test Macro Requirements for glibc (see B<feature_test_macros>(7)):"
msgstr ""

#. type: Plain text
#: build/C/man3/mq_receive.3:52
msgid "B<mq_timedreceive>():"
msgstr ""

#. type: Plain text
#: build/C/man3/mq_receive.3:54 build/C/man3/mq_send.3:54
msgid "_POSIX_C_SOURCE\\ E<gt>=\\ 200112L"
msgstr ""

#. type: Plain text
#: build/C/man3/mq_receive.3:75
msgid ""
"B<mq_receive>()  removes the oldest message with the highest priority from "
"the message queue referred to by the message queue descriptor I<mqdes>, and "
"places it in the buffer pointed to by I<msg_ptr>.  The I<msg_len> argument "
"specifies the size of the buffer pointed to by I<msg_ptr>; this must be "
"greater than or equal to the I<mq_msgsize> attribute of the queue (see "
"B<mq_getattr>(3)).  If I<msg_prio> is not NULL, then the buffer to which it "
"points is used to return the priority associated with the received message."
msgstr ""

#. type: Plain text
#: build/C/man3/mq_receive.3:85
msgid ""
"If the queue is empty, then, by default, B<mq_receive>()  blocks until a "
"message becomes available, or the call is interrupted by a signal handler.  "
"If the B<O_NONBLOCK> flag is enabled for the message queue description, then "
"the call instead fails immediately with the error B<EAGAIN>."
msgstr ""

#. type: Plain text
#: build/C/man3/mq_receive.3:97
msgid ""
"B<mq_timedreceive>()  behaves just like B<mq_receive>(), except that if the "
"queue is empty and the B<O_NONBLOCK> flag is not enabled for the message "
"queue description, then I<abs_timeout> points to a structure which specifies "
"how long the call will block.  This value is an absolute timeout in seconds "
"and nanoseconds since the Epoch, 1970-01-01 00:00:00 +0000 (UTC), specified "
"in the following structure:"
msgstr ""

#. type: Plain text
#: build/C/man3/mq_receive.3:104 build/C/man3/mq_send.3:113
#, no-wrap
msgid ""
"struct timespec {\n"
"    time_t tv_sec;        /* seconds */\n"
"    long   tv_nsec;       /* nanoseconds */\n"
"};\n"
msgstr ""

#. type: Plain text
#: build/C/man3/mq_receive.3:111
msgid ""
"If no message is available, and the timeout has already expired by the time "
"of the call, B<mq_timedreceive>()  returns immediately."
msgstr ""

#. type: Plain text
#: build/C/man3/mq_receive.3:120
msgid ""
"On success, B<mq_receive>()  and B<mq_timedreceive>()  return the number of "
"bytes in the received message; on error, -1 is returned, with I<errno> set "
"to indicate the error."
msgstr ""

#. type: TP
#: build/C/man3/mq_receive.3:121 build/C/man3/mq_send.3:129 build/C/man2/msgop.2:363
#, no-wrap
msgid "B<EAGAIN>"
msgstr ""

#. type: Plain text
#: build/C/man3/mq_receive.3:127
msgid ""
"The queue was empty, and the B<O_NONBLOCK> flag was set for the message "
"queue description referred to by I<mqdes>."
msgstr ""

#. type: Plain text
#: build/C/man3/mq_receive.3:132
msgid "The descriptor specified in I<mqdes> was invalid or not opened for reading."
msgstr ""

#. type: TP
#: build/C/man3/mq_receive.3:132 build/C/man3/mq_send.3:140 build/C/man2/msgop.2:379 build/C/man2/msgop.2:427
#, no-wrap
msgid "B<EINTR>"
msgstr ""

#. type: Plain text
#: build/C/man3/mq_receive.3:136 build/C/man3/mq_send.3:144
msgid "The call was interrupted by a signal handler; see B<signal>(7)."
msgstr ""

#. type: Plain text
#: build/C/man3/mq_receive.3:145 build/C/man3/mq_send.3:153
msgid ""
"The call would have blocked, and I<abs_timeout> was invalid, either because "
"I<tv_sec> was less than zero, or because I<tv_nsec> was less than zero or "
"greater than 1000 million."
msgstr ""

#. type: TP
#: build/C/man3/mq_receive.3:145 build/C/man3/mq_send.3:153
#, no-wrap
msgid "B<EMSGSIZE>"
msgstr ""

#. type: Plain text
#: build/C/man3/mq_receive.3:151
msgid "I<msg_len> was less than the I<mq_msgsize> attribute of the message queue."
msgstr ""

#. type: TP
#: build/C/man3/mq_receive.3:151 build/C/man3/mq_send.3:159
#, no-wrap
msgid "B<ETIMEDOUT>"
msgstr ""

#. type: Plain text
#: build/C/man3/mq_receive.3:154 build/C/man3/mq_send.3:162
msgid "The call timed out before a message could be transferred."
msgstr ""

#. type: tbl table
#: build/C/man3/mq_receive.3:165
#, no-wrap
msgid ""
"B<mq_receive>(),\n"
"B<mq_timedreceive>()"
msgstr ""

#. type: Plain text
#: build/C/man3/mq_receive.3:175
msgid ""
"On Linux, B<mq_timedreceive>()  is a system call, and B<mq_receive>()  is a "
"library function layered on top of that system call."
msgstr ""

#. type: Plain text
#: build/C/man3/mq_receive.3:184
msgid ""
"B<mq_close>(3), B<mq_getattr>(3), B<mq_notify>(3), B<mq_open>(3), "
"B<mq_send>(3), B<mq_unlink>(3), B<mq_overview>(7), B<time>(7)"
msgstr ""

#. type: TH
#: build/C/man3/mq_send.3:25
#, no-wrap
msgid "MQ_SEND"
msgstr ""

#. type: Plain text
#: build/C/man3/mq_send.3:28
msgid "mq_send, mq_timedsend - send a message to a message queue"
msgstr ""

#. type: Plain text
#: build/C/man3/mq_send.3:34
#, no-wrap
msgid ""
"B<int mq_send(mqd_t >I<mqdes>B<, const char *>I<msg_ptr>B<,>\n"
"B<              size_t >I<msg_len>B<, unsigned int >I<msg_prio>B<);>\n"
msgstr ""

#. type: Plain text
#: build/C/man3/mq_send.3:41
#, no-wrap
msgid ""
"B<int mq_timedsend(mqd_t >I<mqdes>B<, const char *>I<msg_ptr>B<,>\n"
"B<              size_t >I<msg_len>B<, unsigned int >I<msg_prio>B<,>\n"
"B<              const struct timespec *>I<abs_timeout>B<);>\n"
msgstr ""

#. type: Plain text
#: build/C/man3/mq_send.3:52
msgid "B<mq_timedsend>():"
msgstr ""

#. type: Plain text
#: build/C/man3/mq_send.3:70
msgid ""
"B<mq_send>()  adds the message pointed to by I<msg_ptr> to the message queue "
"referred to by the message queue descriptor I<mqdes>.  The I<msg_len> "
"argument specifies the length of the message pointed to by I<msg_ptr>; this "
"length must be less than or equal to the queue's I<mq_msgsize> attribute.  "
"Zero-length messages are allowed."
msgstr ""

#. type: Plain text
#: build/C/man3/mq_send.3:81
msgid ""
"The I<msg_prio> argument is a nonnegative integer that specifies the "
"priority of this message.  Messages are placed on the queue in decreasing "
"order of priority, with newer messages of the same priority being placed "
"after older messages with the same priority.  See B<mq_overview>(7)  for "
"details on the range for the message priority."
msgstr ""

#. type: Plain text
#: build/C/man3/mq_send.3:94
msgid ""
"If the message queue is already full (i.e., the number of messages on the "
"queue equals the queue's I<mq_maxmsg> attribute), then, by default, "
"B<mq_send>()  blocks until sufficient space becomes available to allow the "
"message to be queued, or until the call is interrupted by a signal handler.  "
"If the B<O_NONBLOCK> flag is enabled for the message queue description, then "
"the call instead fails immediately with the error B<EAGAIN>."
msgstr ""

#. type: Plain text
#: build/C/man3/mq_send.3:106
msgid ""
"B<mq_timedsend>()  behaves just like B<mq_send>(), except that if the queue "
"is full and the B<O_NONBLOCK> flag is not enabled for the message queue "
"description, then I<abs_timeout> points to a structure which specifies how "
"long the call will block.  This value is an absolute timeout in seconds and "
"nanoseconds since the Epoch, 1970-01-01 00:00:00 +0000 (UTC), specified in "
"the following structure:"
msgstr ""

#. type: Plain text
#: build/C/man3/mq_send.3:120
msgid ""
"If the message queue is full, and the timeout has already expired by the "
"time of the call, B<mq_timedsend>()  returns immediately."
msgstr ""

#. type: Plain text
#: build/C/man3/mq_send.3:128
msgid ""
"On success, B<mq_send>()  and B<mq_timedsend>()  return zero; on error, -1 "
"is returned, with I<errno> set to indicate the error."
msgstr ""

#. type: Plain text
#: build/C/man3/mq_send.3:135
msgid ""
"The queue was full, and the B<O_NONBLOCK> flag was set for the message queue "
"description referred to by I<mqdes>."
msgstr ""

#. type: Plain text
#: build/C/man3/mq_send.3:140
msgid "The descriptor specified in I<mqdes> was invalid or not opened for writing."
msgstr ""

#. type: Plain text
#: build/C/man3/mq_send.3:159
msgid ""
"I<msg_len> was greater than the I<mq_msgsize> attribute of the message "
"queue."
msgstr ""

#. type: tbl table
#: build/C/man3/mq_send.3:173
#, no-wrap
msgid ""
"B<mq_send>(),\n"
"B<mq_timedsend>()"
msgstr ""

#. type: Plain text
#: build/C/man3/mq_send.3:183
msgid ""
"On Linux, B<mq_timedsend>()  is a system call, and B<mq_send>()  is a "
"library function layered on top of that system call."
msgstr ""

#. type: Plain text
#: build/C/man3/mq_send.3:192
msgid ""
"B<mq_close>(3), B<mq_getattr>(3), B<mq_notify>(3), B<mq_open>(3), "
"B<mq_receive>(3), B<mq_unlink>(3), B<mq_overview>(7), B<time>(7)"
msgstr ""

#. type: TH
#: build/C/man3/mq_unlink.3:25
#, no-wrap
msgid "MQ_UNLINK"
msgstr ""

#. type: Plain text
#: build/C/man3/mq_unlink.3:28
msgid "mq_unlink - remove a message queue"
msgstr ""

#. type: Plain text
#: build/C/man3/mq_unlink.3:33
#, no-wrap
msgid "B<int mq_unlink(const char *>I<name>B<);>\n"
msgstr ""

#. type: Plain text
#: build/C/man3/mq_unlink.3:43
msgid ""
"B<mq_unlink>()  removes the specified message queue I<name>.  The message "
"queue name is removed immediately.  The queue itself is destroyed once any "
"other processes that have the queue open close their descriptors referring "
"to the queue."
msgstr ""

#. type: Plain text
#: build/C/man3/mq_unlink.3:49
msgid ""
"On success B<mq_unlink>()  returns 0; on error, -1 is returned, with "
"I<errno> set to indicate the error."
msgstr ""

#. type: Plain text
#: build/C/man3/mq_unlink.3:53
msgid "The caller does not have permission to unlink this message queue."
msgstr ""

#. type: Plain text
#: build/C/man3/mq_unlink.3:61
msgid "There is no message queue with the given I<name>."
msgstr ""

#. type: tbl table
#: build/C/man3/mq_unlink.3:71
#, no-wrap
msgid "B<mq_unlink>()"
msgstr ""

#. type: Plain text
#: build/C/man3/mq_unlink.3:83
msgid ""
"B<mq_close>(3), B<mq_getattr>(3), B<mq_notify>(3), B<mq_open>(3), "
"B<mq_receive>(3), B<mq_send>(3), B<mq_overview>(7)"
msgstr ""

#. type: TH
#: build/C/man2/msgctl.2:38
#, no-wrap
msgid "MSGCTL"
msgstr ""

#. type: TH
#: build/C/man2/msgctl.2:38 build/C/man2/msgop.2:40
#, no-wrap
msgid "2020-11-01"
msgstr ""

#. type: Plain text
#: build/C/man2/msgctl.2:41
msgid "msgctl - System V message control operations"
msgstr ""

#. type: Plain text
#: build/C/man2/msgctl.2:46 build/C/man2/msgget.2:43 build/C/man2/msgop.2:48
#, no-wrap
msgid ""
"B<#include E<lt>sys/types.hE<gt>>\n"
"B<#include E<lt>sys/ipc.hE<gt>>\n"
"B<#include E<lt>sys/msg.hE<gt>>\n"
msgstr ""

#. type: Plain text
#: build/C/man2/msgctl.2:48
#, no-wrap
msgid "B<int msgctl(int >I<msqid>B<, int >I<cmd>B<, struct msqid_ds *>I<buf>B<);>\n"
msgstr ""

#. type: Plain text
#: build/C/man2/msgctl.2:55
msgid ""
"B<msgctl>()  performs the control operation specified by I<cmd> on the "
"System\\ V message queue with identifier I<msqid>."
msgstr ""

#. type: Plain text
#: build/C/man2/msgctl.2:59
msgid ""
"The I<msqid_ds> data structure is defined in I<E<lt>sys/msg.hE<gt>> as "
"follows:"
msgstr ""

#. type: Plain text
#: build/C/man2/msgctl.2:74
#, no-wrap
msgid ""
"struct msqid_ds {\n"
"    struct ipc_perm msg_perm;   /* Ownership and permissions */\n"
"    time_t          msg_stime;  /* Time of last msgsnd(2) */\n"
"    time_t          msg_rtime;  /* Time of last msgrcv(2) */\n"
"    time_t          msg_ctime;  /* Time of creation or last\n"
"                                   modification by msgctl() */\n"
"    unsigned long   msg_cbytes; /* # of bytes in queue */\n"
"    msgqnum_t       msg_qnum;   /* # number of messages in queue */\n"
"    msglen_t        msg_qbytes; /* Maximum # of bytes in queue */\n"
"    pid_t           msg_lspid;  /* PID of last msgsnd(2) */\n"
"    pid_t           msg_lrpid;  /* PID of last msgrcv(2) */\n"
"};\n"
msgstr ""

#. type: Plain text
#: build/C/man2/msgctl.2:80
msgid "The fields of the I<msgid_ds> structure are as follows:"
msgstr ""

#. type: TP
#: build/C/man2/msgctl.2:80
#, no-wrap
msgid "I<msg_perm>"
msgstr ""

#. type: Plain text
#: build/C/man2/msgctl.2:86
msgid ""
"This is an I<ipc_perm> structure (see below) that specifies the access "
"permissions on the message queue."
msgstr ""

#. type: TP
#: build/C/man2/msgctl.2:86
#, no-wrap
msgid "I<msg_stime>"
msgstr ""

#. type: Plain text
#: build/C/man2/msgctl.2:91
msgid "Time of the last B<msgsnd>(2)  system call."
msgstr ""

#. type: TP
#: build/C/man2/msgctl.2:91
#, no-wrap
msgid "I<msg_rtime>"
msgstr ""

#. type: Plain text
#: build/C/man2/msgctl.2:96
msgid "Time of the last B<msgrcv>(2)  system call."
msgstr ""

#. type: TP
#: build/C/man2/msgctl.2:96
#, no-wrap
msgid "I<msg_ctime>"
msgstr ""

#. type: Plain text
#: build/C/man2/msgctl.2:102
msgid "Time of creation of queue or time of last B<msgctl>()  B<IPC_SET> operation."
msgstr ""

#. type: TP
#: build/C/man2/msgctl.2:102
#, no-wrap
msgid "I<msg_cbytes>"
msgstr ""

#. type: Plain text
#: build/C/man2/msgctl.2:106
msgid ""
"Number of bytes in all messages currently on the message queue.  This is a "
"nonstandard Linux extension that is not specified in POSIX."
msgstr ""

#. type: TP
#: build/C/man2/msgctl.2:106
#, no-wrap
msgid "I<msg_qnum>"
msgstr ""

#. type: Plain text
#: build/C/man2/msgctl.2:109
msgid "Number of messages currently on the message queue."
msgstr ""

#. type: TP
#: build/C/man2/msgctl.2:109
#, no-wrap
msgid "I<msg_qbytes>"
msgstr ""

#. type: Plain text
#: build/C/man2/msgctl.2:113
msgid "Maximum number of bytes of message text allowed on the message queue."
msgstr ""

#. type: TP
#: build/C/man2/msgctl.2:113
#, no-wrap
msgid "I<msg_lspid>"
msgstr ""

#. type: Plain text
#: build/C/man2/msgctl.2:118
msgid "ID of the process that performed the last B<msgsnd>(2)  system call."
msgstr ""

#. type: TP
#: build/C/man2/msgctl.2:118
#, no-wrap
msgid "I<msg_lrpid>"
msgstr ""

#. type: Plain text
#: build/C/man2/msgctl.2:123
msgid "ID of the process that performed the last B<msgrcv>(2)  system call."
msgstr ""

#. type: Plain text
#: build/C/man2/msgctl.2:129
msgid ""
"The I<ipc_perm> structure is defined as follows (the highlighted fields are "
"settable using B<IPC_SET>):"
msgstr ""

#. type: Plain text
#: build/C/man2/msgctl.2:141
#, no-wrap
msgid ""
"struct ipc_perm {\n"
"    key_t          __key;       /* Key supplied to msgget(2) */\n"
"    uid_t          B<uid>;         /* Effective UID of owner */\n"
"    gid_t          B<gid>;         /* Effective GID of owner */\n"
"    uid_t          cuid;        /* Effective UID of creator */\n"
"    gid_t          cgid;        /* Effective GID of creator */\n"
"    unsigned short B<mode>;        /* Permissions */\n"
"    unsigned short __seq;       /* Sequence number */\n"
"};\n"
msgstr ""

#. type: Plain text
#: build/C/man2/msgctl.2:150
msgid ""
"The least significant 9 bits of the I<mode> field of the I<ipc_perm> "
"structure define the access permissions for the message queue.  The "
"permission bits are as follows:"
msgstr ""

#. type: tbl table
#: build/C/man2/msgctl.2:152
#, no-wrap
msgid "0400"
msgstr ""

#. type: tbl table
#: build/C/man2/msgctl.2:152
#, no-wrap
msgid "Read by user"
msgstr ""

#. type: tbl table
#: build/C/man2/msgctl.2:153
#, no-wrap
msgid "0200"
msgstr ""

#. type: tbl table
#: build/C/man2/msgctl.2:153
#, no-wrap
msgid "Write by user"
msgstr ""

#. type: tbl table
#: build/C/man2/msgctl.2:154
#, no-wrap
msgid "0040"
msgstr ""

#. type: tbl table
#: build/C/man2/msgctl.2:154
#, no-wrap
msgid "Read by group"
msgstr ""

#. type: tbl table
#: build/C/man2/msgctl.2:155
#, no-wrap
msgid "0020"
msgstr ""

#. type: tbl table
#: build/C/man2/msgctl.2:155
#, no-wrap
msgid "Write by group"
msgstr ""

#. type: tbl table
#: build/C/man2/msgctl.2:156
#, no-wrap
msgid "0004"
msgstr ""

#. type: tbl table
#: build/C/man2/msgctl.2:156
#, no-wrap
msgid "Read by others"
msgstr ""

#. type: tbl table
#: build/C/man2/msgctl.2:157
#, no-wrap
msgid "0002"
msgstr ""

#. type: tbl table
#: build/C/man2/msgctl.2:157
#, no-wrap
msgid "Write by others"
msgstr ""

#. type: Plain text
#: build/C/man2/msgctl.2:161
msgid "Bits 0100, 0010, and 0001 (the execute bits) are unused by the system."
msgstr ""

#. type: Plain text
#: build/C/man2/msgctl.2:165
msgid "Valid values for I<cmd> are:"
msgstr ""

#. type: TP
#: build/C/man2/msgctl.2:165
#, no-wrap
msgid "B<IPC_STAT>"
msgstr ""

#. type: Plain text
#: build/C/man2/msgctl.2:174
msgid ""
"Copy information from the kernel data structure associated with I<msqid> "
"into the I<msqid_ds> structure pointed to by I<buf>.  The caller must have "
"read permission on the message queue."
msgstr ""

#. type: TP
#: build/C/man2/msgctl.2:174
#, no-wrap
msgid "B<IPC_SET>"
msgstr ""

#. type: Plain text
#: build/C/man2/msgctl.2:184
msgid ""
"Write the values of some members of the I<msqid_ds> structure pointed to by "
"I<buf> to the kernel data structure associated with this message queue, "
"updating also its I<msg_ctime> member."
msgstr ""

#. type: Plain text
#: build/C/man2/msgctl.2:191
msgid ""
"The following members of the structure are updated: I<msg_qbytes>, "
"I<msg_perm.uid>, I<msg_perm.gid>, and (the least significant 9 bits of)  "
"I<msg_perm.mode>."
msgstr ""

#. type: Plain text
#: build/C/man2/msgctl.2:203
msgid ""
"The effective UID of the calling process must match the owner "
"(I<msg_perm.uid>)  or creator (I<msg_perm.cuid>)  of the message queue, or "
"the caller must be privileged.  Appropriate privilege (Linux: the "
"B<CAP_SYS_RESOURCE> capability) is required to raise the I<msg_qbytes> value "
"beyond the system parameter B<MSGMNB>."
msgstr ""

#. type: TP
#: build/C/man2/msgctl.2:203
#, no-wrap
msgid "B<IPC_RMID>"
msgstr ""

#. type: Plain text
#: build/C/man2/msgctl.2:217
msgid ""
"Immediately remove the message queue, awakening all waiting reader and "
"writer processes (with an error return and I<errno> set to B<EIDRM>).  The "
"calling process must have appropriate privileges or its effective user ID "
"must be either that of the creator or owner of the message queue.  The third "
"argument to B<msgctl>()  is ignored in this case."
msgstr ""

#. type: TP
#: build/C/man2/msgctl.2:217
#, no-wrap
msgid "B<IPC_INFO> (Linux-specific)"
msgstr ""

#. type: Plain text
#: build/C/man2/msgctl.2:230
msgid ""
"Return information about system-wide message queue limits and parameters in "
"the structure pointed to by I<buf>.  This structure is of type I<msginfo> "
"(thus, a cast is required), defined in I<E<lt>sys/msg.hE<gt>> if the "
"B<_GNU_SOURCE> feature test macro is defined:"
msgstr ""

#. type: Plain text
#: build/C/man2/msgctl.2:254
#, no-wrap
msgid ""
"struct msginfo {\n"
"    int msgpool; /* Size in kibibytes of buffer pool\n"
"                    used to hold message data;\n"
"                    unused within kernel */\n"
"    int msgmap;  /* Maximum number of entries in message\n"
"                    map; unused within kernel */\n"
"    int msgmax;  /* Maximum number of bytes that can be\n"
"                    written in a single message */\n"
"    int msgmnb;  /* Maximum number of bytes that can be\n"
"                    written to queue; used to initialize\n"
"                    msg_qbytes during queue creation\n"
"                    (msgget(2)) */\n"
"    int msgmni;  /* Maximum number of message queues */\n"
"    int msgssz;  /* Message segment size;\n"
"                    unused within kernel */\n"
"    int msgtql;  /* Maximum number of messages on all queues\n"
"                    in system; unused within kernel */\n"
"    unsigned short msgseg;\n"
"                 /* Maximum number of segments;\n"
"                    unused within kernel */\n"
"};\n"
msgstr ""

#. type: Plain text
#: build/C/man2/msgctl.2:267
msgid ""
"The I<msgmni>, I<msgmax>, and I<msgmnb> settings can be changed via I</proc> "
"files of the same name; see B<proc>(5)  for details."
msgstr ""

#. type: TP
#: build/C/man2/msgctl.2:267
#, no-wrap
msgid "B<MSG_INFO> (Linux-specific)"
msgstr ""

#. type: Plain text
#: build/C/man2/msgctl.2:284
msgid ""
"Return a I<msginfo> structure containing the same information as for "
"B<IPC_INFO>, except that the following fields are returned with information "
"about system resources consumed by message queues: the I<msgpool> field "
"returns the number of message queues that currently exist on the system; the "
"I<msgmap> field returns the total number of messages in all queues on the "
"system; and the I<msgtql> field returns the total number of bytes in all "
"messages in all queues on the system."
msgstr ""

#. type: TP
#: build/C/man2/msgctl.2:284
#, no-wrap
msgid "B<MSG_STAT> (Linux-specific)"
msgstr ""

#. type: Plain text
#: build/C/man2/msgctl.2:295
msgid ""
"Return a I<msqid_ds> structure as for B<IPC_STAT>.  However, the I<msqid> "
"argument is not a queue identifier, but instead an index into the kernel's "
"internal array that maintains information about all message queues on the "
"system."
msgstr ""

#. type: TP
#: build/C/man2/msgctl.2:295
#, no-wrap
msgid "B<MSG_STAT_ANY> (Linux-specific, since Linux 4.17)"
msgstr ""

#. type: Plain text
#: build/C/man2/msgctl.2:308
msgid ""
"Return a I<msqid_ds> structure as for B<MSG_STAT>.  However, "
"I<msg_perm.mode> is not checked for read access for I<msqid> meaning that "
"any user can employ this operation (just as any user may read "
"I</proc/sysvipc/msg> to obtain the same information)."
msgstr ""

#. type: Plain text
#: build/C/man2/msgctl.2:333
msgid ""
"On success, B<IPC_STAT>, B<IPC_SET>, and B<IPC_RMID> return 0.  A successful "
"B<IPC_INFO> or B<MSG_INFO> operation returns the index of the highest used "
"entry in the kernel's internal array recording information about all message "
"queues.  (This information can be used with repeated B<MSG_STAT> or "
"B<MSG_STAT_ANY> operations to obtain information about all queues on the "
"system.)  A successful B<MSG_STAT> or B<MSG_STAT_ANY> operation returns the "
"identifier of the queue whose index was given in I<msqid>."
msgstr ""

#. type: Plain text
#: build/C/man2/msgctl.2:337
msgid "On error, -1 is returned with I<errno> indicating the error."
msgstr ""

#. type: Plain text
#: build/C/man2/msgctl.2:341
msgid "On failure, I<errno> is set to one of the following:"
msgstr ""

#. type: Plain text
#: build/C/man2/msgctl.2:354
msgid ""
"The argument I<cmd> is equal to B<IPC_STAT> or B<MSG_STAT>, but the calling "
"process does not have read permission on the message queue I<msqid>, and "
"does not have the B<CAP_IPC_OWNER> capability in the user namespace that "
"governs its IPC namespace."
msgstr ""

#. type: TP
#: build/C/man2/msgctl.2:354 build/C/man2/msgop.2:371 build/C/man2/msgop.2:418
#, no-wrap
msgid "B<EFAULT>"
msgstr ""

#. type: Plain text
#: build/C/man2/msgctl.2:365
msgid ""
"The argument I<cmd> has the value B<IPC_SET> or B<IPC_STAT>, but the address "
"pointed to by I<buf> isn't accessible."
msgstr ""

#. type: TP
#: build/C/man2/msgctl.2:365 build/C/man2/msgop.2:376 build/C/man2/msgop.2:423
#, no-wrap
msgid "B<EIDRM>"
msgstr ""

#. type: Plain text
#: build/C/man2/msgctl.2:368 build/C/man2/msgop.2:379
msgid "The message queue was removed."
msgstr ""

#. type: Plain text
#: build/C/man2/msgctl.2:379
msgid ""
"Invalid value for I<cmd> or I<msqid>.  Or: for a B<MSG_STAT> operation, the "
"index value specified in I<msqid> referred to an array slot that is "
"currently unused."
msgstr ""

#. type: TP
#: build/C/man2/msgctl.2:379 build/C/man2/msgctl.2:397
#, no-wrap
msgid "B<EPERM>"
msgstr ""

#. type: Plain text
#: build/C/man2/msgctl.2:397
msgid ""
"The argument I<cmd> has the value B<IPC_SET> or B<IPC_RMID>, but the "
"effective user ID of the calling process is not the creator (as found in "
"I<msg_perm.cuid>)  or the owner (as found in I<msg_perm.uid>)  of the "
"message queue, and the caller is not privileged (Linux: does not have the "
"B<CAP_SYS_ADMIN> capability)."
msgstr ""

#. type: Plain text
#: build/C/man2/msgctl.2:408
msgid ""
"An attempt (B<IPC_SET>)  was made to increase I<msg_qbytes> beyond the "
"system parameter B<MSGMNB>, but the caller is not privileged (Linux: does "
"not have the B<CAP_SYS_RESOURCE> capability)."
msgstr ""

#. type: Plain text
#: build/C/man2/msgctl.2:411 build/C/man2/msgget.2:193 build/C/man2/msgop.2:480
msgid "POSIX.1-2001, POSIX.1-2008, SVr4."
msgstr ""

#.  Like Linux, the FreeBSD man pages still document
#.  the inclusion of these header files.
#. type: Plain text
#: build/C/man2/msgctl.2:424 build/C/man2/msgget.2:206 build/C/man2/msgop.2:503
msgid ""
"The inclusion of I<E<lt>sys/types.hE<gt>> and I<E<lt>sys/ipc.hE<gt>> isn't "
"required on Linux or by any version of POSIX.  However, some old "
"implementations required the inclusion of these header files, and the SVID "
"also documented their inclusion.  Applications intended to be portable to "
"such old systems may need to include these header files."
msgstr ""

#. type: Plain text
#: build/C/man2/msgctl.2:436
msgid ""
"The B<IPC_INFO>, B<MSG_STAT>, and B<MSG_INFO> operations are used by the "
"B<ipcs>(1)  program to provide information on allocated resources.  In the "
"future these may modified or moved to a I</proc> filesystem interface."
msgstr ""

#. type: Plain text
#: build/C/man2/msgctl.2:450
msgid ""
"Various fields in the I<struct msqid_ds> were typed as I<short> under Linux "
"2.2 and have become I<long> under Linux 2.4.  To take advantage of this, a "
"recompilation under glibc-2.1.91 or later should suffice.  (The kernel "
"distinguishes old and new calls by an B<IPC_64> flag in I<cmd>.)"
msgstr ""

#. type: Plain text
#: build/C/man2/msgctl.2:457
msgid ""
"B<msgget>(2), B<msgrcv>(2), B<msgsnd>(2), B<capabilities>(7), "
"B<mq_overview>(7), B<sysvipc>(7)"
msgstr ""

#. type: TH
#: build/C/man2/msgget.2:35
#, no-wrap
msgid "MSGGET"
msgstr ""

#. type: TH
#: build/C/man2/msgget.2:35
#, no-wrap
msgid "2019-08-02"
msgstr ""

#. type: Plain text
#: build/C/man2/msgget.2:38
msgid "msgget - get a System V message queue identifier"
msgstr ""

#. type: Plain text
#: build/C/man2/msgget.2:45
#, no-wrap
msgid "B<int msgget(key_t >I<key>B<, int >I<msgflg>B<);>\n"
msgstr ""

#. type: Plain text
#: build/C/man2/msgget.2:61
msgid ""
"The B<msgget>()  system call returns the System\\ V message queue identifier "
"associated with the value of the I<key> argument.  It may be used either to "
"obtain the identifier of a previously created message queue (when I<msgflg> "
"is zero and I<key> does not have the value B<IPC_PRIVATE>), or to create a "
"new set."
msgstr ""

#. type: Plain text
#: build/C/man2/msgget.2:76
msgid ""
"A new message queue is created if I<key> has the value B<IPC_PRIVATE> or "
"I<key> isn't B<IPC_PRIVATE>, no message queue with the given key I<key> "
"exists, and B<IPC_CREAT> is specified in I<msgflg>."
msgstr ""

#. type: Plain text
#: build/C/man2/msgget.2:95
msgid ""
"If I<msgflg> specifies both B<IPC_CREAT> and B<IPC_EXCL> and a message queue "
"already exists for I<key>, then B<msgget>()  fails with I<errno> set to "
"B<EEXIST>.  (This is analogous to the effect of the combination B<O_CREAT | "
"O_EXCL> for B<open>(2).)"
msgstr ""

#. type: Plain text
#: build/C/man2/msgget.2:105
msgid ""
"Upon creation, the least significant bits of the argument I<msgflg> define "
"the permissions of the message queue.  These permission bits have the same "
"format and semantics as the permissions specified for the I<mode> argument "
"of B<open>(2).  (The execute permissions are not used.)"
msgstr ""

#. type: Plain text
#: build/C/man2/msgget.2:112
msgid ""
"If a new message queue is created, then its associated data structure "
"I<msqid_ds> (see B<msgctl>(2))  is initialized as follows:"
msgstr ""

#. type: IP
#: build/C/man2/msgget.2:112 build/C/man2/msgget.2:117 build/C/man2/msgget.2:122 build/C/man2/msgget.2:127 build/C/man2/msgget.2:135 build/C/man2/msgget.2:138 build/C/man2/msgop.2:117 build/C/man2/msgop.2:122 build/C/man2/msgop.2:146 build/C/man2/msgop.2:153 build/C/man2/msgop.2:168 build/C/man2/msgop.2:171 build/C/man2/msgop.2:174 build/C/man2/msgop.2:220 build/C/man2/msgop.2:225 build/C/man2/msgop.2:239 build/C/man2/msgop.2:307 build/C/man2/msgop.2:309 build/C/man2/msgop.2:315
#, no-wrap
msgid "\\(bu"
msgstr ""

#. type: Plain text
#: build/C/man2/msgget.2:117
msgid ""
"I<msg_perm.cuid> and I<msg_perm.uid> are set to the effective user ID of the "
"calling process."
msgstr ""

#. type: Plain text
#: build/C/man2/msgget.2:122
msgid ""
"I<msg_perm.cgid> and I<msg_perm.gid> are set to the effective group ID of "
"the calling process."
msgstr ""

#. type: Plain text
#: build/C/man2/msgget.2:127
msgid ""
"The least significant 9 bits of I<msg_perm.mode> are set to the least "
"significant 9 bits of I<msgflg>."
msgstr ""

#. type: Plain text
#: build/C/man2/msgget.2:135
msgid ""
"I<msg_qnum>, I<msg_lspid>, I<msg_lrpid>, I<msg_stime>, and I<msg_rtime> are "
"set to 0."
msgstr ""

#. type: Plain text
#: build/C/man2/msgget.2:138
msgid "I<msg_ctime> is set to the current time."
msgstr ""

#. type: Plain text
#: build/C/man2/msgget.2:142
msgid "I<msg_qbytes> is set to the system limit B<MSGMNB>."
msgstr ""

#. type: Plain text
#: build/C/man2/msgget.2:146
msgid ""
"If the message queue already exists the permissions are verified, and a "
"check is made to see if it is marked for destruction."
msgstr ""

#. type: Plain text
#: build/C/man2/msgget.2:152
msgid ""
"If successful, the return value will be the message queue identifier (a "
"nonnegative integer), otherwise -1 with I<errno> indicating the error."
msgstr ""

#. type: Plain text
#: build/C/man2/msgget.2:156
msgid "On failure, I<errno> is set to one of the following values:"
msgstr ""

#. type: Plain text
#: build/C/man2/msgget.2:164
msgid ""
"A message queue exists for I<key>, but the calling process does not have "
"permission to access the queue, and does not have the B<CAP_IPC_OWNER> "
"capability in the user namespace that governs its IPC namespace."
msgstr ""

#. type: Plain text
#: build/C/man2/msgget.2:173
msgid ""
"B<IPC_CREAT> and B<IPC_EXCL> were specified in I<msgflg>, but a message "
"queue already exists for I<key>."
msgstr ""

#. type: Plain text
#: build/C/man2/msgget.2:181
msgid ""
"No message queue exists for I<key> and I<msgflg> did not specify "
"B<IPC_CREAT>."
msgstr ""

#. type: Plain text
#: build/C/man2/msgget.2:185
msgid ""
"A message queue has to be created but the system does not have enough memory "
"for the new data structure."
msgstr ""

#. type: Plain text
#: build/C/man2/msgget.2:191
msgid ""
"A message queue has to be created but the system limit for the maximum "
"number of message queues (B<MSGMNI>)  would be exceeded."
msgstr ""

#. type: Plain text
#: build/C/man2/msgget.2:216
msgid ""
"B<IPC_PRIVATE> isn't a flag field but a I<key_t> type.  If this special "
"value is used for I<key>, the system call ignores everything but the least "
"significant 9 bits of I<msgflg> and creates a new message queue (on "
"success)."
msgstr ""

#. type: Plain text
#: build/C/man2/msgget.2:220
msgid ""
"The following is a system limit on message queue resources affecting a "
"B<msgget>()  call:"
msgstr ""

#. type: TP
#: build/C/man2/msgget.2:220
#, no-wrap
msgid "B<MSGMNI>"
msgstr ""

#.  commit 0050ee059f7fc86b1df2527aaa14ed5dc72f9973
#. type: Plain text
#: build/C/man2/msgget.2:230
msgid ""
"System-wide limit on the number of message queues.  Before Linux 3.19, the "
"default value for this limit was calculated using a formula based on "
"available system memory.  Since Linux 3.19, the default value is 32,000.  On "
"Linux, this limit can be read and modified via I</proc/sys/kernel/msgmni>."
msgstr ""

#. type: SS
#: build/C/man2/msgget.2:230
#, no-wrap
msgid "Linux notes"
msgstr ""

#. type: Plain text
#: build/C/man2/msgget.2:236
msgid ""
"Until version 2.3.20, Linux would return B<EIDRM> for a B<msgget>()  on a "
"message queue scheduled for deletion."
msgstr ""

#. type: Plain text
#: build/C/man2/msgget.2:242
msgid ""
"The name choice B<IPC_PRIVATE> was perhaps unfortunate, B<IPC_NEW> would "
"more clearly show its function."
msgstr ""

#. type: Plain text
#: build/C/man2/msgget.2:250
msgid ""
"B<msgctl>(2), B<msgrcv>(2), B<msgsnd>(2), B<ftok>(3), B<capabilities>(7), "
"B<mq_overview>(7), B<sysvipc>(7)"
msgstr ""

#. type: TH
#: build/C/man2/msgop.2:40
#, no-wrap
msgid "MSGOP"
msgstr ""

#. type: Plain text
#: build/C/man2/msgop.2:43
msgid "msgrcv, msgsnd - System V message queue operations"
msgstr ""

#. type: Plain text
#: build/C/man2/msgop.2:51
#, no-wrap
msgid ""
"B<int msgsnd(int >I<msqid>B<, const void *>I<msgp>B<, size_t >I<msgsz>B<, "
"int >I<msgflg>B<);>\n"
msgstr ""

#. type: Plain text
#: build/C/man2/msgop.2:55
#, no-wrap
msgid ""
"B<ssize_t msgrcv(int >I<msqid>B<, void *>I<msgp>B<, size_t >I<msgsz>B<, long "
">I<msgtyp>B<,>\n"
"B<               int >I<msgflg>B<);>\n"
msgstr ""

#. type: Plain text
#: build/C/man2/msgop.2:65
msgid ""
"The B<msgsnd>()  and B<msgrcv>()  system calls are used to send messages to, "
"and receive messages from, a System\\ V message queue.  The calling process "
"must have write permission on the message queue in order to send a message, "
"and read permission to receive a message."
msgstr ""

#. type: Plain text
#: build/C/man2/msgop.2:70
msgid ""
"The I<msgp> argument is a pointer to a caller-defined structure of the "
"following general form:"
msgstr ""

#. type: Plain text
#: build/C/man2/msgop.2:77
#, no-wrap
msgid ""
"struct msgbuf {\n"
"    long mtype;       /* message type, must be E<gt> 0 */\n"
"    char mtext[1];    /* message data */\n"
"};\n"
msgstr ""

#. type: Plain text
#: build/C/man2/msgop.2:96
msgid ""
"The I<mtext> field is an array (or other structure) whose size is specified "
"by I<msgsz>, a nonnegative integer value.  Messages of zero length (i.e., no "
"I<mtext> field) are permitted.  The I<mtype> field must have a strictly "
"positive integer value.  This value can be used by the receiving process for "
"message selection (see the description of B<msgrcv>()  below)."
msgstr ""

#. type: SS
#: build/C/man2/msgop.2:96
#, no-wrap
msgid "msgsnd()"
msgstr ""

#. type: Plain text
#: build/C/man2/msgop.2:104
msgid ""
"The B<msgsnd>()  system call appends a copy of the message pointed to by "
"I<msgp> to the message queue whose identifier is specified by I<msqid>."
msgstr ""

#. type: Plain text
#: build/C/man2/msgop.2:117
msgid ""
"If sufficient space is available in the queue, B<msgsnd>()  succeeds "
"immediately.  The queue capacity is governed by the I<msg_qbytes> field in "
"the associated data structure for the message queue.  During queue creation "
"this field is initialized to B<MSGMNB> bytes, but this limit can be modified "
"using B<msgctl>(2).  A message queue is considered to be full if either of "
"the following conditions is true:"
msgstr ""

#. type: Plain text
#: build/C/man2/msgop.2:122
msgid ""
"Adding a new message to the queue would cause the total number of bytes in "
"the queue to exceed the queue's maximum size (the I<msg_qbytes> field)."
msgstr ""

#. type: Plain text
#: build/C/man2/msgop.2:131
msgid ""
"Adding another message to the queue would cause the total number of messages "
"in the queue to exceed the queue's maximum size (the I<msg_qbytes> field).  "
"This check is necessary to prevent an unlimited number of zero-length "
"messages being placed on the queue.  Although such messages contain no data, "
"they nevertheless consume (locked) kernel memory."
msgstr ""

#. type: Plain text
#: build/C/man2/msgop.2:142
msgid ""
"If insufficient space is available in the queue, then the default behavior "
"of B<msgsnd>()  is to block until space becomes available.  If B<IPC_NOWAIT> "
"is specified in I<msgflg>, then the call instead fails with the error "
"B<EAGAIN>."
msgstr ""

#. type: Plain text
#: build/C/man2/msgop.2:146
msgid "A blocked B<msgsnd>()  call may also fail if:"
msgstr ""

#. type: Plain text
#: build/C/man2/msgop.2:153
msgid ""
"the queue is removed, in which case the system call fails with I<errno> set "
"to B<EIDRM>; or"
msgstr ""

#. type: Plain text
#: build/C/man2/msgop.2:165
msgid ""
"a signal is caught, in which case the system call fails with I<errno> set to "
"B<EINTR>;B<see> B<signal>(7).  (B<msgsnd>()  is never automatically "
"restarted after being interrupted by a signal handler, regardless of the "
"setting of the B<SA_RESTART> flag when establishing a signal handler.)"
msgstr ""

#. type: Plain text
#: build/C/man2/msgop.2:168 build/C/man2/msgop.2:329
msgid ""
"Upon successful completion the message queue data structure is updated as "
"follows:"
msgstr ""

#. type: Plain text
#: build/C/man2/msgop.2:171
msgid "I<msg_lspid> is set to the process ID of the calling process."
msgstr ""

#. type: Plain text
#: build/C/man2/msgop.2:174
msgid "I<msg_qnum> is incremented by 1."
msgstr ""

#. type: Plain text
#: build/C/man2/msgop.2:177
msgid "I<msg_stime> is set to the current time."
msgstr ""

#. type: SS
#: build/C/man2/msgop.2:177
#, no-wrap
msgid "msgrcv()"
msgstr ""

#. type: Plain text
#: build/C/man2/msgop.2:185
msgid ""
"The B<msgrcv>()  system call removes a message from the queue specified by "
"I<msqid> and places it in the buffer pointed to by I<msgp>."
msgstr ""

#. type: Plain text
#: build/C/man2/msgop.2:211
msgid ""
"The argument I<msgsz> specifies the maximum size in bytes for the member "
"I<mtext> of the structure pointed to by the I<msgp> argument.  If the "
"message text has length greater than I<msgsz>, then the behavior depends on "
"whether B<MSG_NOERROR> is specified in I<msgflg>.  If B<MSG_NOERROR> is "
"specified, then the message text will be truncated (and the truncated part "
"will be lost); if B<MSG_NOERROR> is not specified, then the message isn't "
"removed from the queue and the system call fails returning -1 with I<errno> "
"set to B<E2BIG>."
msgstr ""

#. type: Plain text
#: build/C/man2/msgop.2:220
msgid ""
"Unless B<MSG_COPY> is specified in I<msgflg> (see below), the I<msgtyp> "
"argument specifies the type of message requested, as follows:"
msgstr ""

#. type: Plain text
#: build/C/man2/msgop.2:225
msgid "If I<msgtyp> is 0, then the first message in the queue is read."
msgstr ""

#. type: Plain text
#: build/C/man2/msgop.2:239
msgid ""
"If I<msgtyp> is greater than 0, then the first message in the queue of type "
"I<msgtyp> is read, unless B<MSG_EXCEPT> was specified in I<msgflg>, in which "
"case the first message in the queue of type not equal to I<msgtyp> will be "
"read."
msgstr ""

#. type: Plain text
#: build/C/man2/msgop.2:247
msgid ""
"If I<msgtyp> is less than 0, then the first message in the queue with the "
"lowest type less than or equal to the absolute value of I<msgtyp> will be "
"read."
msgstr ""

#. type: Plain text
#: build/C/man2/msgop.2:252
msgid ""
"The I<msgflg> argument is a bit mask constructed by ORing together zero or "
"more of the following flags:"
msgstr ""

#. type: TP
#: build/C/man2/msgop.2:252
#, no-wrap
msgid "B<IPC_NOWAIT>"
msgstr ""

#. type: Plain text
#: build/C/man2/msgop.2:259
msgid ""
"Return immediately if no message of the requested type is in the queue.  The "
"system call fails with I<errno> set to B<ENOMSG>."
msgstr ""

#. type: TP
#: build/C/man2/msgop.2:259
#, no-wrap
msgid "B<MSG_COPY> (since Linux 3.8)"
msgstr ""

#.  commit 4a674f34ba04a002244edaf891b5da7fc1473ae8
#. type: Plain text
#: build/C/man2/msgop.2:266
msgid ""
"Nondestructively fetch a copy of the message at the ordinal position in the "
"queue specified by I<msgtyp> (messages are considered to be numbered "
"starting at 0)."
msgstr ""

#. type: Plain text
#: build/C/man2/msgop.2:280
msgid ""
"This flag must be specified in conjunction with B<IPC_NOWAIT>, with the "
"result that, if there is no message available at the given position, the "
"call fails immediately with the error B<ENOMSG>.  Because they alter the "
"meaning of I<msgtyp> in orthogonal ways, B<MSG_COPY> and B<MSG_EXCEPT> may "
"not both be specified in I<msgflg>."
msgstr ""

#. type: Plain text
#: build/C/man2/msgop.2:288
msgid ""
"The B<MSG_COPY> flag was added for the implementation of the kernel "
"checkpoint-restore facility and is available only if the kernel was built "
"with the B<CONFIG_CHECKPOINT_RESTORE> option."
msgstr ""

#. type: TP
#: build/C/man2/msgop.2:288
#, no-wrap
msgid "B<MSG_EXCEPT>"
msgstr ""

#. type: Plain text
#: build/C/man2/msgop.2:296
msgid ""
"Used with I<msgtyp> greater than 0 to read the first message in the queue "
"with message type that differs from I<msgtyp>."
msgstr ""

#. type: TP
#: build/C/man2/msgop.2:296
#, no-wrap
msgid "B<MSG_NOERROR>"
msgstr ""

#. type: Plain text
#: build/C/man2/msgop.2:301
msgid "To truncate the message text if longer than I<msgsz> bytes."
msgstr ""

#. type: Plain text
#: build/C/man2/msgop.2:307
msgid ""
"If no message of the requested type is available and B<IPC_NOWAIT> isn't "
"specified in I<msgflg>, the calling process is blocked until one of the "
"following conditions occurs:"
msgstr ""

#. type: Plain text
#: build/C/man2/msgop.2:309
msgid "A message of the desired type is placed in the queue."
msgstr ""

#. type: Plain text
#: build/C/man2/msgop.2:315
msgid ""
"The message queue is removed from the system.  In this case, the system call "
"fails with I<errno> set to B<EIDRM>."
msgstr ""

#. type: Plain text
#: build/C/man2/msgop.2:326
msgid ""
"The calling process catches a signal.  In this case, the system call fails "
"with I<errno> set to B<EINTR>.  (B<msgrcv>()  is never automatically "
"restarted after being interrupted by a signal handler, regardless of the "
"setting of the B<SA_RESTART> flag when establishing a signal handler.)"
msgstr ""

#. type: Plain text
#: build/C/man2/msgop.2:332
msgid "I<msg_lrpid> is set to the process ID of the calling process."
msgstr ""

#. type: Plain text
#: build/C/man2/msgop.2:335
msgid "I<msg_qnum> is decremented by 1."
msgstr ""

#. type: Plain text
#: build/C/man2/msgop.2:338
msgid "I<msg_rtime> is set to the current time."
msgstr ""

#. type: Plain text
#: build/C/man2/msgop.2:351
msgid ""
"On failure both functions return -1 with I<errno> indicating the error, "
"otherwise B<msgsnd>()  returns 0 and B<msgrcv>()  returns the number of "
"bytes actually copied into the I<mtext> array."
msgstr ""

#. type: Plain text
#: build/C/man2/msgop.2:357
msgid ""
"When B<msgsnd>()  fails, I<errno> will be set to one among the following "
"values:"
msgstr ""

#. type: Plain text
#: build/C/man2/msgop.2:363
msgid ""
"The calling process does not have write permission on the message queue, and "
"does not have the B<CAP_IPC_OWNER> capability in the user namespace that "
"governs its IPC namespace."
msgstr ""

#. type: Plain text
#: build/C/man2/msgop.2:371
msgid ""
"The message can't be sent due to the I<msg_qbytes> limit for the queue and "
"B<IPC_NOWAIT> was specified in I<msgflg>."
msgstr ""

#. type: Plain text
#: build/C/man2/msgop.2:376 build/C/man2/msgop.2:423
msgid "The address pointed to by I<msgp> isn't accessible."
msgstr ""

#. type: Plain text
#: build/C/man2/msgop.2:382
msgid "Sleeping on a full message queue condition, the process caught a signal."
msgstr ""

#. type: Plain text
#: build/C/man2/msgop.2:393
msgid ""
"Invalid I<msqid> value, or nonpositive I<mtype> value, or invalid I<msgsz> "
"value (less than 0 or greater than the system value B<MSGMAX>)."
msgstr ""

#. type: Plain text
#: build/C/man2/msgop.2:398
msgid ""
"The system does not have enough memory to make a copy of the message pointed "
"to by I<msgp>."
msgstr ""

#. type: Plain text
#: build/C/man2/msgop.2:404
msgid ""
"When B<msgrcv>()  fails, I<errno> will be set to one among the following "
"values:"
msgstr ""

#. type: TP
#: build/C/man2/msgop.2:404
#, no-wrap
msgid "B<E2BIG>"
msgstr ""

#. type: Plain text
#: build/C/man2/msgop.2:412
msgid ""
"The message text length is greater than I<msgsz> and B<MSG_NOERROR> isn't "
"specified in I<msgflg>."
msgstr ""

#. type: Plain text
#: build/C/man2/msgop.2:418
msgid ""
"The calling process does not have read permission on the message queue, and "
"does not have the B<CAP_IPC_OWNER> capability in the user namespace that "
"governs its IPC namespace."
msgstr ""

#. type: Plain text
#: build/C/man2/msgop.2:427
msgid ""
"While the process was sleeping to receive a message, the message queue was "
"removed."
msgstr ""

#. type: Plain text
#: build/C/man2/msgop.2:432
msgid ""
"While the process was sleeping to receive a message, the process caught a "
"signal; see B<signal>(7)."
msgstr ""

#. type: Plain text
#: build/C/man2/msgop.2:438
msgid "I<msqid> was invalid, or I<msgsz> was less than 0."
msgstr ""

#. type: TP
#: build/C/man2/msgop.2:438 build/C/man2/msgop.2:445
#, no-wrap
msgid "B<EINVAL> (since Linux 3.14)"
msgstr ""

#. type: Plain text
#: build/C/man2/msgop.2:445
msgid "I<msgflg> specified B<MSG_COPY>, but not B<IPC_NOWAIT>."
msgstr ""

#. type: Plain text
#: build/C/man2/msgop.2:452
msgid "I<msgflg> specified both B<MSG_COPY> and B<MSG_EXCEPT>."
msgstr ""

#. type: TP
#: build/C/man2/msgop.2:452 build/C/man2/msgop.2:458
#, no-wrap
msgid "B<ENOMSG>"
msgstr ""

#. type: Plain text
#: build/C/man2/msgop.2:458
msgid ""
"B<IPC_NOWAIT> was specified in I<msgflg> and no message of the requested "
"type existed on the message queue."
msgstr ""

#. type: Plain text
#: build/C/man2/msgop.2:468
msgid ""
"B<IPC_NOWAIT> and B<MSG_COPY> were specified in I<msgflg> and the queue "
"contains less than I<msgtyp> messages."
msgstr ""

#. type: TP
#: build/C/man2/msgop.2:468
#, no-wrap
msgid "B<ENOSYS> (since Linux 3.8)"
msgstr ""

#. type: Plain text
#: build/C/man2/msgop.2:478
msgid ""
"Both B<MSG_COPY> and B<IPC_NOWAIT> were specified in I<msgflg>, and this "
"kernel was configured without B<CONFIG_CHECKPOINT_RESTORE>."
msgstr ""

#.  MSG_COPY since glibc 2.18
#. type: Plain text
#: build/C/man2/msgop.2:490
msgid ""
"The B<MSG_EXCEPT> and B<MSG_COPY> flags are Linux-specific; their "
"definitions can be obtained by defining the B<_GNU_SOURCE> feature test "
"macro."
msgstr ""

#. type: Plain text
#: build/C/man2/msgop.2:510
msgid ""
"The I<msgp> argument is declared as I<struct msgbuf\\ *> in glibc 2.0 and "
"2.1.  It is declared as I<void\\ *> in glibc 2.2 and later, as required by "
"SUSv2 and SUSv3."
msgstr ""

#. type: Plain text
#: build/C/man2/msgop.2:514
msgid ""
"The following limits on message queue resources affect the B<msgsnd>()  "
"call:"
msgstr ""

#. type: TP
#: build/C/man2/msgop.2:514
#, no-wrap
msgid "B<MSGMAX>"
msgstr ""

#. type: Plain text
#: build/C/man2/msgop.2:519
msgid ""
"Maximum size of a message text, in bytes (default value: 8192 bytes).  On "
"Linux, this limit can be read and modified via I</proc/sys/kernel/msgmax>."
msgstr ""

#. type: TP
#: build/C/man2/msgop.2:519
#, no-wrap
msgid "B<MSGMNB>"
msgstr ""

#. type: Plain text
#: build/C/man2/msgop.2:535
msgid ""
"Maximum number of bytes that can be held in a message queue (default value: "
"16384 bytes).  On Linux, this limit can be read and modified via "
"I</proc/sys/kernel/msgmnb>.  A privileged process (Linux: a process with the "
"B<CAP_SYS_RESOURCE> capability)  can increase the size of a message queue "
"beyond B<MSGMNB> using the B<msgctl>(2)  B<IPC_SET> operation."
msgstr ""

#. type: Plain text
#: build/C/man2/msgop.2:541
msgid ""
"The implementation has no intrinsic system-wide limits on the number of "
"message headers (B<MSGTQL>)  and the number of bytes in the message pool "
"(B<MSGPOOL>)."
msgstr ""

#.  http://marc.info/?l=linux-kernel&m=139048542803605&w=2
#.  commit 4f87dac386cc43d5525da7a939d4b4e7edbea22c
#. type: Plain text
#: build/C/man2/msgop.2:561
msgid ""
"In Linux 3.13 and earlier, if B<msgrcv>()  was called with the B<MSG_COPY> "
"flag, but without B<IPC_NOWAIT>, and the message queue contained less than "
"I<msgtyp> messages, then the call would block until the next message is "
"written to the queue.  At that point, the call would return a copy of the "
"message, I<regardless> of whether that message was at the ordinal position "
"I<msgtyp>.  This bug is fixed in Linux 3.14."
msgstr ""

#.  http://marc.info/?l=linux-kernel&m=139048542803605&w=2
#.  commit 4f87dac386cc43d5525da7a939d4b4e7edbea22c
#. type: Plain text
#: build/C/man2/msgop.2:577
msgid ""
"Specifying both B<MSG_COPY> and B<MSC_EXCEPT> in I<msgflg> is a logical "
"error (since these flags impose different interpretations on I<msgtyp>).  In "
"Linux 3.13 and earlier, this error was not diagnosed by B<msgrcv>().  This "
"bug is fixed in Linux 3.14."
msgstr ""

#. type: Plain text
#: build/C/man2/msgop.2:582
msgid "The program below demonstrates the use of B<msgsnd>()  and B<msgrcv>()."
msgstr ""

#. type: Plain text
#: build/C/man2/msgop.2:586
msgid ""
"The example program is first run with the B<-s> option to send a message and "
"then run again with the B<-r> option to receive a message."
msgstr ""

#. type: Plain text
#: build/C/man2/msgop.2:588
msgid "The following shell session shows a sample run of the program:"
msgstr ""

#. type: Plain text
#: build/C/man2/msgop.2:593
#, no-wrap
msgid ""
"$B< ./a.out -s>\n"
"sent: a message at Wed Mar  4 16:25:45 2015\n"
msgstr ""

#. type: Plain text
#: build/C/man2/msgop.2:596
#, no-wrap
msgid ""
"$B< ./a.out -r>\n"
"message received: a message at Wed Mar  4 16:25:45 2015\n"
msgstr ""

#. type: Plain text
#: build/C/man2/msgop.2:610
#, no-wrap
msgid ""
"#include E<lt>stdio.hE<gt>\n"
"#include E<lt>stdlib.hE<gt>\n"
"#include E<lt>string.hE<gt>\n"
"#include E<lt>time.hE<gt>\n"
"#include E<lt>unistd.hE<gt>\n"
"#include E<lt>errno.hE<gt>\n"
"#include E<lt>sys/types.hE<gt>\n"
"#include E<lt>sys/ipc.hE<gt>\n"
"#include E<lt>sys/msg.hE<gt>\n"
msgstr ""

#. type: Plain text
#: build/C/man2/msgop.2:615
#, no-wrap
msgid ""
"struct msgbuf {\n"
"    long mtype;\n"
"    char mtext[80];\n"
"};\n"
msgstr ""

#. type: Plain text
#: build/C/man2/msgop.2:621
#, no-wrap
msgid ""
"static void\n"
"usage(char *prog_name, char *msg)\n"
"{\n"
"    if (msg != NULL)\n"
"        fputs(msg, stderr);\n"
msgstr ""

#. type: Plain text
#: build/C/man2/msgop.2:630
#, no-wrap
msgid ""
"    fprintf(stderr, \"Usage: %s [options]\\en\", prog_name);\n"
"    fprintf(stderr, \"Options are:\\en\");\n"
"    fprintf(stderr, \"-s        send message using msgsnd()\\en\");\n"
"    fprintf(stderr, \"-r        read message using msgrcv()\\en\");\n"
"    fprintf(stderr, \"-t        message type (default is 1)\\en\");\n"
"    fprintf(stderr, \"-k        message queue key (default is "
"1234)\\en\");\n"
"    exit(EXIT_FAILURE);\n"
"}\n"
msgstr ""

#. type: Plain text
#: build/C/man2/msgop.2:636
#, no-wrap
msgid ""
"static void\n"
"send_msg(int qid, int msgtype)\n"
"{\n"
"    struct msgbuf msg;\n"
"    time_t t;\n"
msgstr ""

#. type: Plain text
#: build/C/man2/msgop.2:638
#, no-wrap
msgid "    msg.mtype = msgtype;\n"
msgstr ""

#. type: Plain text
#: build/C/man2/msgop.2:642
#, no-wrap
msgid ""
"    time(&t);\n"
"    snprintf(msg.mtext, sizeof(msg.mtext), \"a message at %s\",\n"
"            ctime(&t));\n"
msgstr ""

#. type: Plain text
#: build/C/man2/msgop.2:650
#, no-wrap
msgid ""
"    if (msgsnd(qid, &msg, sizeof(msg.mtext),\n"
"                IPC_NOWAIT) == -1) {\n"
"        perror(\"msgsnd error\");\n"
"        exit(EXIT_FAILURE);\n"
"    }\n"
"    printf(\"sent: %s\\en\", msg.mtext);\n"
"}\n"
msgstr ""

#. type: Plain text
#: build/C/man2/msgop.2:655
#, no-wrap
msgid ""
"static void\n"
"get_msg(int qid, int msgtype)\n"
"{\n"
"    struct msgbuf msg;\n"
msgstr ""

#. type: Plain text
#: build/C/man2/msgop.2:666
#, no-wrap
msgid ""
"    if (msgrcv(qid, &msg, sizeof(msg.mtext), msgtype,\n"
"               MSG_NOERROR | IPC_NOWAIT) == -1) {\n"
"        if (errno != ENOMSG) {\n"
"            perror(\"msgrcv\");\n"
"            exit(EXIT_FAILURE);\n"
"        }\n"
"        printf(\"No message available for msgrcv()\\en\");\n"
"    } else\n"
"        printf(\"message received: %s\\en\", msg.mtext);\n"
"}\n"
msgstr ""

#. type: Plain text
#: build/C/man2/msgop.2:674
#, no-wrap
msgid ""
"int\n"
"main(int argc, char *argv[])\n"
"{\n"
"    int qid, opt;\n"
"    int mode = 0;               /* 1 = send, 2 = receive */\n"
"    int msgtype = 1;\n"
"    int msgkey = 1234;\n"
msgstr ""

#. type: Plain text
#: build/C/man2/msgop.2:695
#, no-wrap
msgid ""
"    while ((opt = getopt(argc, argv, \"srt:k:\")) != -1) {\n"
"        switch (opt) {\n"
"        case \\(aqs\\(aq:\n"
"            mode = 1;\n"
"            break;\n"
"        case \\(aqr\\(aq:\n"
"            mode = 2;\n"
"            break;\n"
"        case \\(aqt\\(aq:\n"
"            msgtype = atoi(optarg);\n"
"            if (msgtype E<lt>= 0)\n"
"                usage(argv[0], \"-t option must be greater than 0\\en\");\n"
"            break;\n"
"        case \\(aqk\\(aq:\n"
"            msgkey = atoi(optarg);\n"
"            break;\n"
"        default:\n"
"            usage(argv[0], \"Unrecognized option\\en\");\n"
"        }\n"
"    }\n"
msgstr ""

#. type: Plain text
#: build/C/man2/msgop.2:698
#, no-wrap
msgid ""
"    if (mode == 0)\n"
"        usage(argv[0], \"must use either -s or -r option\\en\");\n"
msgstr ""

#. type: Plain text
#: build/C/man2/msgop.2:700
#, no-wrap
msgid "    qid = msgget(msgkey, IPC_CREAT | 0666);\n"
msgstr ""

#. type: Plain text
#: build/C/man2/msgop.2:705
#, no-wrap
msgid ""
"    if (qid == -1) {\n"
"        perror(\"msgget\");\n"
"        exit(EXIT_FAILURE);\n"
"    }\n"
msgstr ""

#. type: Plain text
#: build/C/man2/msgop.2:710
#, no-wrap
msgid ""
"    if (mode == 2)\n"
"        get_msg(qid, msgtype);\n"
"    else\n"
"        send_msg(qid, msgtype);\n"
msgstr ""

#. type: Plain text
#: build/C/man2/msgop.2:720
msgid ""
"B<msgctl>(2), B<msgget>(2), B<capabilities>(7), B<mq_overview>(7), "
"B<sysvipc>(7)"
msgstr ""
