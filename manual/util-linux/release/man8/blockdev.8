.\" Copyright 1998 Andries E. Brouwer (aeb@cwi.nl)
.\" Copyright 2007 Karel Zak <kzak@redhat.com>
.\"
.\" May be distributed under the GNU General Public License
.\"*******************************************************************
.\"
.\" This file was generated with po4a. Translate the source file.
.\"
.\"*******************************************************************
.\"
.\" Japanese Version Copyright (c) 2001-2020 Yuichi SATO
.\"         all rights reserved.
.\" Translated Sat Feb 17 04:25:09 JST 2001
.\"         by Yuichi SATO <sato@complex.eng.hokudai.ac.jp>
.\" Updated & Modified (util-linux 2.35.2) Fri Aug 14 11:16:48 JST 2020
.\"         by Yuichi SATO <ysato444@ybb.ne.jp>
.\"
.TH BLOCKDEV 8 "August 2010" util\-linux "System Administration"
.SH 名前
blockdev \- コマンドラインからブロックデバイスの ioctl を呼び出す
.SH 書式
\fBblockdev\fP [\fB\-q\fP] [\fB\-v\fP] \fIcommand\fP [\fIcommand\fP\&...\&] \fIdevice\fP
[\fIdevice\fP\&...\&]
.br
\fBblockdev\fP \fB\-\-report\fP [\fIdevice\fP\&...\&]
.br
\fBblockdev\fP \-h\fB|\fP\-V
.SH 説明
\fBblockdev\fP ユーティリティを使えば、コマンドラインからブロックデバイスの
ioctl を呼び出すことができる。
.SH オプション
.IP \fB\-q\fP
寡黙モード。
.IP \fB\-v\fP
饒舌モード。
.IP \fB\-\-report\fP
指定したデバイスの情報を表示する。複数のデバイスを指定することもできる。
何も指定しない場合は、/proc/partitions
に記載されているすべてのデバイスが表示される。パーティションの開始セクタ
(StartSec) は 512\-byte セクタによる表示である。
.IP "\fB\-h\fP, \fB\-\-help\fP"
ヘルプテキストを表示して、終了する。
.IP "\fB\-V\fP, \fB\-\-version\fP"
バージョンを表示して、終了する。
.SH コマンド
デバイスもコマンドも複数指定できる。
.IP \fB\-\-flushbufs\fP
バッファをフラッシュする。
.IP \fB\-\-getalignoff\fP
アラインメントオフセット (alignment offset) を取得する。
.IP \fB\-\-getbsz\fP
ブロックサイズをバイト単位で表示する。このサイズが示しているのは、デバイスのトポロジーではない。
これは、カーネルによって内部的に使用されるサイズであり、マウント時に
(たとえば) ファイルシステムドライバによって変更されることもある。
.RS
.IP "[\fB訳注\fP]" 8
デバイスのトポロジーというのは、デバイス固有の物理セクタサイズ、論理セクタサイズ、最小
I/O サイズなどのこと。特に、物理セクタサイズ。
.RE
.IP \fB\-\-getdiscardzeroes\fP
discard zeroes サポートの状態を取得する。
.IP \fB\-\-getfra\fP
ファイルシステムの先読み (readahead) の大きさを 512\-byte セクタ単位で取得する。
.IP \fB\-\-getiomin\fP
最小 I/O サイズを取得する。
.IP \fB\-\-getioopt\fP
最適 I/O サイズを取得する。
.IP \fB\-\-getmaxsect\fP
1 リクエストあたりの最大セクタ数を取得する。
.IP \fB\-\-getpbsz\fP
物理ブロック (セクタ) サイズを取得する。
.IP \fB\-\-getra\fP
先読みの大きさを (512\-byte セクタ単位で) 表示する。
.IP \fB\-\-getro\fP
読み込み専用か否かを検出する。デバイスが読み込み専用ならば 1 を、
さもなければ 0 を表示する。
.IP \fB\-\-getsize64\fP
デバイスのサイズをバイト単位で表示する。
.IP \fB\-\-getsize\fP
デバイスのサイズをセクタ単位で表示する
(32 ビットまでしか対応していない！)。これは非推奨であり、\-\-getsz
オプションを使った方がよい。
.IP \fB\-\-getss\fP
論理セクタサイズをバイト単位で表示する。通常は 512 バイトである。
.IP \fB\-\-getsz\fP
デバイスのサイズを 512\-byte セクタ単位で取得する。
.IP \fB\-\-rereadpt\fP
パーティションテーブルの再読み込みを行う。
.IP "\fB\-\-setbsz\fP \fIbytes\fP"
ブロックサイズを設定する。なお、このブロックサイズは、
ブロックデバイスをオープンしている現在のファイルディスクリプターに限定されたものである。
そのため、ブロックサイズの変更は blockdev
がデバイスをオープンしている間だけ続き、blockdev が終了すると失われる。
.IP "\fB\-\-setfra\fP \fIsectors\fP"
ファイルシステムの先読みの大きさを設定する
(2.6 カーネルの \-\-setra と同様)。
.IP "\fB\-\-setra\fP \fIsectors\fP"
先読みの大きさを (512\-byte セクタ単位で) 設定する。
.IP \fB\-\-setro\fP
読み込み専用に設定する。
デバイスへの現在のアクティブなアクセスは、この変更の影響を受けないかもしれない。
たとえば、既に読み書きモードでマウントされているファイルシステムは、影響を受けない。
変更は再マウント後に適用される。
.IP \fB\-\-setrw\fP
読み書き可に設定する。
.SH 作者
blockdev を書いたのは Andries E.\& Brouwer であり、それを
Karel Zak が書き直した。
.SH 入手方法
この blockdev コマンドは、util\-linux パッケージの一部であり、
https://www.kernel.org/pub/linux/utils/util\-linux/ から入手できる。
