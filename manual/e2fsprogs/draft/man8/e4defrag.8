.\"*******************************************************************
.\"
.\" This file was generated with po4a. Translate the source file.
.\"
.\"*******************************************************************
.\"
.TH E4DEFRAG 8 "May 2009" "e4defrag version 2.0" 
.SH 名前
e4defrag \- ext4 ファイルシステム用のオンライン・デフラグツール
.SH 書式
\fBe4defrag\fP [ \fB\-c\fP ] [ \fB\-v\fP ] \fItarget\fP \&...
.SH 説明
\fBe4defrag\fP はエクステントベースのファイルの断片化 (fragmentation) を削減する。 \fBe4defrag\fP
の対象となるファイルは、 "\-O extent" オプションを指定して作成された ext4 ファイルシステムに作られたファイルである
(\fBmke2fs\fP(8) 参照)。 処理が行われたファイルではブロックがより連続して配置され、ファイルアクセス速度が向上する。
.PP
\fItarget\fP には、通常のファイル、ディレクトリ、 ext4 ファイルシステムとしてマウントされているデバイスが指定できる。 \fItarget\fP
がディレクトリの場合、 \fBe4defrag\fP はそのディレクトリ内の全ファイルの断片化削減を行う。 \fItarget\fP がデバイスの場合、
\fBe4defrag\fP はそのデバイスのマウントポイントを取得し、そのマウントポイントにある全ファイルの断片化削減を行う。
.SH オプション
.TP 
\fB\-c\fP
現在の断片数と理想的な断片数を取得し、これらを元に断片化スコアを計算する。 このスコアを見ることで、 \fItarget\fP に対して
\fBe4defrag\fP を実行すべきかどうかを判断することができる。 \fB\-v\fP オプションと一緒に使用した場合、
ファイル一つ一つについて現在の断片数と理想的な断片数が表示される。
.IP
このオプションでは、一つのエクステント内の平均データサイズも出力される。 この値を見ると、
そのファイルが理想的なエクステントで構成されているかを知ることができる。 (ブロックサイズが 4KB の場合) ext4
ファイルシステムでのエクステントの最大サイズは 131072KB である。
.IP
このオプションが指定された場合、 \fItarget\fP の断片化削減は行われない。
.TP 
\fB\-v\fP
エラーメッセージを出力し、各ファイルの断片化削減の前後で断片数を表示する。
.SH 注意
\fBe4defrag\fP は、スワップファイル、 lost+found ディレクトリのファイル、間接ブロック (indirect block)
に割り当てられたファイルには対応していない。 \fItarget\fP がデバイスかマウントポイントの場合、 \fBe4defrag\fP
は他のデバイスのマウントポイント内のファイルの断片化削除は行わない。
.PP
非特権ユーザは自分が所有するファイルに対して \fBe4defrag\fP を実行できるが、 \fB\-c\fP オプションを指定した場合でもスコアは表示されない。
したがって、 \fBe4defrag\fP は root ユーザで実行するのが望ましい。
.SH 作者
Akira Fujita <a\-fujita@rs.jp.nec.com> と Takashi Sato
<t\-sato@yk.jp.nec.com> が書いた。
.SH 関連項目
\fBmke2fs\fP(8), \fBmount\fP(8).

