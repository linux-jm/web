.\" $Id: xdeview.1,v 1.1 1999/07/29 10:21:09 nakano Exp $ "
.TH XDEVIEW 1 "June 1996"
.SH 名前
xdeview \- バイナリファイル用の高性能デコーダ
.SH 書式
.B "xdeview [Xt options] [-- [-f] [-b] [-o] [-d] [-v] [-s]"
.br
.B "        [-t]] [\fIfile(s) or directories\fP]"
.br
.SH 説明
.I xdeview
は強力なエンコード/デコードエンジンへのグラフィカルインタフェースであ
る。
このプログラムは電子メールや usenet 経由で受け取ったエンコードされた
ファイルを処理するものだが、標準の
.BR uudecode (1)
コマンドよりも高機能である。また、逆の動作を行うことも可能であり、ユー
ザが持つバイナリファイルをエンコードして自動的にメールで送信することや
ニュースへ投稿することができる。
.I xdeview
がサポートしているデコード方法は
.I uuencoding, xxencoding, Base64, BinHex
であり、分割ファイルを処理することや複数ファイルを同時に処理することが
できる。これにより、デコード作業が非常に簡単になる。ユーザは普通、デコー
ドの準備をするためにファイルを手で編集する必要はない。
このような作業にはグラフィカルなフロントエンドを特に必要としないなら、
.BR uudeview (1)
と
.BR uuenview (1)
を参照すること。
.PP
このプログラムは起動されると、与えられた全てのファイルをスキャンしてエ
ンコードされたデータを探す。与えたファイルのいずれかがディレクトリなら
ば、再帰的なディレクトリ移動が行われる。
ファイルをコマンドラインで指定する必要はない。後でプログラム中でファイ
ルを選択することもできる。最初のスキャンが終わった後、うまくデコードで
きそうなファイルリストがユーザに示される。ユーザはこの一覧からデコード
するファイルを個別に選ぶ。
.SH オプション
オプションをコマンドラインで設定する必要は特にない。オプションはプログ
ラム中でも設定できるからである。オプションの前には '--' を置かなければ
ならず、そうでない場合には表示オプションと間違われるかもしれないので注
意すること。
.TP
.B -d
このプログラムを desperate モードにする。このモードでは、不完全なファ
イルもデコードの候補となる。この機能が有効なのは 50 パートに分かれた投
稿の最後の部分が欠けているような場合であるが、無理にデコードしたファイ
ルは大抵の場合は単に壊れていて利用できないだろう。不完全なファイルがど
の程度使えるかはファイルの種類による。
.TP
.B -f
高速モードでファイルをスキャンする。
.I xdeview
は各入力ファイルに多くとも 1 ファイルしか含まれていないものと想定する。
これは普通、ニューススプール内にあるファイルでは正しい。このオプション
を指定すると、複数の記事に分けられた入力ファイルのデコードは
.B 中断される
。また、一部の正当性チェックも無効になるので、誤りがあるファイルもおそ
らくデコードの候補として示される。デコードの時にエラーメッセージを受け
取ることもあるし、単に不正なファイルが得られることもある。このような問
題に遭いたくないのならば、
.B -f
オプションは使わないこと。
.TP
.B -o
デコード時に既存のファイルを上書きすることを許可する。デフォルトでは、
上書きするか、別の名前を付けるか、そのファイルを飛ばすかの問い合わせが
ユーザに対して行われる。
.TP
.B -v
詳細表示を無効にする。通常、このプログラムは入力ファイルを読み込む際に
何らかのステータスメッセージを表示する。これは問題が起きたときには非常
に訳に立つ。このようなメッセージが鬱陶しい場合に使うこと。
.TP
.B -p パス
デコードしたファイルを書き込むディレクトリを設定する。これは有効なパス
名でなければならず、そうでない場合はファイルをデコードしようとした時に
エラーとなる。デフォルト値はカレントの作業ディレクトリである。
.TP
.B -b1
このオプションは、サブジェクトからパート番号を取り出すという
.I xdeview
のポリシーを変更する。このオプションが必要となるのは稀であるが、
例えば複数に分割して投稿が行われた時のように、パート番号が 括弧 () や
ブラケット [] 内に書かれている場合だけは必要となる。
デフォルトでは、
.I xdeview
はまず 括弧 () 内にある数字を使う。しかし、この番号が全体のファイル数
を示しており、パート番号はブラケット [] に書かれている場合には、このパ
ラメータを使って
.I xdeview
に他の数字を最初に読み込ませるようにすること。このオプションは、1 種類
の括弧しか含まないファイルや、どちらの種類の括弧も含まないファイルの展
開には影響を与えない。必要ならば、このオプションは
.B -b[]
のように使うこともできる。
.TP
.B -s
「賢さを取り除く(minus smartness)」と読むこと。このオプションは、サブ
ジェクト行からのパート番号の自動検出を無効にする。
.I xdeview
がサブジェクト行の正しい展開に失敗してパート番号の推定時にエラーを出力
し、パートの順番が狂う場合にはこのオプションを試すとよい。このオプショ
ンを使うと、パートは必ず順番通りに繋げられる(したがって、入力ファイル
ではパートを正しい順番に並べなければならない)。
.B 注意:
この場合でも、きちんとした
.I MIME
ファイルに含まれている正しいパート番号は評価される。
.TP
.B -t
プレーンテキストのメッセージを使う。通常、uudeview はデコードの際には
エンコードされたデータだけを表示する。このオプションを設定すると、
.I MIME
メッセージに入っているテキストパートやエンコードされていないデータもデ
コード対象して示す。プレーンテキストのメッセージにはファイル名が付けら
れていないことが多いので、これらには 4 桁の数字を順に使ったユニークな
名前が付けられる。
.SH メインメニュー
.I xdeview
のメインウィンドウは 6 つの主な要素からなる。この一番上にあるのは
.I メニューバー
である。
真ん中にあるのは
.I ファイルリスト
である。これはエンコードされたデータ内で検出され、デコードしようとして
いるファイル全てのリストである。ファイルリストの左にあるのが
.I ステータスリスト
である。これは各ファイルの状態を示す。このリストは普通、全てのファイル
について "OK" となる。というのも、普通はエラーとなったファイルは表示さ
れないからである。
右側にあるのは、良く使われる機能を呼び出すショートカットボタンを集めた
ものである。ウィンドウの一番下にあるのは
.I Save Path
エントリのフィールドとステータスバーである。これらの要素については後で
個別に説明する。
.SH メニューバー
.TP
.B File メニュー
.RS
.TP
.B Load ...
エンコードされたファイルをロードする。これらのファイルはスキャンされ、
エンコードされたデータとファイルが検索される。これらのファイルはファイ
ルリストに追加される。ディレクトリを検索することもでき、この場合にはそ
のディレクトリへの再帰的な移動が行われる。
.TP
.B Encode
ファイル(複数可)をエンコードする。エンコードしたファイルはディスクに格
納することや電子メールで送ること、ニュースグループに投稿することができ
る。これらについては後述する。
.TP
.B Helpers
xdeview は、Execute" ボタンが押されたときに適切なデフォルト動作を行う
ために .mailcap と .mime.types から情報を読み込む。このダイアログでは、
これらのファイルの位置を設定することができる。
.TP
.B Save Setup
現在のオプションやファイルの入出力の対象パスをホームディレクトリの .xdeviewrc
ファイルに保存する。このファイルは起動時に自動的に読み込まれるので、保
存された設定は次回以降のセクションでデフォルトで設定される。このリソー
スファイルは実際には Tcl のスクリプトであり、好きなエディタで編集する
ことができる。
.TP
.B Quit
プログラムを終了する。
.RE
.TP
.B Options
プログラムの動作を変えるための各種オプションを設定する。ほとんどのオプ
ションは設定後に読み込んだファイルにしか適用されない点に注意すること。
.RS
.TP
.B Fast Scanning
高速スキャンモードを設定する。このプログラムは、各入力ファイルに多くと
も 1 ファイルしか含まれていないものと想定する(普通、ニューススプール内
にあるファイルでは正しい)。各ファイルについて内容を全部読む必要がない
のでスキャニングエンジンの動作は高速になるが、エンコードされたデータが
見つかった後にはスキャンが終了する。
.PP
高速モードでは、デコーダは安全のためのオプションをいくつか無効にしなけ
ればならない。したがって、ファイルに何らかの問題がある場合でも、これを
検出できるのは最終的にデコードを行う時だけとなる。
.TP
.B Automatic Overwrite
出力先ディレクトリに既に存在する名前のファイルをデコードするとき、ファ
イルを上書きするかどうかユーザに問い合わせが行われる。このオプションを
有効にすると、出力ファイルは問い合わせなしで上書きされる。
.TP
.B Desperate Mode
ユーザに示されるファイルは通常、全てのパートを検出できたものだけである。
desparate モードを有効にすると、ユーザは他のファイルも見ることができる。
この際には問題点の適切な説明がステータスリストに表示される。desparate
モードでは、デコーダは MIME メッセージ外部にある短い Base64 形式ファイ
ルも検出しようとする。この機能は通常は無効である。というのも、無理に
Base64 エンコーディングを見つけようとすると、エンコードされたデータを
誤って検出し、不正なファイルができてしまうかもしれないからである。
.TP
.B Verbose Mode
入力ファイルのスキャン時に追加メッセージが表示されるテキストボックスを
別ウィンドウで開く。このようなメッセージは、ファイルがうまくデコードで
きない場合に問題点を見つける際に非常に役立つ。
.TP
.B Alternate Bracket Policy
デコーダがサブジェクト行からパート番号を取り出そうとする際に使うヒュー
リスティクスを変える。このアルゴリズムでは通常、ブレース () 内の数字を
ブラケット [] 内の数字より優先させる。両方の種類の括弧があり、衝突する
ような使い方をされている場合(例えば、パート番号とシリーズ番号が両方と
もある場合)には、括弧の使い方を明示的に決めなければならないかもしれな
い。このオプションが false (デフォルト値)ならば「パート番号」はブレー
ス () から取り出され、true ならばブラケット [] から取り出される。
.TP
.B Dumb Mode
サブジェクト行の展開によるパート番号の自動検出を無効にする。
.I xdeview
が正しいパート番号の取得に失敗した場合に用いること。このオプションを設
定すると、パートを正しい順番で並べて入力ファイルにしなければならない。
また、この方法では欠けているパートは検出されない。
.TP
.B Handle Text Files
xdeview は通常、デコードの際にはエンコードされたデータだけを表示する。
このオプションを設定すると、
.I MIME
メッセージに入っているテキストパートやエンコードされていないデータもデ
コード対象して示される。プレーンテキストのメッセージにはファイル名が付
けられていないことが多いので、これらには 4 桁の数字を順に使ったユニー
クな名前が付けられる。
.TP
.B Auto Info
ファイルリスト中のファイルをクリックすると情報ウィンドウを開くようにす
る。
.RE
.TP
.B Actions
.RS
.TP
.B Decode
選択されたファイル(複数可)をデコードする。
.TP
.B Rename
選択されたファイル(複数可)の名前を変える。これは例えば、ファイル名が既
存のファイルと重なる場合や、名前がシステムの制限に合わない場合に使う。
.TP
.B Decode All
現在ファイルリストに表示されているファイルを全てデコードする。
.TP
.B Info
現在選択されているファイルの利用可能な情報を表示する(複数のファイルが
選択されている場合には、最初のファイルの情報だけが表示される)。表示さ
れる情報は、ファイルの 0 番目のパート(利用可能ならば)またはエンコード
されたデータの開始部分までにある最初のパートのヘッダである。
.TP
.B Execute
外部プログラムを実行nし、現在選択されているファイルを与える。外部プロ
グラムは、まずメッセージの
.I Content-Type
を(可能ならば)参照し、次にファイルの拡張子をチェックして決める。ユーザの
.B .mailcap
または
.B .mime.types
ファイルから適切な情報が読み込まれる(ただし、.mailcap ファイル内の情報
の扱いは現在のところ不十分である)。マッチする MIME 型が見つからない場
合には、ユーザが任意のコマンドを入力できるダイアログボックスが表示され
る。
.TP
.B List Text File
これは、テキストファイルがネット上をエンコードされた形で送られるという
滅多にない場合のためのものである。これを使うのは、ユーザが対象のファイ
ルが確かにテキストファイルであることが分かっている場合だけである。それ
以外の場合には、画面上にゴミが読み込まれることになる。
.RE
.TP
.B Help
.RS
.TP
.B About
作者からの簡単なメッセージである。
.TP
.B License
xdeview を配布する際のライセンスである GPL を表示する。ちゃんと読まな
いと、作者の弁護士を相手にすることになるだろう。
.SH ファイルリスト
ファイルリストは、エンコードされたデータのスキャンの際に見つかったファ
イルが全て表示されるリストボックスである。これらのファイルはいつでもデ
コード、プレビュー等の好きな処理をすることができる。このリストはリスト
の右のスクロールバーを使ってスクロールさせることができる。
.PP
ファイルを 1 つずつ選ぶなら単にクリックすればよい。複数のファイルを選
ぶには、
.I CTRL
キーを押しながらファイルをクリックする。
.SH ステータスリスト
ステータスリストは
.I ファイルリスト
中の対応するファイルの状態を示す。通常はここには "OK" が表示される。そ
れ以外の場合には、ファイルがうまくデコードできなかった理由を説明するエ
ラーメッセージが表示される。状態としては以下のものがある:
.TP
.B OK
ファイル中の全てのパートが見つかり、簡単に調べた限りではエンコードされ
たデータは正しいと思われる。ファイルのデコード時にだけ起こる何らかの問
題があるかもしれないが、普通は全く問題ない。
.TP
.B Incomplete
このファイルには欠けているパートが 1 つ以上ある。このファイルをデコー
ドしても出力データは壊れており、普通は使用できない。
.TP
.B No Begin
ファイルの開始部分がない。デコードされたファイルはほぼ確実に壊れており、
利用できない。
.TP
.B No End
ファイルの終了部分が見つからない。これは普通、ファイルの末尾のパートが
欠けていることを示す。デコードされたファイルがどの程度使えるかは、ファ
イルの種類による。
.TP
.B Error
以前にファイルをデコードしようとして失敗した。
.SH ショートカットボタン
ウィンドウの右側にあるボタンはメニュー要素へのショートカットである。内
容については、前述のメインメニューの要素の説明を読むこと。
.SH 保存パス
これはデコードされたファイルが書き出されるパスである。
.SH ステータス
プログラムの現在の処理内容やユーザに求めている入力に関する簡単なメッセー
ジ。
.SH エンコーディングメニュー
ファイルをエンコードする時("File" メニューの "Encode")には、大きなダイ
アログボックスが開き、そのファイルに対してオプションを色々設定すること
ができる。複数のファイルをエンコード対象として選んだ場合には、一番上の
ステータス行に残りのファイル数が表示される。ダイアログそのものは全ての
ファイルが処理されるまで消えない。
.TP
.B Filename
現在のエンコード対象ファイル。このフィールドを編集することはできない。
.TP
.B Send As
ファイルを送る時に使う名前。デフォルトではファイル名からディレクトリ情
報を全て取り除いたものになる。
.TP
.B Use Subject
メール送信やニュース投稿のとき、このテキストをサブジェクトとして使う。
ファイル名とパート番号は自動的に追加されるので、この行は空にしても良い。
.TP
.B Lines per File
エンコードしたデータのパートごとの行数を設定する。大きいファイルは自動
的に複数のパートに分割される。ニュースグループにファイルを投稿する場合
や、メール受信者のメーラが大きなファイルを処理できない場合に使用するこ
と。分割のサイズとしては 1000 行が良いだろう。"0" 行はファイル分割を行
わないという指定である。
.TP
.B ... Encoding
使用するエンコーディング方法を選択する。どれが最も良いか分からなければ、
筆者が書いた "デコーディング入門(Introduction to Decoding)" という記事
を見れば手がかりが得られるかもしれない。
.TP
.B File In (Path)
エンコードしたファイルを置く場所を設定する。エンコードしたものは元のファ
イルとベース名は同じであるが、拡張子 .001, .002 が付けられる(拡張子は
"Lines per File" の設定から決まる必要なパート数によって決まる)。
.TP
.B Email To
コンマで区切った電子メールアドレスのリストを与える。お使いのシステムで
電子メール送信が許可されていない場合には、このオプションは無効になって
いるかもしれない。
.TP
.B Post To
ファイルを投稿するニュースグループをコンマで区切ったリストを入力するこ
とができる。お使いのシステムでニュース投稿がサポートされていない場合に
は、このオプションは無効になっているかもしれない。
.TP
.B NNTP Server
このフィールドは一部のシステムでしか現われない。つまり、ニュースのホス
トが必要であるが、コンパイル時に何も設定されていない場合である。この
フィールドがある場合、ニュース投稿を行うためには正しいホスト名を入力し
なければならない。ニュースを投稿するつもりが特になければ、この設定は気
にしなくてもよい。
.TP
.B OK
選択されたアクションをこのファイルに対して実行し、次のファイルに移動す
る。
.TP
.B OK to All
対象となっているそれぞれのファイルに対して現在の設定を使用する(別のファ
イルについての問い合わせを行わない)。したがって、全てのファイルが一度
に処理される。
.TP
.B Next
ファイルをエンコードせず、次のファイルに移動する(申し訳ないが、前に戻
るためのボタンはない)。
.TP
.B Cancel
エンコードをキャンセルし、メインメニューに戻る。
.SH 設定ファイル
ホームディレクトリに
.I .xdeviewrc
ファイルがあれば、これはプログラムの初期化時に Tcl インタプリタに読み
込まれる。このファイルは正しい Tcl プログラムでなければならないが、こ
れを使ってオプションをデフォルトで設定することができる。Tcl を知らない
人のために変数設定の文法を以下に示す:
.PD 0
.PP
.B set 変数名 値
.PP
.PD
以下の変数(オプション)を設定することができる(オプションの動作について
は、前の説明を参照すること):
.TP
.B OptionFast
1 を設定すると高速スキャンモードが使われる。
.TP
.B OptionBracket
1 を設定すると、ブラケットの処理方法が変わる。
.TP
.B OptionOverwrite
1 を設定すると、問い合わせなしでもファイルの上書きが許可されたことにな
る。
.TP
.B OptionDesperate
1 を設定すると、desperate モードに切り替わる。
.TP
.B OptionVerbose
1 を設定すると、進行状況メッセージが出力される。
.TP
.B SaveFilePath
これはデフォルトの保存パス(ファイルがデコードさせる先)を示す文字列変数
である。
.TP
.B EncodeMaxLines
エンコードの際のファイルごとの最大の行数。"0" を指定すると無制限になる。
.TP
.B EncodeEncoding
デフォルトで使うエンコード方法。"0" が uuencode エンコーディング、"1"
が xxencode エンコーディング、"2" が Base64 エンコーディングである。
.TP
.B NNTPServer
使用する NNTP サーバのアドレス(一部のシステムだけで必要)。環境変数
.I NNTPSERVER
で設定することもできる(こちらの方が好ましい)。
.SH 実行時のメッセージ
詳細表示モードを有効にしてあれば、進行状況メッセージが
.I Runtime Messages
という名前の独立したウィンドウが現われる。スキャニングの段階で生成され
たメッセージを理解できれば、これはプログラムの進行を追跡する時には非常
に役立つし、ファイルのデコードに失敗した理由を調べるために使うことがで
きる。プログラムを動かすだけならこのセクションを理解する必要はない。
.PP
最初に「読み込み中」のメッセージが表示される。これは文字列 "Loaded" で
始まる。それぞれの行には次の要素が表すはずである:
.TP
.B 入力ファイル
最初の要素は、パートの読み込みが行われる入力ファイルである。1 つのファ
イル内でたくさんのパートが検出されることもある。
.TP
.B サブジェクト行
シングルクォートで括った形で、サブジェクト行が完全に複製される。
.TP
.B 識別子
このプログラムは、スレッドのためのユニークな識別子をサブジェクト行から
決め、同じファイルに属すると思われる記事をまとめるために使う。このアル
ゴリズムの結果は、括弧で括って表示される。
.TP
.B ファイル名
ファイル名がサブジェクト行やファイル内で見つかったかどうか(例えば、
begin 行や Content-Type 情報の一部として見つかることがある)。
.TP
.B パート番号
パート番号。これはサブジェクト行パート番号から求めるか、あるいは正しい 
MIME 形式のメッセージ場合には「パート」情報から求める。
.TP
.B Begin/End
"begin" トークンまたは "end" トークンが検出された場合、ここに表示され
る。
.TP
.B エンコーディング型
このパート内でエンコードされたデータが検出された場合、"UUdata", 
"Base64", "XXdata", "Binhex" のいずれかがここに表示される。
.PP
スキャンが終わった後にはこれ以外のメッセージが出力される。記事のグルー
プそれぞれに対して 1 つの行が出力される。この行の内容は例で見る方が分
かりやすいだろう。以下に例を示す:
.PP
.B Found 'mailfile.gz' State 16 UUData Parts begin 1 2 3 4 5 end 6 OK
.PP
この行はファイル
.I mailfile.gz
が見つかったことを示す。ファイルは uuencode されており("UUData")、6 つ
のパートからなる。また、"begin" トークンが最初のパートで見つかり、
"end" トークンが 6 番目のパートで見つかった。全て揃っているように見え
るので、このファイルには "OK" のタグが付けられる。
.I State
には以下に示す各種ビットが設定される。ビットの値は OR を取ることができ
る。
.TP
.B 1
欠けているパートがある
.TP
.B 2
Begin が無い
.TP
.B 4
End が無い
.TP
.B 8
エンコードされているデータが見つからない
.TP
.B 16
ファイルは問題なしと思われる
.TP
.B 32
ファイルのデコード時にエラーが起きた
.TP
.B 64
ファイルがうまくデコードできた
.SH 注意
.I xdeview
が実行できず "command not found" といった表示がされるが、ファイルその
ものは確かにある場合には、
.I xdeview
の最初の部分を見て、メインファイル
.I uuwish
への参照が正しいかどうかを確認すること。
.SH 関連項目
.BR uudeview (1),
.BR uuenview (1),
.BR uudecode (1),
.BR uuencode (1),
.PD 0
.PP
ウェブ上にある
.I uudeview
のホームページ:
.PD 0
.PP
http://www.uni-frankfurt.de/~fp/uudeview/
.PD
.SH バグ
バグを見つけたと思ったら、入力ファイル(できれば単に入れるだけでなく、
元のファイルに圧縮とエンコードを施すこと)とプログラムのメッセージのリ
スト(詳細表示モード)を
.I fp@informatik.uni-frankfurt.de
宛に送ること。

