<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html401/loose.dtd">
<html>
<!-- このマニュアルは、GNU core utilities version 8.26 の詳細な解説である。
core utilities には、テキストやファイルを操作するための標準的なプログラムが入っている。

Copyright C 1994-2016 Free Software Foundation, Inc.

Japanese translation copyright C 2014-2017 Linux JM project

Permission is granted to copy, distribute and/or modify this document under
the terms of the GNU Free Documentation License, Version 1.3 or any later
version published by the Free Software Foundation; with no Invariant
Sections, with no Front-Cover Texts, and with no Back-Cover Texts.  A copy
of the license is included in the section entitled "GNU Free Documentation
License".


【訳者から御注意】 この文書を info コマンドで閲覧なさっている場合は、
行末に余計な文字が入って、読みにくいことがあるかもしれない。
そうしたときは、Ctrl キーと l (エル) キーを同時に押して、画面を再描画していただきたい。
たぶん、表示が正常になるはずである。

お手元の coreutils のバージョンが 8.26 以外の場合、
この文書の説明と動作が違うことがあるかもしれない 
(たとえば、この文書に書いてあるオプションが使えない、あるいは、
使えるはずのオプションの説明がないなど)。
そうした場合は、お使いの coreutils と同じバージョンの info マニュアルや 
man ページに当ってみていただきたい。そちらの方が正しいはずである。
 -->
<!-- Created on June 7, 2022 by texi2html 1.82
texi2html was written by: 
            Lionel Cons <Lionel.Cons@cern.ch> (original author)
            Karl Berry  <karl@freefriends.org>
            Olaf Bachmann <obachman@mathematik.uni-kl.de>
            and many others.
Maintained by: Many creative people.
Send bugs and suggestions to <texi2html-bug@nongnu.org>
-->
<head>
<title>GNU Coreutils: 11.3 install: ファイルをコピーし属性をセットする</title>

<meta name="description" content="GNU Coreutils: 11.3 install: ファイルをコピーし属性をセットする">
<meta name="keywords" content="GNU Coreutils: 11.3 install: ファイルをコピーし属性をセットする">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="texi2html 1.82">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.smallquotation {font-size: smaller}
pre.display {font-family: serif}
pre.format {font-family: serif}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
pre.smalldisplay {font-family: serif; font-size: smaller}
pre.smallexample {font-size: smaller}
pre.smallformat {font-family: serif; font-size: smaller}
pre.smalllisp {font-size: smaller}
span.roman {font-family:serif; font-weight:normal;}
span.sansserif {font-family:sans-serif; font-weight:normal;}
ul.toc {list-style: none}
-->
</style>


</head>

<body lang="en" bgcolor="#FFFFFF" text="#000000" link="#0000FF" vlink="#800080" alink="#FF0000">

<a name="install-invocation"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="coreutils-ja_79.html#dd-invocation" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="coreutils-ja_81.html#mv-invocation" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="coreutils-ja_77.html#Basic-operations" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="coreutils-ja_77.html#Basic-operations" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="coreutils-ja_84.html#Special-file-types" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="coreutils-ja.html#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="coreutils-ja_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="coreutils-ja_220.html#Concept-index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="coreutils-ja_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<hr size="1">
<a name="install_003a-huairuwokopisiShu-Xing-wosetutosuru"></a>
<h2 class="section">11.3 <code>install</code>: ファイルをコピーし属性をセットする</h2>

<a name="index-install"></a>
<a name="index-copying-files-and-setting-attributes"></a>

<p><code>install</code> はファイルをコピーするとき、ファイルのモードビット
(訳注: 一般にアクセス権とか、許可属性と言われるもの) をセットし、可能ならば、
所有者やグループも設定する。
</p>
<p>書式:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">install [<var>option</var>]&hellip; [-T] <var>source</var> <var>dest</var>
install [<var>option</var>]&hellip; <var>source</var>&hellip; <var>directory</var>
install [<var>option</var>]&hellip; -t <var>directory</var> <var>source</var>&hellip;
install [<var>option</var>]&hellip; -d <var>directory</var>&hellip;
</pre></td></tr></table>

<ul>
<li>
ファイル名を二つ指定すると、<code>install</code> は最初のファイルを
2 番目のファイルにコピーする。

</li><li>
&lsquo;<samp>--target-directory</samp>&rsquo; (&lsquo;<samp>-t</samp>&rsquo;) オプションを指定した場合や、
あるいはそれを指定しないでも、最後のファイルがディレクトリであり、しかも
&lsquo;<samp>--no-target-directory</samp>&rsquo; (&lsquo;<samp>-T</samp>&rsquo;) オプションを指定していない場合は、
<code>install</code> は各 <var>source</var> ファイルを指定されたディレクトリに、<var>source</var>
の名前でコピーする。

</li><li>
&lsquo;<samp>--directory</samp>&rsquo; (&lsquo;<samp>-d</samp>&rsquo;) を指定すると、<code>install</code> は各
<var>directory</var> を作成する。
このとき、親ディレクトリが存在しなければ、それも作成する。
作成される親ディレクトリのモードは、&lsquo;<samp>-m</samp>&rsquo; オプションの指定や現在の umask
にかかわりなく、&lsquo;<samp>u=rwx,go=rx</samp>&rsquo; (755) になる。
親ディレクトリの set-user-ID ビットや set-group-ID ビットの継承については、
次の節を参照していただきたい。See section <a href="coreutils-ja_197.html#Directory-Setuid-and-Setgid">ディレクトリの Set-User-ID と Set-Group-ID ビット</a>.
</li></ul>

<a name="index-Makefiles_002c-installing-programs-in"></a>
<p><code>install</code> は <code>cp</code> に似ているが、コピー先ファイルの属性を自由に設定できる点が違う。
<code>install</code> は通常、Makefile の中で、プログラムを目標のディレクトリにコピーするために使用される。
<code>install</code> では、ファイルをそれ自身にコピーすることはできない。
</p>
<a name="index-extended-attributes_002c-xattr"></a>
<p><code>install</code> が拡張属性 (xattr) を保存することはない。
</p>
<p>このプログラムでは以下のオプションが使用できる。参照: <a href="coreutils-ja_2.html#Common-options">共通オプション</a>.
</p>
<dl compact="compact">
<dt> &lsquo;<samp>-b</samp>&rsquo;</dt>
<dt> &lsquo;<samp>--backup[=<var>method</var>]</samp>&rsquo;</dt>
<dd><a name="index-_002db-15"></a>
<a name="index-_002d_002dbackup-2"></a>
<a name="index-VERSION_005fCONTROL-2"></a>
<a name="index-backups_002c-making-2"></a>
<p>See section <a href="coreutils-ja_4.html#Backup-options">バックアップ・オプション</a>.  そのままでは、上書きされるか、消去されてしまう各ファイルのバックアップを作成する。
</p>
</dd>
<dt> &lsquo;<samp>-C</samp>&rsquo;</dt>
<dt> &lsquo;<samp>--compare</samp>&rsquo;</dt>
<dd><a name="index-_002dC-2"></a>
<a name="index-_002d_002dcompare"></a>
<p>インストール元とインストール先の対応するファイルを比較し、
インストール先にあるファイルがインストール元と内容が同じで、
しかも、所有者、グループ、許可属性、場合によっては SELinux
コンテキストについて、そのどれもが指定されているものと同一であるときは、
インストール先ファイルを全く変更しない。
このオプションは、&lsquo;<samp>--user</samp>&rsquo;, &lsquo;<samp>--group</samp>&rsquo;, &lsquo;<samp>--mode</samp>&rsquo;
オプションと併せて使うのが最善である。そういうものを指定しない場合、
<code>install</code> コマンドが、(たとえば、ディレクトリに
setgid が付いていることや、POSIX のデフォルトの ACL を顧慮しないせいで)、
インストールされるファイルがデフォルトで持つはずの属性を不正確に決めてしまうかもしれないのだ。
そんなことがあると、無駄なコピーが行われたり、
属性が正しいデフォルト値に設定されなかったりといった不都合が生じかねない。
</p>
</dd>
<dt> &lsquo;<samp>-c</samp>&rsquo;</dt>
<dd><a name="index-_002dc-13"></a>
<p>無視する。Unix の古いバージョンの  <code>install</code> との互換性のために
ある。
</p>
</dd>
<dt> &lsquo;<samp>-D</samp>&rsquo;</dt>
<dd><a name="index-_002dD-2"></a>
<p><var>dest</var> の指定中に存在していない親ディレクトリがあれば、
それを作成してから、<var>source</var> を <var>dest</var> にコピーする。
&lsquo;<samp>-D</samp>&rsquo; とともに明示的に &lsquo;<samp>--target-directory=<var>dir</var></samp>&rsquo;
を指定した場合も、やはり出力先のディレクトリ階層が確実に存在するようになる。
</p>
</dd>
<dt> &lsquo;<samp>-d</samp>&rsquo;</dt>
<dt> &lsquo;<samp>--directory</samp>&rsquo;</dt>
<dd><a name="index-_002dd-11"></a>
<a name="index-_002d_002ddirectory-1"></a>
<a name="index-directories_002c-creating-with-given-attributes"></a>
<a name="index-parent-directories_002c-creating-missing"></a>
<a name="index-leading-directories_002c-creating-missing"></a>
<p>まず、存在していない親ディレクトリがあれば作成し、それにデフォルトの属性を与える。
それから、指定された各ディレクトリを作成し、所有者、グループ、許可属性を、
コマンドラインで指定されたとおりに、またはデフォルトの値に設定する。
</p>
</dd>
<dt> &lsquo;<samp>-g <var>group</var></samp>&rsquo;</dt>
<dt> &lsquo;<samp>--group=<var>group</var></samp>&rsquo;</dt>
<dd><a name="index-_002dg-4"></a>
<a name="index-_002d_002dgroup-1"></a>
<a name="index-group-ownership-of-installed-files_002c-setting"></a>
<p>インストールするファイルやディレクトリの所有グループを <var>group</var> にする。
デフォルトでは、プロセスの現在のグループになる。
<var>group</var> は、グループ名でも、グループの ID 番号でもよい。
</p>
</dd>
<dt> &lsquo;<samp>-m <var>mode</var></samp>&rsquo;</dt>
<dt> &lsquo;<samp>--mode=<var>mode</var></samp>&rsquo;</dt>
<dd><a name="index-_002dm-4"></a>
<a name="index-_002d_002dmode"></a>
<a name="index-permissions-of-installed-files_002c-setting"></a>
<p>インストールするファイルやディレクトリのモードビットを <var>mode</var> にする。
<var>mode</var> の指定は、&lsquo;<samp>a=</samp>&rsquo; (誰にもアクセスを許さない) を基点として行い、
8 進数でも、<code>chmod</code> で使うようなシンボリックモードでもよい
(see section <a href="coreutils-ja_186.html#File-permissions">ファイルの許可属性</a>)。デフォルトのモードは、
&lsquo;<samp>u=rwx,go=rx,a-s</samp>&rsquo; である。すなわち、所有者には読み、書き、実行を許可し、
グループとその他のユーザには読みと実行のみを許可、
set-user-ID と set-group-ID は無効にする。このデフォルトは、&lsquo;<samp>755</samp>&rsquo;
と全く同じではない。なぜなら、デフォルトの方は、ディレクトリについて
set-user-ID や set-group-ID を引き継がず、無効にしているからである。
See section <a href="coreutils-ja_197.html#Directory-Setuid-and-Setgid">ディレクトリの Set-User-ID と Set-Group-ID ビット</a>. 
</p>
</dd>
<dt> &lsquo;<samp>-o <var>owner</var></samp>&rsquo;</dt>
<dt> &lsquo;<samp>--owner=<var>owner</var></samp>&rsquo;</dt>
<dd><a name="index-_002do-6"></a>
<a name="index-_002d_002downer"></a>
<a name="index-ownership-of-installed-files_002c-setting"></a>
<a name="index-appropriate-privileges"></a>
<a name="index-root-as-default-owner"></a>
<p><code>install</code> が適切な権限を持っている場合に
(つまり、root 権限で実行されている場合に)、インストールするファイルやディレクトリの所有者を
<var>owner</var> にする。デフォルトでは <code>root</code> になる。<var>owner</var>
の指定は、ユーザ名でも、ユーザの ID 番号でもよい。
</p>
</dd>
<dt> &lsquo;<samp>--preserve-context</samp>&rsquo;</dt>
<dd><a name="index-_002d_002dpreserve_002dcontext"></a>
<a name="index-SELinux-1"></a>
<a name="index-security-context-2"></a>
<p>ファイルやディレクトリの SElinux セキュリティ・コンテキストを引き継ぐ。
ファイルやディレクトリすべてのセキュリティ・コンテキストを引き継げなかった場合は、
終了ステータスが 1 になる。SElinux が無効になっているときは、警告を出し、
このオプションを無視する。
</p>
</dd>
<dt> &lsquo;<samp>-p</samp>&rsquo;</dt>
<dt> &lsquo;<samp>--preserve-timestamps</samp>&rsquo;</dt>
<dd><a name="index-_002dp-4"></a>
<a name="index-_002d_002dpreserve_002dtimestamps"></a>
<a name="index-timestamps-of-installed-files_002c-preserving"></a>
<p>インストール先各ファイルの最終アクセス日時 (last access time) と最終更新日時
(last modification time) を、対応するインストール元各ファイルのそれぞれの日時に合わせる。
このオプションを付けずにインストールした場合、各ファイルの最終アクセス日時と最終更新日時は、
両方ともインストールした日時になる。インストール先ファイルの最終更新日時を、
最後にインストールした日付ではなく、最後にビルドした日付の記録として使用したい場合、
このオプションは便利である。
</p>
</dd>
<dt> &lsquo;<samp>-s</samp>&rsquo;</dt>
<dt> &lsquo;<samp>--strip</samp>&rsquo;</dt>
<dd><a name="index-_002ds-16"></a>
<a name="index-_002d_002dstrip"></a>
<a name="index-symbol-table-information_002c-stripping"></a>
<a name="index-stripping-symbol-table-information"></a>
<p>インストールされるバイナリの実行ファイルからシンボル・テーブルを取り除く。
</p>
</dd>
<dt> &lsquo;<samp>--strip-program=<var>program</var></samp>&rsquo;</dt>
<dd><a name="index-_002d_002dstrip_002dprogram"></a>
<a name="index-symbol-table-information_002c-stripping_002c-program"></a>
<p>バイナリからシンボル・テーブルを取り除くために使用するプログラムを指定する。
</p>
</dd>
<dt> &lsquo;<samp>-S <var>suffix</var></samp>&rsquo;</dt>
<dt> &lsquo;<samp>--suffix=<var>suffix</var></samp>&rsquo;</dt>
<dd><a name="index-_002dS-7"></a>
<a name="index-_002d_002dsuffix-2"></a>
<p>&lsquo;<samp>-b</samp>&rsquo; によって作られる各バックアップファイルの後ろに
<var>suffix</var> を付ける。 See section <a href="coreutils-ja_4.html#Backup-options">バックアップ・オプション</a>.
</p>
</dd>
<dt> &lsquo;<samp>-t <var>directory</var></samp>&rsquo;</dt>
<dt> &lsquo;<samp>--target-directory=<var>directory</var></samp>&rsquo;</dt>
<dd><a name="index-_002dt-11"></a>
<a name="index-_002d_002dtarget_002ddirectory-2"></a>
<a name="index-target-directory-5"></a>
<a name="index-destination-directory-4"></a>
<p><var>directory</var> を出力先ディレクトリに指定する。 See section <a href="coreutils-ja_10.html#Target-directory">出力先ディレクトリ</a>. &lsquo;<samp>-D</samp>&rsquo; オプションも指定すると、
ディレクトリの存在が保証される。
</p>
</dd>
<dt> &lsquo;<samp>-T</samp>&rsquo;</dt>
<dt> &lsquo;<samp>--no-target-directory</samp>&rsquo;</dt>
<dd><a name="index-_002dT-6"></a>
<a name="index-_002d_002dno_002dtarget_002ddirectory-2"></a>
<a name="index-target-directory-6"></a>
<a name="index-destination-directory-5"></a>
<p>最後のオペランドがディレクトリやディレクトリへのシンボリックリンク
でも、それを特別扱いしない。 See section <a href="coreutils-ja_10.html#Target-directory">出力先ディレクトリ</a>.
</p>
</dd>
<dt> &lsquo;<samp>-v</samp>&rsquo;</dt>
<dt> &lsquo;<samp>--verbose</samp>&rsquo;</dt>
<dd><a name="index-_002dv-8"></a>
<a name="index-_002d_002dverbose-4"></a>
<p>コピーを行う前に、コピーするファイル名を表示する。
</p>
</dd>
<dt> &lsquo;<samp>-Z</samp>&rsquo;</dt>
<dt> &lsquo;<samp>--context[=<var>context</var>]</samp>&rsquo;</dt>
<dd><a name="index-_002dZ-2"></a>
<a name="index-_002d_002dcontext-2"></a>
<a name="index-SELinux_002c-setting_002frestoring-security-context-1"></a>
<a name="index-security-context-3"></a>
<p><var>context</var> が指定されていない場合は、出力するファイルの SELinux
セキュリティ・コンテキストを、出力先におけるシステムのデフォルトのタイプに合わせて調整する。
これは、<code>restorecon</code> コマンドの動作に似ている。
このオプションの長い形式を使って、コンテキストを明示的に指定した場合、
そのコンテキストが設定されるのは、新しく作成されるファイルに対してのみである。
コンテキストを指定した場合に、SELinux と SMACK のどちらも無効になっていると、
警告メッセージを出す。 このオプションと &lsquo;<samp>--preserve-context</samp>&rsquo;
オプションは、どちらか一方しか指定できない。
(<var>context</var> を省略できるのは、coreutils-8.22 から)
</p>

</dd>
</dl>

<p>終了ステータス 0 は成功を示し、0 以外の値は失敗を示す。
</p>

<hr size="1">
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="coreutils-ja_79.html#dd-invocation" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="coreutils-ja_81.html#mv-invocation" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="coreutils-ja_77.html#Basic-operations" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="coreutils-ja_77.html#Basic-operations" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="coreutils-ja_84.html#Special-file-types" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="coreutils-ja.html#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="coreutils-ja_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="coreutils-ja_220.html#Concept-index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="coreutils-ja_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<p>
 <font size="-1">
  This document was generated on <i>June 7, 2022</i> using <a href="http://www.nongnu.org/texi2html/"><i>texi2html 1.82</i></a>.
 </font>
 <br>

</p>
</body>
</html>
