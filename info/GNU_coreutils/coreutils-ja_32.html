<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html401/loose.dtd">
<html>
<!-- このマニュアルは、GNU core utilities version 8.26 の詳細な解説である。
core utilities には、テキストやファイルを操作するための標準的なプログラムが入っている。

Copyright C 1994-2016 Free Software Foundation, Inc.

Japanese translation copyright C 2014-2017 Linux JM project

Permission is granted to copy, distribute and/or modify this document under
the terms of the GNU Free Documentation License, Version 1.3 or any later
version published by the Free Software Foundation; with no Invariant
Sections, with no Front-Cover Texts, and with no Back-Cover Texts.  A copy
of the license is included in the section entitled "GNU Free Documentation
License".


【訳者から御注意】 この文書を info コマンドで閲覧なさっている場合は、
行末に余計な文字が入って、読みにくいことがあるかもしれない。
そうしたときは、Ctrl キーと l (エル) キーを同時に押して、画面を再描画していただきたい。
たぶん、表示が正常になるはずである。

お手元の coreutils のバージョンが 8.26 以外の場合、
この文書の説明と動作が違うことがあるかもしれない 
(たとえば、この文書に書いてあるオプションが使えない、あるいは、
使えるはずのオプションの説明がないなど)。
そうした場合は、お使いの coreutils と同じバージョンの info マニュアルや 
man ページに当ってみていただきたい。そちらの方が正しいはずである。
 -->
<!-- Created on June 7, 2022 by texi2html 1.82
texi2html was written by: 
            Lionel Cons <Lionel.Cons@cern.ch> (original author)
            Karl Berry  <karl@freefriends.org>
            Olaf Bachmann <obachman@mathematik.uni-kl.de>
            and many others.
Maintained by: Many creative people.
Send bugs and suggestions to <texi2html-bug@nongnu.org>
-->
<head>
<title>GNU Coreutils: 5.4 csplit: ファイルを内容を目印にして分割する。</title>

<meta name="description" content="GNU Coreutils: 5.4 csplit: ファイルを内容を目印にして分割する。">
<meta name="keywords" content="GNU Coreutils: 5.4 csplit: ファイルを内容を目印にして分割する。">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="texi2html 1.82">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.smallquotation {font-size: smaller}
pre.display {font-family: serif}
pre.format {font-family: serif}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
pre.smalldisplay {font-family: serif; font-size: smaller}
pre.smallexample {font-size: smaller}
pre.smallformat {font-family: serif; font-size: smaller}
pre.smalllisp {font-size: smaller}
span.roman {font-family:serif; font-weight:normal;}
span.sansserif {font-family:sans-serif; font-weight:normal;}
ul.toc {list-style: none}
-->
</style>


</head>

<body lang="en" bgcolor="#FFFFFF" text="#000000" link="#0000FF" vlink="#800080" alink="#FF0000">

<a name="csplit-invocation"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="coreutils-ja_31.html#split-invocation" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="coreutils-ja_33.html#Summarizing-files" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="coreutils-ja_28.html#Output-of-parts-of-files" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="coreutils-ja_28.html#Output-of-parts-of-files" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="coreutils-ja_33.html#Summarizing-files" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="coreutils-ja.html#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="coreutils-ja_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="coreutils-ja_220.html#Concept-index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="coreutils-ja_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<hr size="1">
<a name="csplit_003a-huairuwoNei-Rong-woMu-Yin-nisiteFen-Ge-suru_002e-"></a>
<h2 class="section">5.4 <code>csplit</code>: ファイルを内容を目印にして分割する。</h2>

<a name="index-csplit"></a>
<a name="index-context-splitting"></a>
<a name="index-splitting-a-file-into-pieces-by-context"></a>

<p><code>csplit</code> は、入力ファイル <var>input</var> を分割して 0 個以上の出力ファイルを生成する。
<var>input</var> が &lsquo;<samp>-</samp>&rsquo; である場合は、標準入力から読み込む。
</p>
<p>書式:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">csplit [<var>option</var>]&hellip; <var>input</var> <var>pattern</var>&hellip;
</pre></td></tr></table>

<p>出力ファイルの中身がどうなるかは、以下で詳しく述べるように、引数
<var>pattern</var> によって決まってくる。引数 <var>pattern</var> が、
入力ファイル中に存在しない行を指している場合は、エラーになる
(たとえば、入力の残りの部分に、指定された正規表現にマッチする行がもう存在しない場合)。
すべてのパターン・マッチが終わったとき、残っている入力があれば、
最後の出力ファイルに書き出される。
</p>
<p>デフォルトでは、<code>csplit</code> は、出力ファイルを生成した後で、
各出力ファイルに書き込んだバイト数を表示する。
</p>
<p>パターン引数 <var>pattern</var> には、以下のタイプがある。
</p>
<dl compact="compact">
<dt> &lsquo;<samp><var>n</var></samp>&rsquo;</dt>
<dd><p>入力の最初から <var>n</var> 行目の直前までを含む (つまり、<var>n-1</var> 行目までの)
出力ファイルを作成する (<var>n</var> は正の整数)。繰り返し回数の指定が後に続く場合は、
繰り返しごとに、入力ファイルの次の <var>n</var> 行分を含む出力ファイルを作成していく。
(訳注: パターンが <var>N</var> の場合は、あと何回繰り返すかを正確かつ具体的に指定しなければならない。
すなわち、回数が多かったり、{*} を指定すると、&lsquo;<samp>-k</samp>&rsquo; も指定しないかぎり、
エラーになり、出力ファイルが作成されない。)
</p>
</dd>
<dt> &lsquo;<samp>/<var>regexp</var>/[<var>offset</var>]</samp>&rsquo;</dt>
<dd><p>現在行から、入力ファイル中の次に <var>regexp</var> にマッチする行の直前までを内容とする
(すなわち、マッチする行は含まない) 出力ファイルを作成する。
整数の <var>offset</var> を指定してもよい。指定した場合は、マッチする行にプラス/マイナス
<var>offset</var> した行の直前までの入力が (つまり、その行は含まない)、
出力ファイルに書き込まれ、書き込まれた次の行から入力の後続部分が始まることになる。
</p>
</dd>
<dt> &lsquo;<samp>%<var>regexp</var>%[<var>offset</var>]</samp>&rsquo;</dt>
<dd><p>上記のタイプと同様だが、出力ファイルを作成しない点が異なる。
要するに、入力ファイルのその部分は捨てられることになるわけだ。
</p>
</dd>
<dt> &lsquo;<samp>{<var>repeat-count</var>}</samp>&rsquo;</dt>
<dd><p>直前に行ったパターンの検索を、さらに <var>repeat-count</var> 回繰り返す。
<var>repeat-count</var> には正の整数か、アステリスクを指定できる。後者は、
入力がなくなるまで、必要なだけ何回でも繰り返すことを意味する。
(訳注: &lsquo;<samp>csplit <var>input</var> '/<var>pattern_1</var>/' '{3}'
'/<var>pattern_2</var>/' '{*}'</samp>&rsquo;
のように使用する。)
</p>
</dd>
</dl>

<p>出力ファイルの名前は、接頭辞 (prefix、デフォルトでは &lsquo;<samp>xx</samp>&rsquo;) に接尾辞
(suffix) を続けたものになる。デフォルトの接尾辞は、二桁の 10 進数を &lsquo;<samp>00</samp>&rsquo;
から &lsquo;<samp>99</samp>&rsquo; まで順番に増やして行ったものである。いかなる場合でも、
出力ファイルを、ファイルの名前によってソートした順番で結合すると、
元の入力ファイルが生成されるようになっている。
</p>
<p><code>csplit</code> のデフォルトでは、エラーになった場合や、ハングアップ、
割り込み、中止、終了といったシグナルを受け取った場合には、
それまでに作成した出力ファイルをすべて消去してから終了する。
</p>
<p>このプログラムでは以下のオプションが使用できる。参照: <a href="coreutils-ja_2.html#Common-options">共通オプション</a>.
</p>
<dl compact="compact">
<dt> &lsquo;<samp>-f <var>prefix</var></samp>&rsquo;</dt>
<dt> &lsquo;<samp>--prefix=<var>prefix</var></samp>&rsquo;</dt>
<dd><a name="index-_002df-4"></a>
<a name="index-_002d_002dprefix"></a>
<a name="index-output-file-name-prefix-1"></a>
<p><var>prefix</var> を出力ファイル名の接頭辞として使用する。
</p>
</dd>
<dt> &lsquo;<samp>-b <var>format</var></samp>&rsquo;</dt>
<dt> &lsquo;<samp>--suffix-format=<var>format</var></samp>&rsquo;</dt>
<dd><a name="index-_002db-7"></a>
<a name="index-_002d_002dsuffix_002dformat"></a>
<a name="index-output-file-name-suffix"></a>
<p><var>format</var> を出力ファイル名の接尾辞として使用する。
このオプションを指定する場合、接尾辞として指定する文字列には、<code>printf(3)</code>
方式の変換指定が必ず一つは (それも、一つだけ) 含まれていなければならない。
変換指定には、形式指定フラグ、フィールド幅、精度指定といった修飾子を付けてもよく、
3 種の修飾子をすべて付けることもできる。
フォーマット文字は、バイナリの符号なし整数である引数を、
人間に読みやすい形式に変換するものでなければならない。フォーマット文字の
&lsquo;<samp>d</samp>&rsquo; と &lsquo;<samp>i</samp>&rsquo; は、&lsquo;<samp>u</samp>&rsquo; の別名であり、&lsquo;<samp>u</samp>&rsquo;, &lsquo;<samp>o</samp>&rsquo;,
&lsquo;<samp>x</samp>&rsquo;, &lsquo;<samp>X</samp>&rsquo; 変換が可能である。<var>format</var> の全体が
(現在の出力ファイルが何番目かという情報とともに) <code>sprintf(3)</code>
関数に引き渡され、出力ファイルの一つ一つに対して、ファイル名に使う接尾辞が順番に作られることになる。
なお、このオプションを使用すると、&lsquo;<samp>--digits</samp>&rsquo; オプションは無視される。
</p>
</dd>
<dt> &lsquo;<samp>-n <var>digits</var></samp>&rsquo;</dt>
<dt> &lsquo;<samp>--digits=<var>digits</var></samp>&rsquo;</dt>
<dd><a name="index-_002dn-6"></a>
<a name="index-_002d_002ddigits"></a>
<p>出力ファイル名に含まれる数字の桁数を、デフォルトの 2 桁から
<var>digits</var> 桁にする。
</p>
</dd>
<dt> &lsquo;<samp>-k</samp>&rsquo;</dt>
<dt> &lsquo;<samp>--keep-files</samp>&rsquo;</dt>
<dd><a name="index-_002dk-1"></a>
<a name="index-_002d_002dkeep_002dfiles"></a>
<p>エラーが起きても、出力ファイルを消去しない。
</p>
</dd>
<dt> &lsquo;<samp>--suppress-matched</samp>&rsquo;</dt>
<dd><a name="index-_002d_002dsuppress_002dmatched"></a>
<p>指定した <var>pattern</var> にマッチする行を出力しない。言い換えれば、
境界になる行が、分割されたファイルの 2 番目以降の断片の先頭に現れないようにする。
(訳注: <var>pattern</var> が正規表現の場合には、境界になる行がファイル中にたとえ 1 箇所しかなくても、
その行の表示を抑制するには、&lsquo;<samp>csplit --suppress-matched <var>input</var>
<var>pattern</var> '{*}'</samp>&rsquo; などと、繰り返しの指定をする必要があるようだ。)
</p>
</dd>
<dt> &lsquo;<samp>-z</samp>&rsquo;</dt>
<dt> &lsquo;<samp>--elide-empty-files</samp>&rsquo;</dt>
<dd><a name="index-_002dz-2"></a>
<a name="index-_002d_002delide_002dempty_002dfiles-1"></a>
<p>サイズ 0 の出力ファイルができないようにする (入力ファイルを各部分に区切る行が、
どの部分においても最初の行になることを期待している場合に、
このオプションを使わないと、一番目の出力ファイルがたいていサイズ 0 になる)。
このオプションが指定されているときでも、出力ファイルの連続番号が 0 から始まって、
順番に増えていくことに変わりはない。
</p>
</dd>
<dt> &lsquo;<samp>-s</samp>&rsquo;</dt>
<dt> &lsquo;<samp>-q</samp>&rsquo;</dt>
<dt> &lsquo;<samp>--silent</samp>&rsquo;</dt>
<dt> &lsquo;<samp>--quiet</samp>&rsquo;</dt>
<dd><a name="index-_002ds-8"></a>
<a name="index-_002dq-2"></a>
<a name="index-_002d_002dsilent-2"></a>
<a name="index-_002d_002dquiet-2"></a>
<p>出力ファイルのサイズを表示しない。
</p>
</dd>
</dl>

<p>終了ステータス 0 は成功を示し、0 以外の値は失敗を示す。
</p>
<p>用例を挙げてみよう。まず、練習用に空のディレクトリを作って、そこに移動する。
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">$ mkdir d &amp;&amp; cd d
</pre></td></tr></table>

<p>次に、1 から 14 まで連続する数を、0 または 5 で終わる行で分割する。
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">$ seq 14 | csplit - '/[05]$/' '{*}'
8
10
15
</pre></td></tr></table>

<p>ここで表示された各数字は、csplit が今作成した出力ファイルのサイズである。
その出力ファイルの名前をリストする。
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">$ ls
xx00  xx01  xx02
</pre></td></tr></table>

<p><code>head</code> を使って、内容を見る。
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">$ head xx*
==&gt; xx00 &lt;==
1
2
3
4

==&gt; xx01 &lt;==
5
6
7
8
9

==&gt; xx02 &lt;==
10
11
12
13
14
</pre></td></tr></table>

<p>次の例では、入力を空行で分割している。
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">$ csplit --suppress-matched <var>input.txt</var> '/^$/' '{*}'
</pre></td></tr></table>


<hr size="1">
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="coreutils-ja_31.html#split-invocation" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="coreutils-ja_33.html#Summarizing-files" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="coreutils-ja_28.html#Output-of-parts-of-files" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="coreutils-ja_28.html#Output-of-parts-of-files" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="coreutils-ja_33.html#Summarizing-files" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="coreutils-ja.html#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="coreutils-ja_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="coreutils-ja_220.html#Concept-index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="coreutils-ja_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<p>
 <font size="-1">
  This document was generated on <i>June 7, 2022</i> using <a href="http://www.nongnu.org/texi2html/"><i>texi2html 1.82</i></a>.
 </font>
 <br>

</p>
</body>
</html>
