<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html401/loose.dtd">
<html>
<!-- このマニュアルは、GNU core utilities version 8.26 の詳細な解説である。
core utilities には、テキストやファイルを操作するための標準的なプログラムが入っている。

Copyright C 1994-2016 Free Software Foundation, Inc.

Japanese translation copyright C 2014-2017 Linux JM project

Permission is granted to copy, distribute and/or modify this document under
the terms of the GNU Free Documentation License, Version 1.3 or any later
version published by the Free Software Foundation; with no Invariant
Sections, with no Front-Cover Texts, and with no Back-Cover Texts.  A copy
of the license is included in the section entitled "GNU Free Documentation
License".


【訳者から御注意】 この文書を info コマンドで閲覧なさっている場合は、
行末に余計な文字が入って、読みにくいことがあるかもしれない。
そうしたときは、Ctrl キーと l (エル) キーを同時に押して、画面を再描画していただきたい。
たぶん、表示が正常になるはずである。

お手元の coreutils のバージョンが 8.26 以外の場合、
この文書の説明と動作が違うことがあるかもしれない 
(たとえば、この文書に書いてあるオプションが使えない、あるいは、
使えるはずのオプションの説明がないなど)。
そうした場合は、お使いの coreutils と同じバージョンの info マニュアルや 
man ページに当ってみていただきたい。そちらの方が正しいはずである。
 -->
<!-- Created on June 7, 2022 by texi2html 1.82
texi2html was written by: 
            Lionel Cons <Lionel.Cons@cern.ch> (original author)
            Karl Berry  <karl@freefriends.org>
            Olaf Bachmann <obachman@mathematik.uni-kl.de>
            and many others.
Maintained by: Many creative people.
Send bugs and suggestions to <texi2html-bug@nongnu.org>
-->
<head>
<title>GNU Coreutils: 13.4 touch: ファイルのタイムスタンプを変更する</title>

<meta name="description" content="GNU Coreutils: 13.4 touch: ファイルのタイムスタンプを変更する">
<meta name="keywords" content="GNU Coreutils: 13.4 touch: ファイルのタイムスタンプを変更する">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="texi2html 1.82">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.smallquotation {font-size: smaller}
pre.display {font-family: serif}
pre.format {font-family: serif}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
pre.smalldisplay {font-family: serif; font-size: smaller}
pre.smallexample {font-size: smaller}
pre.smallformat {font-family: serif; font-size: smaller}
pre.smalllisp {font-size: smaller}
span.roman {font-family:serif; font-weight:normal;}
span.sansserif {font-family:sans-serif; font-weight:normal;}
ul.toc {list-style: none}
-->
</style>


</head>

<body lang="en" bgcolor="#FFFFFF" text="#000000" link="#0000FF" vlink="#800080" alink="#FF0000">

<a name="touch-invocation"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="coreutils-ja_96.html#chmod-invocation" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="coreutils-ja_98.html#Disk-usage" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="coreutils-ja_93.html#Changing-file-attributes" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="coreutils-ja_93.html#Changing-file-attributes" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="coreutils-ja_98.html#Disk-usage" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="coreutils-ja.html#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="coreutils-ja_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="coreutils-ja_220.html#Concept-index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="coreutils-ja_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<hr size="1">
<a name="touch_003a-huairunotaimusutanpuwoBian-Geng-suru"></a>
<h2 class="section">13.4 <code>touch</code>: ファイルのタイムスタンプを変更する</h2>

<a name="index-touch"></a>
<a name="index-changing-file-timestamps"></a>
<a name="index-file-timestamps_002c-changing"></a>
<a name="index-timestamps_002c-changing-file"></a>

<p><code>touch</code> は指定されたファイルのアクセス日時 (access time) や更新日時
(modification time) を変更する。
</p>
<p>書式:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">touch [<var>option</var>]&hellip; <var>file</var>&hellip;
</pre></td></tr></table>

<a name="index-empty-files_002c-creating"></a>
<p>引数 <var>file</var> に存在しないファイルを指定すると、空のファイルが作成される。
ただし、&lsquo;<samp>--no-create</samp>&rsquo; (&lsquo;<samp>-c</samp>&rsquo;) や &lsquo;<samp>--no-dereference</samp>&rsquo;
(&lsquo;<samp>-h</samp>&rsquo;) が有効な場合は、ファイルは作成されない。
</p>
<p>引数 <var>file</var> が &lsquo;<samp>-</samp>&rsquo; という文字列の場合は、特別な扱いをする。<code>touch</code>
は、標準出力に結びついているファイルの日時を変更するのである。
</p>
<a name="index-clock-skew-1"></a>
<p><code>touch</code> は、デフォルトではファイルのタイムスタンプを現在の日時にセットする。
<code>touch</code> はオペランドを左から右へと順番に処理するので、
生成されたタイムスタンプが、前後のオペランドで一致しないこともある。
また、「現在」とはいつかを決めるのは、プラットフォーム次第である。
ネットワーク・ファイルシステムを使用しているプラットフォームでは、
オペレーティング・システムとファイルシステムとで別のクロックを使用していることも珍しくない。
<code>touch</code> は通常、デフォルトではファイルシステムのクロックを使用するので、
クロックのずれのために、生成されたファイルのタイムスタンプが、
あるプログラムにとっては「未来」に見えたり、「過去」に見えたりすることがある。
</p>
<a name="index-file-timestamp-resolution"></a>
<p><code>touch</code> コマンドは、ファイルのタイムスタンプを、
ユーザが指定した日時よりも精度が高くならない範囲で、表現できる最も精密な値にセットする。
この値がユーザが指定した日時と違うことがあるが、それにはいくつかの理由がある。
第一に、ユーザが指定した日時が、サポートされている精度を越えていることがある。
第二に、ファイルシステムが、日時のタイプによって別の精度を使っていることがある。
第三に、ファイルのタイムスタンプが、オペレーティング・システムのタイムスタンプとは別の精度を使っていることがある。
第四に、オペレーティング・システムでタイムスタンプの更新に使用される基本データ型が、
さらに違う精度を採用していることがある。そんなわけで、理屈の上では、
たとえば、ファイルシステムでは、アクセス日時には 10 マイクロ秒の精度を、更新日時には
100 ナノ秒の精度を使用し、オペレーティング・システムの方では、現在の時刻にはナノ秒の精度を、
<code>touch</code> がファイルのタイムスタンプを任意の値に設定するために使う基本データ型には、
マイクロ秒の精度を使用している、そういうこともありえるのである。
</p>
<a name="index-permissions_002c-for-changing-file-timestamps"></a>
<p>タイムスタンプを現在の時刻にセットする場合には、
ユーザが所有していないファイルでも、書き込み権限さえ持っていれば、<code>touch</code>
はそのタイムスタンプを変更することができる。
しかし、現在の時刻以外にセットするには、ユーザはそのファイルを所有していなければならない。
古いシステムの中には、制限がさらに厳しいものもある。
たとえば、アクセス日時と更新日時の両方を現在の時刻にセットするとき以外、
対象となるファイルを所有していなければならないといった具合だ。
</p>
<p><code>touch</code> が提供するオプションを使えば、ファイルの 2 種類の日時 &mdash;
最終アクセス日時と最終更新日時 &mdash; を変更することができるが、
標準の日時には、実はそのほかに 3 番目のものがある。すなわち、inode の変更日時
(inode change time) だ。これは、ファイルの <code>ctime</code> と呼ばれることが多い。
inode の変更日時は、ファイルのメタ情報が最後に変更された日時を表している。
メタ情報の変更のよくある例の一つは、ファイルのアクセス権の変更である。
アクセス権の変更では、ファイルにアクセスするわけではないので、atime (アクセス日時)
は変化しないし、またファイルの内容を変更するわけでもないので、mtime (更新日時)
も変化しない。しかし、ファイルそのものに関する何ものかが変化しているわけであり、
それはどこかに記録されなければならない。まさにそれが、inode の ctime フィールドの役割なのだ。
たとえば、バックアップ・プログラムが、ファイルのアクセス権に変更があった場合も含めて、
ファイルのコピーを最新に保つことができるようにするには、ctime が不可欠である。
ファイルの ctime は変更するが、他の日時には影響を及ぼさない別の操作には、ファイル名の変更がある。
なお、いかなる場合であれ、通常の操作では、ユーザが ctime
フィールドを自分で指定する値に変更することはできない。
オペレーティングシステムやファイルシステムの中には、4 番目の日時をサポートしているものもある。
すなわち、作成日時 (birth time) であり、ファイルが最初に作られた日時だ。
名前からして当然だが、このタイムスタンプが変更されることはない。
</p>
<a name="index-TZ-2"></a>
<p>タイムスタンプは、タイムゾーンのルールに従うが、そのルールを指定しているのは、環境変数 <code>TZ</code> である。
<code>TZ</code> が設定されていない場合は、システムのデフォルトのルールに従う。
See <a href="../libc/TZ-Variable.html#TZ-Variable">(libc)TZ Variable</a> section &lsquo;Specifying the Time Zone with <code>TZ</code>&rsquo; in <cite>The GNU C Library Reference Manual</cite>.
なお、UTC のタイムスタンプを使えば、夏 (冬) 時間への移行時の曖昧さを避けることができる。
</p>
<p>このプログラムでは以下のオプションが使用できる。参照: <a href="coreutils-ja_2.html#Common-options">共通オプション</a>.
</p>
<dl compact="compact">
<dt> &lsquo;<samp>-a</samp>&rsquo;</dt>
<dt> &lsquo;<samp>--time=atime</samp>&rsquo;</dt>
<dt> &lsquo;<samp>--time=access</samp>&rsquo;</dt>
<dt> &lsquo;<samp>--time=use</samp>&rsquo;</dt>
<dd><a name="index-_002da-7"></a>
<a name="index-_002d_002dtime-2"></a>
<a name="index-atime_002c-changing"></a>
<a name="index-access-time_002c-changing"></a>
<a name="index-use-time_002c-changing"></a>
<p>アクセス日時のみ変更する。
</p>
</dd>
<dt> &lsquo;<samp>-c</samp>&rsquo;</dt>
<dt> &lsquo;<samp>--no-create</samp>&rsquo;</dt>
<dd><a name="index-_002dc-17"></a>
<a name="index-_002d_002dno_002dcreate"></a>
<p>存在しないファイルについて警告を出さず、ファイルの作成もしない。
</p>
</dd>
<dt> &lsquo;<samp>-d <var>time</var></samp>&rsquo;</dt>
<dt> &lsquo;<samp>--date=<var>time</var></samp>&rsquo;</dt>
<dd><a name="index-_002dd-14"></a>
<a name="index-_002d_002ddate"></a>
<a name="index-time"></a>
<p>現在の日時の代わりに <var>time</var> を使用する。<var>time</var> には、月の名前、
タイムゾーン、&lsquo;<samp>am</samp>&rsquo; や &lsquo;<samp>pm</samp>&rsquo;、&lsquo;<samp>yesterday</samp>&rsquo; なども使うことができる。
たとえば、&lsquo;<samp>--date=&quot;2004-02-27 14:19:13.489392193 +0530&quot;</samp>&rsquo; とすると、
UTC より 5 時間 30 分東のタイムゾーンで、2004 年 2 月 27 日 午後
2 時 19 分 13 秒 から 489,392,193 ナノ秒経過した瞬間を指定することになる。
See section <a href="coreutils-ja_198.html#Date-input-formats">日付入力の書式</a>.  精度の高いタイムスタンプをサポートしていないファイルシステムでは、
精度の超過分は単に無視される。
</p>
</dd>
<dt> &lsquo;<samp>-f</samp>&rsquo;</dt>
<dd><a name="index-_002df-19"></a>
<a name="index-BSD-touch-compatibility"></a>
<p>何もしない。BSD 版の <code>touch</code> との互換性のためにある。
</p>
</dd>
<dt> &lsquo;<samp>-h</samp>&rsquo;</dt>
<dt> &lsquo;<samp>--no-dereference</samp>&rsquo;</dt>
<dd><a name="index-_002dh-7"></a>
<a name="index-_002d_002dno_002ddereference-4"></a>
<a name="index-symbolic-links_002c-changing-time"></a>
<a name="index-lutimes"></a>
<p>シンボリックリンクが参照しているファイルではなく、シンボリックリンクのタイムスタンプの変更を試みる。
このオプションを使用した場合、空のファイルは作成されないが、
ファイルが存在しないという警告まで出ないようにするには、&lsquo;<samp>-c</samp>&rsquo; オプションも併せて使用する必要がある。
すべてのシステムが、シンボリックリンクのタイムスタンプの変更をサポートしているわけではない。
なぜならば、POSIX 2008 までは、下層で動いているシステムに対して、
そうした動作のサポートを要求していなかったからだ。
また、システムによっては、シンボリックリンクは、調べるだけでアクセス日時が変わってしまうので、
変更の結果が後々まで残って観察できるのは、更新日時だけだというものもある。
なお、このオプションを &lsquo;<samp>-r</samp>&rsquo; オプションと一緒に使用すると、
参照するタイムスタンプが、リンクが指しているファイルからではなく、
シンボリックリンクから取得される。
</p>
</dd>
<dt> &lsquo;<samp>-m</samp>&rsquo;</dt>
<dt> &lsquo;<samp>--time=mtime</samp>&rsquo;</dt>
<dt> &lsquo;<samp>--time=modify</samp>&rsquo;</dt>
<dd><a name="index-_002dm-9"></a>
<a name="index-_002d_002dtime-3"></a>
<a name="index-mtime_002c-changing"></a>
<a name="index-modify-time_002c-changing"></a>
<p>更新日時 (modification time) のみ変更する。
</p>
</dd>
<dt> &lsquo;<samp>-r <var>file</var></samp>&rsquo;</dt>
<dt> &lsquo;<samp>--reference=<var>file</var></samp>&rsquo;</dt>
<dd><a name="index-_002dr-10"></a>
<a name="index-_002d_002dreference-3"></a>
<p>現在の日時の代わりに、参照ファイル <var>file</var> の日時を使用する。
このオプションを &lsquo;<samp>--date=<var>time</var></samp>&rsquo; (&lsquo;<samp>-d <var>time</var></samp>&rsquo;)
オプションと組み合わせて使うと、<var>time</var> が相対時間で指定されている場合は、参照ファイル
<var>file</var> の日時がその基点となるが、それ以外の場合は、<var>file</var> の日時は無視される。
たとえば、&lsquo;<samp>-r foo -d '-5 seconds'</samp>&rsquo; は、&lsquo;<tt>foo</tt>&rsquo; のタイムスタンプより
5 秒前のタイムスタンプを指定している。
<var>file</var> がシンボリックリンクの場合は、&lsquo;<samp>-h</samp>&rsquo; が同時に有効になっていないかぎり、
参照するタイムスタンプは、シンボリックリンクの参照先から取得される。
</p>
</dd>
<dt> &lsquo;<samp>-t [[<var>cc</var>]<var>yy</var>]<var>mmddhhmm</var>[.<var>ss</var>]</samp>&rsquo;</dt>
<dd><a name="index-leap-seconds"></a>
<p>現在の日時の代わりに、&lsquo;<samp>-t</samp>&rsquo; オプションの引数を使用する
(引数の構成は、4 桁または 2 桁の年 (省略可)、月、日、時、分、秒 (秒も省略可)
である)。年が 2 桁のみ指定された場合、0 &hellip; 68 の範囲の年ならば、
<var>cc</var> は 20 であり、69 &hellip; 99 の範囲の年では、<var>cc</var> は 19 である。
年が全く指定されない場合は、引数は今年の日付だと解釈される。
閏秒に対応している例外的なシステムでは、<var>ss</var> が &lsquo;<samp>60</samp>&rsquo; のこともありえる。
</p>
</dd>
</dl>

<a name="index-_005fPOSIX2_005fVERSION-4"></a>
<p>POSIX 1003.1-2001 以前のシステムでは、<code>touch</code>
は次のような旧式の書式をサポートしている。すなわち、&lsquo;<samp>-d</samp>&rsquo;, &lsquo;<samp>-r</samp>&rsquo;,
&lsquo;<samp>-t</samp>&rsquo; オプションのいづれによってもタイムスタンプが指定されていず、しかも、2 個以上の
<var>file</var> が指定されていて、最初の <var>file</var> が
&lsquo;<samp><var>mmddhhmm</var>[<var>yy</var>]</samp>&rsquo; の形を持ち、それが
(<var>yy</var> が存在するなら、それを先頭に移せば) &lsquo;<samp>-t</samp>&rsquo;
オプションに対する有効な引数と見なすことができる場合に、その引数の表している年度が
1969&ndash;1999 の範囲にあるならば、その引数をファイル名ではなく、
他のファイルに適用する日時と解釈する、というものである。
この旧式の動作は、環境変数 <code>_POSIX2_VERSION</code> によってコントロールすることができるが
(see section <a href="coreutils-ja_15.html#Standards-conformance">規格への準拠</a>)、移植を考慮したスクリプトでは、
動作がこの環境変数に依存するコマンドの使用は避けるべきである。
たとえば、二通りの解釈ができる &lsquo;<samp>touch 12312359 main.c</samp>&rsquo;
を使うより、&lsquo;<samp>touch ./12312359 main.c</samp>&rsquo; や &lsquo;<samp>touch -t 12312359 main.c</samp>&rsquo;
を使用した方がよい。
</p>
<p>終了ステータス 0 は成功を示し、0 以外の値は失敗を示す。
</p>

<hr size="1">
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="coreutils-ja_96.html#chmod-invocation" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="coreutils-ja_98.html#Disk-usage" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="coreutils-ja_93.html#Changing-file-attributes" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="coreutils-ja_93.html#Changing-file-attributes" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="coreutils-ja_98.html#Disk-usage" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="coreutils-ja.html#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="coreutils-ja_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="coreutils-ja_220.html#Concept-index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="coreutils-ja_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<p>
 <font size="-1">
  This document was generated on <i>June 7, 2022</i> using <a href="http://www.nongnu.org/texi2html/"><i>texi2html 1.82</i></a>.
 </font>
 <br>

</p>
</body>
</html>
